(function(e){function t(t){for(var s,o,l=t[0],r=t[1],c=t[2],d=0,h=[];d<l.length;d++)o=l[d],n[o]&&h.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,o=1;o<i.length;o++){var r=i[o];0!==n[r]&&(s=!1)}s&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},n={app:0},a=[];function o(e){return l.p+"js/"+({"lang-cs-CZ":"lang-cs-CZ","lang-de-DE":"lang-de-DE","lang-fr-FR":"lang-fr-FR","lang-it-IT":"lang-it-IT","lang-nl-NL":"lang-nl-NL","lang-pt-BR":"lang-pt-BR","lang-zh-CN":"lang-zh-CN"}[e]||e)+"."+{"lang-cs-CZ":"138227fa","lang-de-DE":"83ade8e9","lang-fr-FR":"071f6a95","lang-it-IT":"eafc71b2","lang-nl-NL":"93677edc","lang-pt-BR":"67e65e8f","lang-zh-CN":"5ac7c1c0"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise(function(t,s){i=n[e]=[t,s]});t.push(i[2]=s);var a,r=document.createElement("script");r.charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=o(e),a=function(t){r.onerror=r.onload=null,clearTimeout(c);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+s+": "+a+")");o.type=s,o.request=a,i[1](o)}n[e]=void 0}};var c=setTimeout(function(){a({type:"timeout",target:r})},12e4);r.onerror=r.onload=a,document.head.appendChild(r)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"01be":function(e,t,i){},"04bd":function(e,t,i){"use strict";var s=i("cdfb"),n=i.n(s);n.a},"08fc":function(e,t,i){"use strict";var s=i("7086"),n=i.n(s);n.a},"091a":function(e,t,i){"use strict";var s=i("bcf5"),n=i.n(s);n.a},"0ae0":function(e,t,i){"use strict";var s=i("5865"),n=i.n(s);n.a},"0ae6":function(e,t,i){"use strict";var s=i("c867"),n=i.n(s);n.a},"0b15":function(e,t,i){"use strict";var s=i("9a91"),n=i.n(s);n.a},"0d0c":function(e,t,i){},"0ebd":function(e,t,i){"use strict";var s=i("d06d"),n=i.n(s);n.a},"0fa4":function(e,t,i){},"0ffd":function(e,t,i){"use strict";var s=i("dc98"),n=i.n(s);n.a},1054:function(e,t,i){"use strict";var s=i("d38e"),n=i.n(s);n.a},1271:function(e,t,i){"use strict";i.r(t),i.d(t,"dateTimeFormats",function(){return s});const s={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}};t["default"]={about_directus:"About Directus",activity:"Activity",my_activity:"My Activity",activity_log:"Activity Log",activity_outside_directus:"This item was created outside of Directus.",admin_email:"Admin Email",admin_password:"Admin Password",additional_info:"Additional Info",add_new:"Add new",add_field_filter:"Add a field filter",add_note:"Add a helpful note for users...",admin_settings:"Admin Settings",almost_done_options:"Almost Done! Now just review the interface options below.",almost_done_copy:"Every interface can be perfectly tailored to your needs. Below are the available options for this field, but only some are required.",all:"All",statuses:"Statuses",api_url:"API URL",api_installed:"API Successfully Installed",auto_generate:"Auto-Generate",auto_generated:"Automatically generated...",batch:"Batch",batch_edit:"Batch Editing Items: {collection}",batch_delete:"Batch Delete",batch_delete_confirm:"No items have been selected | Are you sure you want to delete this item? This action can not be undone. | Are you sure you want to delete these {count} items? This action can not be undone.",between:"Between",both:"Both",bookmarks:"Bookmarks",cancel:"Cancel",change_project:"Change Project",choose_one:"Choose One",choose_project:"Choose Project",choose_interface:"Choose an interface for how this data should be managed.",clear:"Clear",click_to_toggle_all_none:"Click to toggle entire column on/off",connection:"Connection",collection:"Collection",collections_and_fields:"Collection & Fields",collection_invalid_name:"Invalid collection name",collection_updated:"{collection} Collection Updated",collection_removed:"{collection} Collection Removed",collection_names_cannot_be_changed:"Collection names cannot be edited at this time.",collections:"Collections",collection_count:"No Collections | One Collection | {count} Collections","collections-directus_files":"Files","collections-directus_users":"Users","collections-directus_activity":"Activity",comment:"Comment",comments:"Comments",coming_soon:"Coming Soon",contains:"Contains",config_error:"Missing Config",config_error_copy:"Make sure you've created the application's configuration file",collection_contains_items:"{collection} contains {count} items",currently_selected:"Currently selected: {thing}",create:"Create",creating_item:"Creating Item",creating_item_page_title:"Creating Item: {collection}",creating_role:"Creating Role",create_role:"Create Role",create_field:"Create Field",update_field:"Update Field",create_collection:"Create Collection",database_connection:"Database Connection",database_connection_copy:"Next, we need to know how to connect to the database where this project will be managed.",datatype:"Datatype",db_datatype:"{db} Datatype",editing_my_profile:"Editing My Profile",embed:"Embed",embed_placeholder:"YouTube, Vimeo, or other link",fieldtypes:{alias:"Fields that do not save data or do not have corresponding database columns",array:"Standard array format in API response",datetime:"A date and time in ISO format, eg: 2018-09-19T14:00:43.381Z",date:"Date, eg: 2018-09-19",time:"Time, eg: 14:09:22",file:"Foreign key to directus_files.id",group:"Groups fields together visually, children save group into directus_fields.group",integer:"Whole number",decimal:"Number that includes a decimal",json:"Standard JSON format in API response",lang:"Specific to translation interfaces, this stores the language key",m2o:"Many-to-One Relationship",o2m:"One-to-Many Relationship",sort:"System field used in drag-and-drop item reordering",status:"System field used for publishing workflows",string:"Any text, numbers, spaces, or symbols; defined and limited by its length (number of characters)",translation:"Specific to translation interfaces, this o2m is stores multi-lingual content",uuid:"A Universally Unique Identifier",datetime_created:"System field to track the datetime an item was created, used by revisions",datetime_updated:"System field to track the datetime an item was updated, used by revisions",user_created:"System field to track the user who created an item, used by revisions",user_updated:"System field to track the user who updated an item, used by revisions"},datatypes:{mysql:{CHAR:"A fixed-length non-binary string right-padded with spaces. Length can be 0 to 255 characters.",VARCHAR:"A variable-length non-binary string. Length can be 0 to 65,535 characters (MySQL 5.0.3+).",TINYTEXT:"A string with a max length of 255 characters.",TEXT:"A string with a max length of 65,535 characters.",MEDIUMTEXT:"A string with a max length of 16,777,215 characters.",LONGTEXT:"A string with a max length of 4,294,967,295 characters.",BOOLEAN:"True or false. Is saved as either 1 or 0 respectively.",TINYINT:"An integer. When signed (allows negative) length is -128 to 127, otherwise the max is 255.",SMALLINT:"An integer. When signed (allows negative) length is -32,768 to 32,767, otherwise the max is 65,535.",MEDIUMINT:"An integer. When signed (allows negative) length is -8,388,608 to 8,388,607, otherwise the max is 16,777,215.",INT:"An integer. When signed (allows negative) length is -2,147,483,648 to 2,147,483,647, otherwise the max is 4,294,967,295.",BIGINT:"An integer. When signed (allows negative) length is -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807, otherwise the max is 18,446,744,073,709,551,615.",DECIMAL:"An accurate number (eg: for currency), with 1 to 65 digits length (L) and 0 to 30 digits decimal (D). Length format: `L,D`",FLOAT:"An approximate binary number, 4 bytes with a floating decimal point.",DOUBLE:"An approximate binary number, 8 bytes with a floating decimal point.",DATE:"A date. Allows `1000-01-01` to `9999-12-31`.",DATETIME:"A date and time. Allows `1000-01-01 00:00:00` to `9999-12-31 23:59:59`.",TIMESTAMP:"A date and time. Allows `1970-01-01 00:00:01` UTC to `2038-01-19 03:14:07` UTC.",TIME:"A time. Allows `-838:59:59` to `838:59:59`.",YEAR:"A year. Allows `1901` to `2155` or `0000`"}},date_and_time:"Date & Time",db_user:"Database User",db_password:"Database User Password",db_name:"Database Name",db_type:"Database Type",db_column_name:"Database column name...",db_updated:"Database successfully updated",db_update_failed:"The database couldn't be updated.",default:"Default",delete:"Delete",delete_are_you_sure:"Are you sure you want to delete this item? This action can not be undone.",delete_collection_are_you_sure:"Are you sure you want to delete this collection? This action can not be undone.",delete_field_are_you_sure:'Are you sure you want to delete the field "{field}"? This action can not be undone.',delete_role_are_you_sure:'Are you sure to delete the role "{name}"? This action cannot be undone.',delete_bookmark:"Delete Bookmark",delete_bookmark_body:"Are you sure you want to delete this bookmark? This action cannot be undone.",description:"Description",delete_confirmation:"Delete Confirmation",dialog_beginning:"Beginning of dialog window.",discard_changes:"Discard Changes",display_name:"Display Name",drop_files:"Can't Drop Files | Drop file here... | Drop files here...",dont_show:"Don't Show",editing:"Editing Item: {collection}",editing_item:"Editing Item",editing_items:"Batch Editing {count} Items",editing_single:"Editing {collection}",email_address:"Email Address",email:"Email",empty_collection:"Empty Collection",empty_collection_body:"There are no items in this collection yet",enable_manual_sorting:"Enable manual sorting",enter_value:"Enter Value",enter_collection_name:"Enter collection name...",enter_role_name:"Enter role name...",environment:"Environment",project_key:"Project Key",errors:{"-1":"Couldn't reach API",11:"Can't connect to database",100:"Wrong username and/or password",101:"Logged out due to inactivity",102:"Logged out due to inactivity",103:"User inactive",106:"Wrong username and/or password",107:"User not found"},error_unknown:"Unknown error. Try again later.",esc_cancel:"Escape will cancel and close the window.",equal_to:"Equal to",existing:"Existing",fetching_data:"Fetching Data",field:"Field",field_type:"Field Type",field_created:"{field} Field Created",field_updated:"{field} Field Updated",field_removed:"{field} Field Removed",fields:"Fields",fields_are_saved_instantly:"Changes saved instantly",file:"File",file_library:"File Library",file_upload:"Upload File(s)",forgot_password:"Forgot Password",greater_than_equal:"Greater than or equal to",greater_than:"Greater than",help_and_docs:"Help & Docs",keep_editing:"Keep editing",hidden_detail:"Hidden on Detail",hidden_browse:"Hidden on Browse",host:"Host",in_list:"One of these",initial_schema:"Choose an Initial Schema",initial_schema_copy:"Choose from existing database architectures or start fresh. You can always extend and tweak this later.",interface:"Interface",interface_count:"No Interfaces | One Interface | {count} Interfaces",interfaces:"Interfaces",info:"Info",intelligent_defaults:"Advanced options lets you configure how data will be stored in the database and tweak additional app settings.",interface_settings:"Every interface can be perfectly tailored to your needs. Below are the available options for this interface, but only some are required.",install:"Install",install_copy:"This API has not been setup yet. Would you like to install and configure it now?",is_empty:"Is empty",is_not_null:"Is not NULL",is_null:"Is NULL",item_count:"No Items | One Item | {count} Items",event_count:"No Events | One Event | {count} Events",role_count:"No Roles | One Role | {count} Roles",item_count_filter:"No Filtered Items | One Filtered Item | {count} Filtered Items",item_deleted:"Item Deleted",item_saved:"Item Saved | {count} Items Saved",junction_collection:"Junction Collection",cant_disable_primary:"You can't disable primary key on an existing field. Remove this field instead.",extension_error:"There was a problem loading the {ext} extension.",extensions_missing:"No Extensions Found",extensions_missing_copy:"Make sure you have the system extensions installed.",latency:"Latency",learn_more:"Learn More",leave_comment:"Leave a comment...",length:"Length",length_disabled_placeholder:"Length is determined by the datatype",less_than_equal:"Less than or equal to",less_than:"Less than",limited:"Limited",loading:"Loading...",loading_more:"Loading more items...",login:"Log in",m2m:"Many-to-Many (M2M)",m2o:"Many-to-One (M2O)",o2m:"One-to-Many (O2M)",name:"Name",name_field:"Let’s name this {field} field and add a helpful note for users.",navigate_changes:"Are you sure you want to leave this page? The changes you made will be lost if you navigate away from this page.",new:"New",new_file:"New File",no_related_entries:"Has no related entries",not_between:"Not between",not_contains:"Doesn't contain",note:"Note",note_note:"An internal description...",note_hidden:"[Learn More](https://docs.directus.io/guides/collections.html#hidden)",note_icon:"The icon shown in the App's navigation sidebar",note_managed:"[Learn More](https://docs.directus.io/guides/collections.html#managing-collections)",note_single:"[Learn More](https://docs.directus.io/guides/collections.html#single)",no_results:"No Results",no_results_body:"The current filters do not match any collection items",no_collections:"No Collections Setup",no_collections_body:"It seems like there aren't any collections setup yet",no_fields:"No Fields Setup",no_fields_body:"It seems like this collection doesn't have any fields setup yet",no_files:"No Files",no_files_body:"It seems like there haven't been any files uploaded yet",numeric:"Numeric",page_not_found:"Page Not Found",page_not_found_body:"The page you are looking for doesn't seem to exist.",permissions:"Permissions",name_bookmark:"What would you like to name this bookmark?",next:"Next",none:"None",not_empty:"Is not empty",not_equal_to:"Not equal to",not_in_list:"Not one of these",no_interface_error:"Field {field} doesn't have an interface setup",manage:"Manage",manage_started:"Started Managing {collection}",manage_stopped:"Stopped Managing {collection}",max_size:"Max. Size: {size}",max_one_primary_key:"You can only have 1 primary key field per collection",dont_manage:"Don't Manage",dont_manage_copy:"Privileges, preferences, and settings for the {collection} collection will be permanently removed from the system! Are you sure?",more_options:"More options",mixed:"Mixed",my_profile:"My Profile",other:"Other",ok:"OK",operator:"Operator",open_on_gh:"Open on GitHub",options:"Options",password:"Password",password_reset_sent:"Password reset email sent to {email}",permissions_no_collections:"This project does not have any collections yet.",permissions_admin:"Admins have access to all managed data within the system by default.",permission_states:{none:"None",mine:"Mine Only",role:"Role Only",full:"All",read:"Readonly",create:"Create",on_create:"On Creation",update:"Update",on_update:"On Update",always:"Always"},popular:"Popular",powered_by_directus:"Powered by Directus",preview_and_revert:"Preview and Revert",primary_key:"Primary Key",port:"Port",project:"Project",project_name:"Project Name",project_info:"Project Information",project_info_copy:"Below are a few questions about your project, including the credentials of your first administrator.",read:"Read",readable_fields:"Readable Fields",readable_fields_copy:"Select the fields that the user can view",readonly:"Readonly",relational:"Relational",report_issue:"Report Issue",request_feature:"Request Feature",regex:"RegEx",relation_setup:"Since this is a relational field, we need to map-out the related fields.",relation_setup_copy:"There are different types of relational data, this interface uses one called {relation}.",related_entries:"Has related entries",related_collection:"Related Collection",remove:"Remove",remove_related:"Remove Related Item",relationship:"Relationship",required:"Required",reset_preferences:"Reset all listing preferences",reset_password:"Reset Password",revert:"Revert",revert_copy:"Do you want to revert this item to how it was on {date}?",roles:"User Roles",role_settings:"Role Settings",save:"Save",save_and_add:"Save and Add New",save_and_stay:"Save and Stay",save_as_copy:"Save as Copy",save_as_bookmark:"Save as Bookmark",schema:"Schema",search:"Search",select_from_device:"Select from device",select_existing:"Select Existing",select_field:"Select a Field",select_fields:"Select Fields",search_interface:"Search for an interface...",select_interface_below:"Select an interface below",select_statuses:"Select Statuses",select_statuses_copy:"Select the statuses the user can use",settings:"Settings",settings_project:"Project Settings",settings_global:"Global Settings",settings_update_database:"Update Database",settings_update_database_subtext:"Run Script",settings_update_database_confirm:"This will update the system fields in your database to the latest version of Directus. Please make sure to make a backup before you run this operation.",settings_collections_fields:"Collections & Fields",settings_permissions:"Roles & Permissions",settings_extensions:"Extensions",settings_saved:"Settings Saved",server_details:"Server Details",server_error:"Server Error",server_error_copy:"Something is wrong with this instance’s server or database.",server_trouble:"Server Trouble",server_trouble_copy:"Try again later or contact your system administrator help.",advanced_options:"Advanced options",show_directus_collections:"Show Directus System Collections",something_went_wrong:"Something went wrong.",something_went_wrong_body:"Trouble processing request. Try again after refreshing the page.",sort_by:"Sort By",sign_in:"Sign In",signing_in:"Signing In",sign_out:"Sign Out",sign_out_confirm:"Are you sure you want to sign out?",sign_out_confirm_edits:"Are you sure you want to sign out? All unsaved changes will be lost.",text:"Text",this_collection:"This Collection",to:"To",unsaved_changes_copy:"You have unsaved changes! Are you sure you want to leave this page?",user_directory:"User Directory",update:"Update",update_confirm:"Are you sure you want to update {count} items?",unique:"Unique",user_edit_warning:"{first_name} {last_name} is editing this item too. Please coordinate with them so you don't lose your changes.",value:"Value",values:"Values",validation:"Validation",version:"Version",version_and_updates:"Version and Updates",view_type:"View As...",welcome:"Welcome",writable_fields:"Writable Fields",writable_fields_copy:"Select the fields that the user can edit",yes:"Yes",duplicating_field:"Duplicating Field",duplicate:"Duplicate",upload_exceeds_max_size:"{filename} can't be uploaded. Your server is not configured to handle uploads of this size."}},"19c9":function(e,t,i){},"1a11":function(e,t,i){"use strict";var s=i("d185"),n=i.n(s);n.a},"1e45":function(e,t,i){"use strict";var s=i("bb75"),n=i.n(s);n.a},"1e77":function(e,t,i){},"20da":function(e,t,i){"use strict";var s=i("fc6d"),n=i.n(s);n.a},2224:function(e,t,i){e.exports=i.p+"img/logo-dark.912f80a1.svg"},"28fe":function(e,t,i){},"2fb8":function(e,t,i){"use strict";var s=i("9317"),n=i.n(s);n.a},3068:function(e,t,i){"use strict";var s=i("d953"),n=i.n(s);n.a},3657:function(e,t,i){"use strict";var s=i("f90b"),n=i.n(s);n.a},"38bc":function(e,t,i){},3980:function(e,t,i){"use strict";var s=i("ac12"),n=i.n(s);n.a},"39f0":function(e,t,i){"use strict";var s=i("0fa4"),n=i.n(s);n.a},"3b60":function(e,t,i){},"3b68":function(e,t,i){},"3d0c":function(e,t,i){"use strict";var s=i("a2d6"),n=i.n(s);n.a},"40e8":function(e,t,i){},"40eb":function(e,t,i){},4398:function(e,t,i){},"4cca":function(e,t,i){"use strict";var s=i("b8f0"),n=i.n(s);n.a},"4f98":function(e,t,i){"use strict";var s=i("40e8"),n=i.n(s);n.a},"4fa1":function(e,t,i){"use strict";var s=i("b15a"),n=i.n(s);n.a},5003:function(e,t,i){"use strict";var s=i("38bc"),n=i.n(s);n.a},"53eb":function(e,t,i){"use strict";var s=i("3b68"),n=i.n(s);n.a},"55ad":function(e,t,i){},"56a1":function(e,t,i){"use strict";var s=i("55ad"),n=i.n(s);n.a},"56d7":function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"LOGIN_PENDING",function(){return Bn}),i.d(s,"LOGIN_SUCCESS",function(){return Pn}),i.d(s,"LOGIN_FAILED",function(){return Ln}),i.d(s,"LOGOUT",function(){return Rn}),i.d(s,"REFRESH_TOKEN",function(){return Vn}),i.d(s,"REMOVE_AUTH_ERROR",function(){return Un}),i.d(s,"CHANGE_API",function(){return Kn}),i.d(s,"SET_BOOKMARKS",function(){return zn}),i.d(s,"ADD_BOOKMARK",function(){return Wn}),i.d(s,"DELETE_BOOKMARK",function(){return Hn}),i.d(s,"SET_COLLECTIONS",function(){return Gn}),i.d(s,"ADD_COLLECTION",function(){return Qn}),i.d(s,"DELETE_COLLECTION",function(){return Xn}),i.d(s,"UPDATE_COLLECTION",function(){return Yn}),i.d(s,"DISCARD_CHANGES",function(){return Zn}),i.d(s,"ITEM_CREATED",function(){return Jn}),i.d(s,"START_EDITING",function(){return ea}),i.d(s,"UNSTAGE_VALUE",function(){return ta}),i.d(s,"STAGE_VALUE",function(){return ia}),i.d(s,"ADD_FIELD",function(){return sa}),i.d(s,"UPDATE_FIELD",function(){return na}),i.d(s,"UPDATE_FIELDS",function(){return aa}),i.d(s,"REMOVE_FIELD",function(){return oa}),i.d(s,"SET_INTERFACES",function(){return la}),i.d(s,"SET_LAYOUTS",function(){return ra}),i.d(s,"SET_PAGES",function(){return ca}),i.d(s,"STORE_HYDRATED",function(){return da}),i.d(s,"HYDRATING_FAILED",function(){return ua}),i.d(s,"SET_PERMISSIONS",function(){return ha}),i.d(s,"ADD_PERMISSION",function(){return pa}),i.d(s,"LATENCY",function(){return ma}),i.d(s,"LOADING_START",function(){return fa}),i.d(s,"LOADING_FINISHED",function(){return va}),i.d(s,"SET_CURRENT_USER",function(){return _a}),i.d(s,"UPDATE_CURRENT_USER",function(){return ga}),i.d(s,"SET_RELATIONS",function(){return ya}),i.d(s,"ADD_RELATION",function(){return ba}),i.d(s,"UPDATE_RELATION",function(){return $a}),i.d(s,"SET_SERVER_INFO",function(){return ka}),i.d(s,"TOGGLE_NAV",function(){return wa}),i.d(s,"TOGGLE_INFO",function(){return Ca}),i.d(s,"SET_USERS",function(){return xa}),i.d(s,"PUSH_NOTIFICATION",function(){return Ia}),i.d(s,"REMOVE_NOTIFICATION",function(){return Sa});var n={};i.r(n),i.d(n,"login",function(){return jl}),i.d(n,"loginSSO",function(){return Al}),i.d(n,"refresh",function(){return Dl}),i.d(n,"logout",function(){return Bl}),i.d(n,"changeAPI",function(){return Pl}),i.d(n,"removeAuthError",function(){return Ll}),i.d(n,"clearAuth",function(){return Rl});var a={};i.r(a),i.d(a,"tokenPayload",function(){return Wl}),i.d(a,"loggedIn",function(){return Hl});var o={};i.r(o),i.d(o,"getExtensions",function(){return Yl}),i.d(o,"getAllExtensions",function(){return Zl});var l={};i.r(l),i.d(l,"addField",function(){return sr}),i.d(l,"updateField",function(){return nr}),i.d(l,"updateFields",function(){return ar}),i.d(l,"removeField",function(){return or}),i.d(l,"getCollections",function(){return lr}),i.d(l,"addCollection",function(){return rr}),i.d(l,"removeCollection",function(){return cr}),i.d(l,"updateCollection",function(){return dr});var r={};i.r(r),i.d(r,"discardChanges",function(){return fr}),i.d(r,"startEditing",function(){return vr}),i.d(r,"stageValue",function(){return _r}),i.d(r,"unstageValue",function(){return gr}),i.d(r,"save",function(){return yr});var c={};i.r(c),i.d(c,"editing",function(){return br});var d={};i.r(d),i.d(d,"addPermission",function(){return xr}),i.d(d,"getPermissions",function(){return Ir});var u={};i.r(u),i.d(u,"getSettings",function(){return Or}),i.d(u,"setSettings",function(){return qr}),i.d(u,"setSetting",function(){return jr});var h={};i.r(h),i.d(h,"getUsers",function(){return Dr});var p={};i.r(p),i.d(p,"getRelations",function(){return Rr}),i.d(p,"addRelation",function(){return Vr}),i.d(p,"updateRelation",function(){return Ur});var m={};i.r(m),i.d(m,"m2o",function(){return Kr}),i.d(m,"o2m",function(){return zr});var f={};i.r(f),i.d(f,"getServerInfo",function(){return Xr});var v={};i.r(v),i.d(v,"latency",function(){return oc}),i.d(v,"getCurrentUser",function(){return lc}),i.d(v,"track",function(){return rc}),i.d(v,"getBookmarks",function(){return cc}),i.d(v,"saveBookmark",function(){return dc}),i.d(v,"deleteBookmark",function(){return uc}),i.d(v,"loadingStart",function(){return hc}),i.d(v,"loadingFinished",function(){return pc});var _={};i.r(_),i.d(_,"signalStrength",function(){return mc});var g=i("d847"),y=i.n(g),b=i("2b0e"),$=i("2ef0"),k=i.n($),w=i("1516"),C=i.n(w),x=i("e37d"),I=i("8682"),S=i("5cd9"),M=i.n(S),E=i("bc3a"),T=i.n(E),N=i("0a89"),F=i.n(N),O=i("52cf"),q=i.n(O),j=i("8424"),A=i.n(j),D=(i("e008"),i("a725"),i("5b7e")),B=i.n(D),P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"invisible-label",attrs:{for:e.htmlFor}},[e._t("default")],2)},L=[],R={name:"invisible-label",props:{htmlFor:{type:String,required:!0}}},V=R,U=(i("7d60"),i("2877")),K=Object(U["a"])(V,P,L,!1,null,"f1a34b78",null),z=K.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"loader",class:e.area,style:{zIndex:e.zIndex}},[i("div",{staticClass:"overlay",class:{transparent:e.transparent}}),i("transition",{attrs:{name:"fade"}},[i("v-spinner",{directives:[{name:"show",rawName:"v-show",value:e.spinnerActive,expression:"spinnerActive"}],staticClass:"spinner",attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1)],1)])},H=[],G={name:"loader",props:{area:{type:String,default:null,validator(e){const t=["content","full-page"];return t.includes(e)}},transparent:{type:Boolean,default:!1},delay:{type:Number,default:0},spinnerDelay:{type:Number,default:0},zIndex:{type:Number,default:500}},data(){return{active:!1,spinnerActive:!1}},created(){setTimeout(()=>{this.active=!0},this.delay),setTimeout(()=>{this.spinnerActive=!0},this.delay+this.spinnerDelay)}},Q=G,X=(i("66c3"),Object(U["a"])(Q,W,H,!1,null,"66cc8276",null)),Y=X.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-avatar"},[i("div",{staticClass:"wrapper",style:{borderColor:"var(--"+e.color+")",width:e.size+"px",height:e.size+"px"}},[null==e.src||e.error?i("i",{staticClass:"material-icons",style:{fontSize:e.size/2+2+"px"}},[e._v("person")]):i("img",{directives:[{name:"show",rawName:"v-show",value:!e.error&&!1===e.loading,expression:"!error && loading === false"}],attrs:{src:e.src,alt:e.alt},on:{load:function(t){e.loading=!1},error:e.onImageLoadingError}})]),e.indicator?i("div",{staticClass:"indicator",style:{backgroundColor:"var(--"+e.color+")"}}):e._e()])},J=[],ee={name:"v-avatar",props:{src:{type:String,default:null},alt:{type:String,required:!0},indicator:{type:Boolean,default:!1},color:{type:String,default:"accent"},size:{type:Number,default:40}},data(){return{loading:!1,error:!1}},methods:{onImageLoadingError(e){this.error=e,this.loading=!1}},watch:{src(){this.error=!1}}},te=ee,ie=(i("ed57"),Object(U["a"])(te,Z,J,!1,null,"4e2cf193",null)),se=ie.exports,ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.element,{tag:"component",staticClass:"v-card",class:{link:e.link,selected:e.selected,selectable:e.selectable,"selection-mode":e.selectionMode,disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[i(e.wrapperTag,{tag:"component",attrs:{to:e.to,href:e.href,target:"__blank"}},[e.src||e.icon||e.$slots.icon?i("div",{staticClass:"header",style:{backgroundColor:"var(--"+e.color+")"}},[e.selectable?i("button",{staticClass:"select",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.$emit("select")}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.selectionIcon))])]):e._e(),e.src&&!e.error?i("img",{attrs:{alt:e.title,src:e.src},on:{error:e.onImageError}}):e._e(),e.error?i("i",{staticClass:"material-icons error icon"},[e._v("broken_image")]):e._e(),e.icon?i("i",{staticClass:"material-icons icon",class:{"half-opacity":"half"===e.opacity}},[e._v(e._s(e.icon))]):e._e(),e.$slots.icon?i("div",{staticClass:"custom-icon"},[e._t("icon")],2):e._e(),e.label?i("span",{staticClass:"label"},[e._v(e._s(e.label))]):e._e()]):i("div",{staticClass:"header small",style:{backgroundColor:"var(--"+e.color+")"}},[e.selectable?i("button",{staticClass:"select",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.$emit("select")}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.selectionIcon))])]):e._e()]),i("div",{staticClass:"body",class:{menu:null!=e.options}},[i("div",{staticClass:"main"},[i(e.titleElement,{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.title,expression:"title"}],tag:"component",staticClass:"title"},[e._v(e._s(e.title))]),e.subtitle?i("p",{staticClass:"subtitle style-4"},[e._v(e._s(e.subtitle))]):e._e(),e.body?i("p",{staticClass:"content"},[e._v(e._s(e.body))]):e._e()],1),i("v-popover",{attrs:{placement:"right-start",offset:"2"}},[null!=e.options?i("button",{staticClass:"menu-toggle",attrs:{type:"button"}},[i("i",{staticClass:"material-icons"},[e._v("more_vert")])]):e._e(),i("template",{slot:"popover"},[i("ul",{staticClass:"ctx-menu"},e._l(e.options,function(t,s){var n=t.text,a=t.icon;return i("li",{key:s},[i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{type:"button"},on:{click:function(t){return e.$emit(s)}}},[a?i("i",{staticClass:"material-icons"},[e._v(e._s(a))]):e._e(),e._v("\n                "+e._s(n)+"\n              ")])])}),0)])],2)],1)])],1)},ae=[],oe={name:"v-card",props:{element:{type:String,default:"article"},titleElement:{type:String,default:"h2"},icon:{type:String,default:null},color:{type:String,default:"darkest-gray"},src:{type:String,default:null},title:{type:String,required:!0},subtitle:{type:String,default:null},body:{type:String,default:null},to:{type:String,default:null},href:{type:String,default:null},label:{type:String,default:null},opacity:{type:String,default:"full",validator(e){return["full","half"].includes(e)}},selected:{type:Boolean,default:null},selectionMode:{type:Boolean,default:!1},options:{type:Object,default:null},disabled:{type:Boolean,default:!1}},data(){return{error:null}},computed:{wrapperTag(){return this.to?"router-link":this.href?"a":"div"},link(){return!(!this.to&&!this.href)},selectable(){return null!==this.selected},selectionIcon(){return this.selected?"check_circle":this.selectionMode&&!this.selected?"radio_button_unchecked":"check_circle"}},methods:{onImageError(e){this.error=e}},watch:{src(){this.error=null}}},le=oe,re=(i("5d03"),Object(U["a"])(le,ne,ae,!1,null,"fefa752e",null)),ce=re.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("details",{staticClass:"v-details",class:e.type,attrs:{open:e.open}},[i("summary",[e._v(e._s(e.title))]),i("div",{staticClass:"content"},[e._t("default")],2)])},ue=[],he={name:"v-details",props:{title:{type:String,default:null},open:{type:Boolean,default:!1},type:{type:String,default:"group",validator(e){return["group","break"].includes(e)}}}},pe=he,me=(i("1054"),Object(U["a"])(pe,de,ue,!1,null,"b376f3fc",null)),fe=me.exports,ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"v-table",style:{minWidth:e.totalWidth+"px"},on:{scroll:e.onScroll}},[i("div",{staticClass:"toolbar",class:{shadow:e.scrolled}},[e.manualSortField?i("div",{staticClass:"manual-sort cell",class:{active:e.manualSorting}},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("enable_manual_sorting"),expression:"$t('enable_manual_sorting')"}],on:{click:e.startManualSorting}},[i("i",{staticClass:"material-icons"},[e._v("sort")])])]):e._e(),e.selectable?i("div",{staticClass:"select cell"},[i("v-checkbox",{attrs:{id:"select-all",checked:e.allSelected,name:"select-all",value:"all"},on:{change:e.selectAll}})],1):e._e(),e._l(e.columns,function(t,s){var n=t.field,a=t.name;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[e.sortable&&"o2m"!==e.columns[s].fieldInfo.type.toLowerCase()&&"m2o"!==e.columns[s].fieldInfo.type.toLowerCase()&&"translation"!==e.columns[s].fieldInfo.type.toLowerCase()?i("button",{staticClass:"sort style-4 no-wrap",class:{active:e.sortVal.field===n},on:{click:function(t){return e.updateSort(n)}}},[e._v("\n        "+e._s(e.widths[n]>40?a:null)),e.sortVal.field===n?i("i",{staticClass:"material-icons"},[e._v(e._s(e.sortVal.asc?"arrow_upward":"arrow_downward"))]):e._e()]):i("span",{staticClass:"style-4"},[e._v(e._s(e.widths[n]>40?a:null))]),e.resizeable&&s!==e.columns.length-1?i("div",{staticClass:"drag-handle",attrs:{draggable:""},on:{drag:function(t){return e.drag(n,t)},dragstart:e.hideDragImage,dragend:e.dragEnd}},[i("div",{staticClass:"drag-handle-line"})]):e._e()])})],2),i("div",{staticClass:"body",class:{loading:e.loading,dragging:e.dragging}},[e.loading&&0===e.items.length?i("div",{staticClass:"loader"},e._l(50,function(t){return i("div",{key:t,staticClass:"row",style:{height:e.rowHeight+"px"}})}),0):e._e(),i(e.manualSorting?"draggable":"div",{tag:"component",attrs:{options:{handle:".manual-sort"}},on:{start:e.startSort,end:e.saveSort},model:{value:e.itemsManuallySorted,callback:function(t){e.itemsManuallySorted=t},expression:"itemsManuallySorted"}},[e.link?e._l(e.itemsArray,function(t){return i("div",{key:t[e.primaryKeyField],staticClass:"link row",class:{selected:e.selection&&e.selection.includes(t[e.primaryKeyField])},style:{height:e.rowHeight+"px"},attrs:{tabindex:"0",role:"link"},on:{click:function(i){return i.stopPropagation(),e.$router.push(t[e.link])},keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:(i.stopPropagation(),e.$router.push(t[e.link]))}}},[e.manualSortField?i("div",{staticClass:"manual-sort cell",class:{active:e.manualSorting},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("i",{staticClass:"material-icons"},[e._v("drag_handle")])]):e._e(),e.selectable?i("div",{staticClass:"cell select",on:{click:function(e){e.stopPropagation()}}},[i("v-checkbox",{attrs:{id:"check-"+t[e.primaryKeyField],value:t[e.primaryKeyField],checked:e.selection.includes(t[e.primaryKeyField])},on:{change:function(i){return e.toggleCheckbox(t[e.primaryKeyField])}}})],1):e._e(),e._l(e.columns,function(s){var n=s.field,a=s.fieldInfo;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[""===t[n]||e.$lodash.isNil(t[n])?i("div",{staticClass:"empty"},[e._v("\n              --\n            ")]):e.useInterfaces&&!e.$lodash.isNil(t[n])?i("v-ext-display",{attrs:{"interface-type":a.interface,name:n,type:a.type,datatype:a.datatype,options:a.options,value:t[n],relation:a.relation}}):[e._v(e._s(t[n]))]],2)})],2)}):e._l(e.itemsArray,function(t){return i("div",{key:t[e.primaryKeyField],staticClass:"row",style:{height:e.rowHeight+"px"}},[e.selectable?i("div",{staticClass:"select",on:{click:function(e){e.stopPropagation()}}},[i("v-checkbox",{attrs:{id:"check-"+t[e.primaryKeyField],value:t[e.primaryKeyField],checked:e.selection.includes(t[e.primaryKeyField])},on:{change:function(i){return e.toggleCheckbox(t[e.primaryKeyField])}}})],1):e._e(),e._l(e.columns,function(s){var n=s.field,a=s.fieldInfo;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[""===t[n]||e.$lodash.isNil(t[n])?i("div",{staticClass:"empty"},[e._v("\n              --\n            ")]):e.useInterfaces&&!e.$lodash.isNil(t[n])?i("v-ext-display",{attrs:{"interface-type":a.interface,name:n,type:a.type,options:a.options,value:t[n]}}):[e._v(e._s(t[n]))]],2)})],2)})],2)],1),i("transition",{attrs:{name:"fade"}},[e.lazyLoading?i("div",{staticClass:"lazy-loader"},[i("v-spinner",{attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1):e._e()])],1)},_e=[],ge=(i("ac6a"),i("a4bb")),ye=i.n(ge),be=i("a745"),$e=i.n(be),ke={name:"v-table",props:{loading:{type:Boolean,default:!1},lazyLoading:{type:Boolean,default:!1},items:{type:Array,required:!0},height:{type:Number,default:null},columns:{type:Array,required:!0},link:{type:String,default:null},selection:{type:Array,default:null},sortVal:{type:Object,default:null},manualSortField:{type:String,default:null},primaryKeyField:{type:String,required:!0},rowHeight:{type:Number,default:40},columnWidths:{type:Object,default:null},useInterfaces:{type:Boolean,default:!1}},data(){return{widths:{},lastDragXPosition:null,windowHeight:0,scrolled:!1,dragging:!1,manualSorting:!1,itemsManuallySorted:[]}},computed:{allSelected(){const e=this.items.map(e=>e[this.primaryKeyField]).sort(),t=[...this.selection];return t.sort(),this.selection.length>0&&this.$lodash.isEqual(e,t)},selectable(){return $e()(this.selection)},sortable(){return this.$lodash.isObject(this.sortVal)},resizeable(){return this.$lodash.isObject(this.columnWidths)},totalWidth(){return ye()(this.widths).map(e=>this.widths[e]).reduce((e,t)=>e+t,0)+30+40+(this.manualSorting?38:0)},itemsArray(){return this.manualSorting?this.itemsManuallySorted:this.items}},created(){this.initWidths(),this.manualSortField&&this.sortVal&&this.sortVal.field===this.manualSortField&&!0===this.sortVal.asc&&(this.manualSorting=!0,this.itemsManuallySorted=this.items)},watch:{columnWidths(){this.initWidths()},columns(){this.initWidths()},items(e){this.itemsManuallySorted=e}},methods:{selectAll(){if(this.allSelected)return this.$emit("select",[]);const e=this.items.map(e=>e[this.primaryKeyField]);return this.$emit("select",e)},updateSort(e,t){if(this.manualSorting=!1,t){const i={field:e,asc:"asc"===t};return this.$emit("sort",i)}const i={field:e,asc:e===this.sortVal.field?!this.sortVal.asc:"ASC"};this.$emit("sort",i)},toggleCheckbox(e){const t=[...this.selection];this.selection.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.$emit("select",t)},drag(e,t){const{screenX:i}=t;if(0!==i&&this.lastDragXPosition){const t=i-this.lastDragXPosition,s=this.widths[e]+t;this.widths[e]=s}this.lastDragXPosition=i},dragEnd(){this.lastDragXPosition=0,this.$emit("widths",this.widths)},hideDragImage(e){const t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.effectAllowed="move"},initWidths(){const e={};this.columns.forEach(({field:t})=>{e[t]=this.columnWidths&&this.columnWidths[t]||200}),this.widths=e},onScroll(e){const{scrollHeight:t,clientHeight:i,scrollTop:s}=e.srcElement,n=t-i,a=n-s;a<=500&&this.$emit("scroll-end"),this.scrolled=s>0},startManualSorting(){this.manualSorting?this.manualSorting=!1:(this.updateSort(this.manualSortField,"asc"),this.manualSorting=!0)},startSort(){this.dragging=!0},saveSort(){return this.dragging=!1,this.itemsManuallySorted.some(e=>null==e[this.manualSortField])?this.$emit("input",this.itemsManuallySorted.map((e,t)=>({[this.primaryKeyField]:e[this.primaryKeyField],[this.manualSortField]:t+1}))):this.$emit("input",this.itemsManuallySorted.map((e,t)=>({[this.primaryKeyField]:e[this.primaryKeyField],[this.manualSortField]:this.items[t][this.manualSortField]})))}}},we=ke,Ce=(i("c575"),Object(U["a"])(we,ve,_e,!1,null,"db93b9ba",null)),xe=Ce.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-input",attrs:{name:e.name,id:e.name,"input-name":e.id,value:e.value,type:e.typeOrDefault,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.optionsWithDefaults,"new-item":e.newItem,relation:e.relation,fields:e.fields,values:e.values},on:{input:function(t){return e.$emit("input",t)},setfield:function(t){return e.$emit("setfield",t)}}},[e._t("default")],2)},Se=[],Me=i("795b"),Ee=i.n(Me);function Te(e){return new Ee.a((t,i)=>{const s=document.createElement("script"),n=document.createElement("link");function a(){s.remove(),window.__DirectusExtension__=null}function o(){const e=window.__DirectusExtension__;t(e),a()}function l(e){i(e),a()}n.rel="stylesheet",n.href=e.slice(0,-2)+"css",n.onerror=function(){this.remove()},s.onload=o,s.onerror=l,s.src=e,document.body.appendChild(s),document.body.appendChild(n)})}function Ne(e){return b["default"].options.components[e]&&ye()(b["default"].options.components[e]).length>0}var Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-input",{staticClass:"v-ext-input-fallback",attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},Oe=[],qe={name:"v-ext-input-fallback",props:{value:{type:null,default:""},inputName:{type:String,default:""},name:{type:String,default:""}},created(){null==this.inputName?this.$notify({title:this.$t("no_interface_error",{field:this.$helpers.formatTitle(this.name)}),color:"red",iconMain:"error"}):this.$notify({title:this.$t("extension_error",{ext:this.inputName}),color:"red",iconMain:"error"})}},je=qe,Ae=(i("c761"),Object(U["a"])(je,Fe,Oe,!1,null,"13f17fc2",null)),De=Ae.exports,Be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-spinner",{staticClass:"v-ext-input-loading",attrs:{size:"20","line-fg-color":"var(--lighter-gray)","line-bg-color":"var(--lightest-gray)"}})},Pe=[],Le={name:"v-ext-input-loading"},Re=Le,Ve=(i("6426"),Object(U["a"])(Re,Be,Pe,!1,null,"c4817e4a",null)),Ue=Ve.exports,Ke=i("a925"),ze=i("1271");b["default"].use(Ke["a"]);const We=new Ke["a"]({locale:"en-US",fallbackLocale:"en-US",messages:{"en-US":ze["default"]},dateTimeFormats:{"en-US":ze["dateTimeFormats"]},silentTranslationWarn:!0}),He=["en-US"];function Ge(e){return We.locale=e,document.querySelector("html").setAttribute("lang",e),e}function Qe(e){return We.locale!==e?He.includes(e)?Ee.a.resolve(Ge(e)):i("8701")(`./${e}`).then(t=>{return We.setLocaleMessage(e,t.default),We.setDateTimeFormat(e,t.dateTimeFormats),He.push(e),Ge(e)}):Ee.a.resolve(e)}const Xe={"zh-CN":"Chinese (Simplified)","cs-CZ":"Czech (Czech Republic)","nl-NL":"Dutch (Netherlands)","en-US":"English (United States)","fr-FR":"French (France)","de-DE":"German (Germany)","pt-BR":"Portuguese (Brazil)","it-IT":"Italian (Italy)"};We.availableLanguages=Xe;const Ye={mysql:{CHAR:{length:!0,defaultLength:50,maxLength:255,description:We.t("datatypes.mysql.CHAR"),fallbackInterface:"text-input"},VARCHAR:{length:!0,defaultLength:255,maxLength:65535,description:We.t("datatypes.mysql.VARCHAR"),fallbackInterface:"text-input"},TINYTEXT:{description:We.t("datatypes.mysql.TINYTEXT"),fallbackInterface:"textarea"},TEXT:{description:We.t("datatypes.mysql.TEXT"),fallbackInterface:"textarea"},MEDIUMTEXT:{description:We.t("datatypes.mysql.MEDIUMTEXT"),fallbackInterface:"textarea"},LONGTEXT:{description:We.t("datatypes.mysql.LONGTEXT"),fallbackInterface:"textarea"},TINYINT:{description:We.t("datatypes.mysql.TINYINT"),fallbackInterface:"toggle"},SMALLINT:{description:We.t("datatypes.mysql.SMALLINT"),fallbackInterface:"numeric"},MEDIUMINT:{description:We.t("datatypes.mysql.MEDIUMINT"),fallbackInterface:"numeric"},INT:{description:We.t("datatypes.mysql.INT"),fallbackInterface:"numeric"},BIGINT:{description:We.t("datatypes.mysql.BIGINT"),fallbackInterface:"numeric"},DECIMAL:{decimal:!0,description:We.t("datatypes.mysql.DECIMAL"),defaultDigits:10,maxDigits:65,defaultDecimals:10,maxDecimals:30,fallbackInterface:"numeric"},FLOAT:{decimal:!0,description:We.t("datatypes.mysql.FLOAT"),defaultDigits:10,defaultDecimals:10,fallbackInterface:"numeric"},DOUBLE:{decimal:!0,description:We.t("datatypes.mysql.DOUBLE"),defaultDigits:10,defaultDecimals:10,fallbackInterface:"numeric"},DATE:{description:We.t("datatypes.mysql.DATE"),fallbackInterface:"date"},DATETIME:{description:We.t("datatypes.mysql.DATETIME"),fallbackInterface:"datetime"},TIME:{description:We.t("datatypes.mysql.TIME"),fallbackInterface:"time"},TIMESTAMP:{description:We.t("datatypes.mysql.TIMESTAMP"),fallbackInterface:"time"},YEAR:{description:We.t("datatypes.mysql.YEAR"),fallbackInterface:"numeric"}}};var Ze={alias:{description:We.t("fieldtypes.alias"),mysql:{datatypes:null,default:null}},array:{description:We.t("fieldtypes.array"),mysql:{datatypes:["VARCHAR"],default:"VARCHAR"}},boolean:{description:We.t("fieldtypes.boolean"),mysql:{datatypes:["TINYINT"],default:"TINYINT"}},date:{description:We.t("fieldtypes.date"),mysql:{datatypes:["DATE"],default:"DATE"}},datetime:{description:We.t("fieldtypes.datetime"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},datetime_created:{description:We.t("fieldtypes.datetime_created"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},datetime_updated:{description:We.t("fieldtypes.datetime_updated"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},decimal:{description:We.t("fieldtypes.decimal"),mysql:{datatypes:["DECIMAL","FLOAT","DOUBLE"],default:"DECIMAL"}},time:{description:We.t("fieldtypes.time"),mysql:{datatypes:["TIME"],default:"TIME"}},file:{description:We.t("fieldtypes.file"),mysql:{datatypes:["INT"],default:"INT"}},group:{description:We.t("fieldtypes.group"),mysql:{datatypes:null,default:null}},integer:{description:We.t("fieldtypes.integer"),mysql:{datatypes:["TINYINT","SMALLINT","MEDIUMINT","INT","BIGINT"],default:"INT"}},json:{description:We.t("fieldtypes.json"),mysql:{datatypes:["VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT"],default:"TEXT"}},lang:{description:We.t("fieldtypes.lang"),mysql:{datatypes:["CHAR","VARCHAR"],default:"CHAR"}},m2o:{description:We.t("fieldtypes.m2o"),mysql:{datatypes:["CHAR","VARCHAR","INT"],default:"INT"}},o2m:{description:We.t("fieldtypes.o2m"),mysql:{datatypes:null,default:null}},sort:{description:We.t("fieldtypes.sort"),mysql:{datatypes:["TINYINT","SMALLINT","MEDIUMINT","INT","BIGINT"],default:"INT"}},status:{description:We.t("fieldtypes.status"),mysql:{datatypes:["CHAR","VARCHAR","INT"],default:"VARCHAR"}},string:{description:We.t("fieldtypes.string"),mysql:{datatypes:["CHAR","VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT"],default:"VARCHAR"}},translation:{description:We.t("fieldtypes.translation"),mysql:{datatypes:null,default:null}},uuid:{description:We.t("fieldtypes.uuid"),mysql:{datatypes:["VARCHAR"],default:"VARCHAR"}},user_created:{description:We.t("fieldtypes.user_created"),mysql:{datatypes:["INT"],default:"INT"}},user_updated:{description:We.t("fieldtypes.user_updated"),mysql:{datatypes:["INT"],default:"INT"}}},Je={name:"v-ext-input",props:{id:{type:String,default:null},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,default:null},datatype:{type:String,default:null},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null}},computed:{interfaces(){return this.$store.state.extensions.interfaces},interface(){return null===this.id?this.interfaceFallback:this.interfaces&&this.interfaces[this.id]},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},componentName(){return null===this.id?this.componentNameFallback:`input-${this.id}`},typeOrDefault(){return this.interface?this.type?this.type:this.interface&&this.interface.types[0]:null},optionsWithDefaults(){if(!this.interface)return{};const e=this.$lodash.mapValues(this.interface.options,e=>e.default||null);return{...e,...this.options}},componentNameFallback(){return`input-${this.interfaceFallback.id}`},interfaceFallback(){if(null==this.datatype)return this.interfaces["text-input"];const e=Ye[this.databaseVendor][this.datatype].fallbackInterface;return this.interfaces[e]}},watch:{id(){this.registerInterface()}},created(){this.registerInterface()},methods:{registerInterface(){if(Ne(this.componentName))return;const e=`${this.$api.url}/${this.interface.path.replace("meta.json","input.js")}`;b["default"].component(this.componentName,()=>({component:Te(e),error:De,loading:Ue}))}}},et=Je,tt=Object(U["a"])(et,Ie,Se,!1,null,null,null),it=tt.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-display",attrs:{name:e.name,value:e.value,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.optionsWithDefaults}})},nt=[],at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-ext-display-fallback"},[e._v(e._s(e.value))])},ot=[],lt={name:"v-ext-display-fallback",props:{value:{type:null,default:""}}},rt=lt,ct=Object(U["a"])(rt,at,ot,!1,null,null,null),dt=ct.exports,ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-spinner",{staticClass:"v-ext-display-loading",attrs:{size:"20","line-fg-color":"var(--lighter-gray)","line-bg-color":"var(--lightest-gray)"}})},ht=[],pt={name:"v-ext-display-loading"},mt=pt,ft=(i("1a11"),Object(U["a"])(mt,ut,ht,!1,null,"3d628623",null)),vt=ft.exports,_t={name:"v-ext-display",props:{interfaceType:{type:String,default:"text-input"},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,default:null},datatype:{type:String,default:null},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},components:{VExtDisplayFallback:dt},computed:{interfaces(){return this.$store.state.extensions.interfaces},interfaceInfo(){return null===this.interfaceType?this.interfaceFallback:this.interfaces&&this.interfaces[this.interfaceType]},componentName(){return null===this.interfaceType?this.componentNameFallback:`display-${this.interfaceType}`},componentNameFallback(){return`display-${this.interfaceFallback.id}`},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},interfaceFallback(){if(null==this.datatype)return this.interfaces["text-input"];const e=Ye[this.databaseVendor][this.datatype].fallbackInterface;return this.interfaces[e]},optionsWithDefaults(){if(!this.interfaceInfo)return{};const e=this.$lodash.mapValues(this.interfaceInfo.options,e=>e.default||null);return{...e,...this.options}}},watch:{id(){this.registerDisplay()}},created(){this.registerDisplay()},methods:{registerDisplay(){if(Ne(this.componentName))return;const e=`${this.$api.url}/${this.interfaceInfo.path.replace("meta.json","display.js")}`;b["default"].component(this.componentName,()=>({component:Te(e),error:dt,loading:vt}))}}},gt=_t,yt=Object(U["a"])(gt,st,nt,!1,null,null,null),bt=yt.exports,$t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-layout",attrs:{"layout-name":e.viewType,"primary-key-field":e.primaryKeyField,fields:e.fields,items:e.items,"view-options":e.viewOptions,"view-query":e.viewQuery,loading:e.loading,"lazy-loading":e.lazyLoading,selection:e.selection,link:e.link,"sort-field":e.sortField},on:{query:function(t){return e.$emit("query",t)},select:function(t){return e.$emit("select",t)},options:function(t){return e.$emit("options",t)},"next-page":function(t){return e.$emit("next-page",t)},input:function(t){return e.$emit("input",t)}}})},kt=[],wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items&&e.columns&&e.primaryKeyField?i("v-table",{staticClass:"v-ext-layout-fallback",attrs:{items:e.items,columns:e.columns,primaryKeyField:e.primaryKeyField,"use-interfaces":!0,link:"__link__"}}):e._e()},Ct=[],xt=i("db0c"),It=i.n(xt),St={name:"v-ext-layout-fallback",props:{fields:{type:Object,required:!0},items:{type:Array,required:!0},primaryKeyField:{type:String,required:!0},layoutName:{type:String,default:""}},computed:{columns(){return It()(this.fields).map(e=>{return{field:e.field,name:e.name,fieldInfo:e}})}},created(){this.$notify({title:this.$t("extension_error",{ext:this.layoutName}),color:"red",iconMain:"error"})}},Mt=St,Et=Object(U["a"])(Mt,wt,Ct,!1,null,null,null),Tt=Et.exports,Nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-layout-loading"},[i("v-spinner",{staticClass:"spinner",attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1)},Ft=[],Ot={name:"v-layout-loading"},qt=Ot,jt=Object(U["a"])(qt,Nt,Ft,!1,null,null,null),At=jt.exports,Dt={name:"v-layout",props:{fields:{type:Object,required:!0},items:{type:Array,required:!0},viewType:{type:String,required:!0},viewOptions:{type:Object,default:()=>({})},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},lazyLoading:{type:Boolean,default:!1},link:{type:String,default:null},sortField:{type:String,default:null}},computed:{layouts(){return this.$store.state.extensions.layouts},layout(){return this.layouts&&this.layouts[this.viewType]},componentName(){return`layout-${this.viewType}`},primaryKeyField(){const e=this.$lodash.filter(this.fields,e=>!0===e.primary_key)[0];return e&&e.field}},watch:{viewType(){this.registerLayout()}},created(){this.registerLayout()},methods:{registerLayout(){if(Ne(this.componentName))return;if(!this.layout)return void b["default"].component(this.componentName,Tt);const e=`${this.$api.url}/${this.layout.path.replace("meta.json","layout.js")}`;b["default"].component(this.componentName,()=>({component:Te(e),error:Tt,loading:At}))}}},Bt=Dt,Pt=Object(U["a"])(Bt,$t,kt,!1,null,null,null),Lt=Pt.exports,Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-layout-options",attrs:{"primary-key-field":e.primaryKeyField,fields:e.fields,"view-options":e.viewOptions,loading:e.loading,"view-query":e.viewQuery,selection:e.selection,"layout-name":e.type},on:{query:function(t){return e.$emit("query",t)},select:function(t){return e.$emit("select",t)},options:function(t){return e.$emit("options",t)}}})},Vt=[],Ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-ext-layout-options-fallback"})},Kt=[],zt={name:"v-ext-layout-options-fallback",props:{layoutName:{type:String,default:""}},created(){this.$notify({title:this.$t("extension_error",{ext:this.layoutName}),color:"red",iconMain:"error"})}},Wt=zt,Ht=Object(U["a"])(Wt,Ut,Kt,!1,null,null,null),Gt=Ht.exports,Qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-listing-options-loading"})},Xt=[],Yt={name:"v-listing-options-loading"},Zt=Yt,Jt=Object(U["a"])(Zt,Qt,Xt,!1,null,null,null),ei=Jt.exports,ti={name:"v-ext-layout-options",props:{type:{type:String,required:!0},fields:{type:Object,required:!0},viewOptions:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:()=>[]}},computed:{layouts(){return this.$store.state.extensions.layouts},layout(){return this.layouts&&this.layouts[this.type]},componentName(){return`layout-options-${this.type}`},primaryKeyField(){if(!this.fields)return null;const e=this.$lodash.find(this.fields,{primary_key:!0});return e?e.field:null}},watch:{type(){this.registerLayoutOptions()}},created(){this.registerLayoutOptions()},methods:{registerLayoutOptions(){if(Ne(this.componentName))return;if(!this.layout)return void b["default"].component(this.componentName,Gt);const e=`${this.$api.url}/${this.layout.path.replace("meta.json","options.js")}`;b["default"].component(this.componentName,()=>({component:Te(e),error:Gt,loading:ei}))}}},ii=ti,si=Object(U["a"])(ii,Rt,Vt,!1,null,null,null),ni=si.exports,ai=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component"},[e._t("default")],2)},oi=[],li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},ri=[],ci={name:"v-ext-page-fallback",created(){this.$notify({title:this.$t("extension_error",{ext:this.interfaceName}),color:"red",iconMain:"error"})}},di=ci,ui=Object(U["a"])(di,li,ri,!1,null,null,null),hi=ui.exports,pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-loading"},[e._v("LOADING")])},mi=[],fi={name:"page-loading"},vi=fi,_i=Object(U["a"])(vi,pi,mi,!1,null,null,null),gi=_i.exports,yi={name:"v-ext-page",props:{id:{type:String,required:!0}},computed:{pages(){return this.$store.state.extensions.pages},page(){return this.pages&&this.pages[this.id]},componentName(){return`page-${this.id}`}},watch:{id(){this.registerPage()}},created(){this.registerPage()},methods:{registerPage(){if(Ne(this.componentName))return;if(!this.page)return void b["default"].component(this.componentName,hi);const e=`${this.$api.url}/${this.page.path.replace("meta.json","page.js")}`;b["default"].component(this.componentName,()=>({component:Te(e),error:hi,loading:gi}))}}},bi=yi,$i=Object(U["a"])(bi,ai,oi,!1,null,null,null),ki=$i.exports,wi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items.error?i("v-error",{attrs:{icon:"warning",color:"danger",title:e.$t("server_error"),body:e.$t("server_error_copy")}}):e.items.fields&&0===Object.keys(e.items.fields).length?i("v-error",{attrs:{icon:"build",title:e.$t("no_fields"),body:e.$t("no_fields_body")}}):"directus_files"===e.collection&&e.items.meta&&0===e.items.meta.total_count?i("v-error",{attrs:{icon:"image",title:e.$t("no_files"),body:e.$t("no_files_body")}}):e.items.meta&&0===e.items.meta.total_count?i("v-error",{attrs:{icon:"web_asset",title:e.$t("empty_collection"),body:e.$t("empty_collection_body")}}):e.items.data&&0===e.items.data.length&&e.items.meta&&0!==e.items.meta.total_count?i("v-error",{attrs:{title:e.$t("no_results"),body:e.$t("no_results_body"),icon:"search"}}):i("v-ext-layout",{attrs:{fields:e.fields,items:e.items.data||[],"view-type":e.viewType,"view-query":e.viewQuery,"view-options":e.viewOptions,selection:e.selectionKeys,loading:e.items.loading,"lazy-loading":e.items.lazyLoading,link:e.links?"__link__":null,"sort-field":e.sortField},on:{input:e.saveItems,select:e.select,query:function(t){return e.$emit("query",t)},options:function(t){return e.$emit("options",t)},"next-page":e.lazyLoad}})},Ci=[],xi=i("5176"),Ii=i.n(xi);function Si(e){const t={};return e.forEach(e=>{t[`filter[${e.field}][${e.operator}]`]=e.value}),t}var Mi={name:"v-items",props:{collection:{type:String,required:!0},filters:{type:Array,default:()=>[]},searchQuery:{type:String,default:""},viewType:{type:String,default:"tabular"},viewOptions:{type:Object,default:()=>({})},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:null},links:{type:Boolean,default:!1}},data(){return{items:{meta:null,data:null,loading:!1,error:null,page:0,lazyLoading:!1}}},computed:{allSelected(){const e=this.items.data.map(e=>e[this.primaryKeyField]).sort(),t=[...this.selection];return t.sort(),this.selection.length>0&&this.$lodash.isEqual(e,t)},primaryKeyField(){if(this.fields)return this.$lodash.find(It()(this.fields),{primary_key:!0}).field},sortField(){const e=this.$lodash.find(this.fields,{type:"sort"});return e&&e.field||null},statusField(){const e=this.$lodash.find(this.fields,{type:"status"});return e&&e.field||null},userCreatedField(){return this.fields?(this.$lodash.find(It()(this.fields),e=>e.type&&"user_created"===e.type.toLowerCase())||{}).field:null},fields(){const e=this.$store.state.collections[this.collection].fields;return this.$lodash.mapValues(e,e=>({...e,name:this.$helpers.formatTitle(e.field)}))||{}},selectionKeys(){return this.selection?this.$lodash.uniq(this.selection.map(e=>e[this.primaryKeyField])):null}},created(){this.hydrate()},watch:{collection(e,t){this.$lodash.isEqual(e,t)||this.hydrate()},viewQuery:{deep:!0,handler(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},filters:{deep:!0,handler(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},searchQuery(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},mounted(){this.$helpers.mousetrap.bind("mod+a",()=>{return this.selectAll(),!1})},beforeDestroy(){this.$helpers.mousetrap.unbind("mod+a")},methods:{hydrate(){this.items.loading||(this.items.data=null,this.items.loading=!1,this.items.error=null,this.getItems())},selectAll(){return this.allSelected?this.$emit("select",[]):this.$emit("select",this.items.data)},getItems(){if(this.items.loading)return;this.items.loading=!0,this.items.error=null,this.items.page=0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),this.$api.getItems(this.collection,this.formatParams()).then(t=>{this.items.loading=!1,this.items.meta=t.meta,this.$store.dispatch("loadingFinished",e),this.links?this.items.data=t.data.map(e=>({...e,__link__:this.collection.startsWith("directus_")?`/${this.collection.substr(9)}/${e[this.primaryKeyField]}`:`/collections/${this.collection}/${e[this.primaryKeyField]}`})):this.items.data=t.data,this.$emit("fetch",t.meta)}).catch(t=>{console.error(t),this.$store.dispatch("loadingFinished",e),this.items.loading=!1,this.items.error=t})},select(e){this.$emit("select",e.map(e=>{return this.$lodash.find(this.items.data,{[this.primaryKeyField]:e})||this.$lodash.find(this.selection,{[this.primaryKeyField]:e})}))},saveItems(e){if(!e)return;const t=this.primaryKeyField,i=this.$helpers.shortid.generate();if(this.$store.dispatch("loadingStart",{id:i}),$e()(e)){const s=[],n=[];return e.forEach(e=>{e[t]&&null!=e[t]?s.push(e):n.push(e)}),Ee.a.all([s.length>0?this.$api.updateItems(this.collection,s):null,n.length>0?this.$api.createItems(this.collection,n):null]).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}return e[t]&&null!=e[t]?this.$api.updateItem(this.collection,e[t],e).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})}):this.$api.createItem(this.collection,e).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},lazyLoad(){if(!this.items.lazyLoading&&!(this.items.meta.total_count===this.items.data.length||50*this.items.page>this.items.data.length))return this.items.lazyLoading=!0,this.items.error=null,this.items.page=this.items.page+1,this.$api.getItems(this.collection,this.formatParams()).then(e=>{e.data.length<50&&(this.items.page=this.items.page+1),this.items.lazyLoading=!1,this.links?this.items.data=[...this.items.data,...e.data.map(e=>({...e,__link__:this.collection.startsWith("directus_")?`/${this.collection.substr(9)}/${e[this.primaryKeyField]}`:`/collections/${this.collection}/${e[this.primaryKeyField]}`}))]:this.items.data=[...this.items.data,...e.data],this.$emit("fetch",e.meta)}).catch(e=>{console.error(e),this.items.lazyLoading=!1,this.items.error=e})},formatParams(){let e={meta:"total_count,result_count",limit:50,offset:50*this.items.page};return Ii()(e,this.viewQuery),e.fields="*.*.*",this.searchQuery&&(e.q=this.searchQuery),this.filters&&this.filters.length>0&&(e={...e,...Si(this.filters)}),e}}},Ei=Mi,Ti=Object(U["a"])(Ei,wi,Ci,!1,null,null,null),Ni=Ti.exports,Fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return 0===e.groupedFields.length?i("v-error",{attrs:{title:e.$t("no_fields"),body:e.$t("no_fields_body"),icon:"error_outline"}}):i("form",{staticClass:"v-form flex-group",on:{submit:function(e){e.preventDefault()}}},e._l(e.groupedFields,function(t){return i("div",{key:t.field,class:[e.isGroup(t)?null:"col-"+(t.width||4),e.isGroup(t)?"group":"field"]},[e.isGroup(t)?i("v-group",{attrs:{values:e.values,field:t,readonly:e.readonly,"batch-mode":e.batchMode,"active-fields":e.activeFields,"new-item":e.newItem},on:{activate:e.activateField,deactivate:e.deactivateField,"stage-value":function(t){return e.$emit("stage-value",t)}}}):i("v-field",{attrs:{name:e.uniqueID+"-"+t.field,field:t,values:e.values,fields:e.fields,readonly:e.isReadonly(t),blocked:e.batchMode&&!e.activeFields.includes(t.field),"batch-mode":e.batchMode,"new-item":e.newItem},on:{activate:e.activateField,deactivate:e.deactivateField,"stage-value":function(t){return e.$emit("stage-value",t)}}})],1)}),0)},Oi=[],qi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-field"},[i(e.fieldset?"fieldset":"p",{tag:"component"},[i("div",[i("div",{staticClass:"heading"},[!1===e.hideLabel?[i("div",{staticClass:"label"},[i(e.fieldset?"legend":"label",{tag:"component",attrs:{for:e.field.field}},[e._v("\n              "+e._s(e.field.name||e.$helpers.formatTitle(e.field.field))),!0===e.field.required||"1"===e.field.required?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons"},[e._v("star")]):e._e()]),e.batchMode?i("label",{staticClass:"batch-label"},[i("v-toggle",{attrs:{value:!e.blocked},on:{input:function(t){return e.$emit(e.blocked?"activate":"deactivate",e.field.field)}}})],1):e._e()],1)]:e._e(),!e.readonly&&e.field.note?i("small",{domProps:{innerHTML:e._s(e.$helpers.snarkdown(e.field.note))}}):e._e()],2),i("div",{staticClass:"field-wrapper"},[i("v-ext-input",{attrs:{id:e.field.interface||"text-input",name:e.name,required:!0===e.field.required||"1"===e.field.required,readonly:e.readonly||e.blocked,options:e.field.options,type:e.field.type,datatype:e.field.datatype,value:e.values[e.field.field],relation:e.relation,fields:e.fields,values:e.values,length:e.field.length,"new-item":e.newItem},on:{input:function(t){!e.readonly&&e.$emit("stage-value",{field:e.field.field,value:t})},setfield:function(t){!e.readonly&&e.$emit("stage-value",{field:t.field,value:t.value})}}}),e.blocked?i("div",{staticClass:"blocker",on:{click:function(t){return e.$emit("activate",e.field.field)}}}):e._e()],1)])])],1)},ji=[],Ai={name:"v-field",props:{field:{type:Object,required:!0},values:{type:Object,required:!0},readonly:{type:Boolean,default:!1},blocked:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},fields:{type:Object,required:!0},newItem:{type:Boolean,default:!1},name:{type:String,required:!0}},computed:{fieldset(){const e=this.$store.state.extensions.interfaces[this.field.interface];return e&&e.fieldset||!1},hideLabel(){const e=this.field.interface,t=this.$store.state.extensions.interfaces[e];return!!t&&(!(!t||!t.hideLabel)&&t.hideLabel)},relation(){const{collection:e,field:t,type:i}=this.field;return"m2o"===i.toLowerCase()?this.$store.getters.m2o(e,t):"o2m"===i.toLowerCase()?this.$store.getters.o2m(e,t):"translation"===i.toLowerCase()?this.$store.getters.o2m(e,t):null}}},Di=Ai,Bi=(i("4fa1"),Object(U["a"])(Di,qi,ji,!1,null,"d8a3c3ee",null)),Pi=Bi.exports,Li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-ext-input",{staticClass:"v-group",attrs:{id:e.field.field,name:e.field.field,options:e.field.options,type:e.field.type}},[i("div",{staticClass:"flex-group"},e._l(e.field.children,function(t){return i("div",{key:t.field,class:[e.isGroup(t)?null:"col-"+t.width,e.isGroup(t)?"group":"field"]},[e.isGroup(t)?i("v-group",{attrs:{values:e.values,field:t,"new-item":e.newItem},on:{"stage-value":function(t){return e.$emit("stageValue",t)}}}):i("v-field",{attrs:{readonly:e.readonly,values:e.values,field:t,blocked:e.batchMode&&!e.activeFields.includes(e.field.field),"batch-mode":e.batchMode,"new-item":e.newItem},on:{activate:function(t){return e.$emit("activate",t)},deactivate:function(t){return e.$emit("deactivate",t)},"stage-value":function(t){return e.$emit("stageValue",t)}}})],1)}),0)])},Ri=[],Vi={name:"v-group",components:{VField:Pi},props:{values:{type:Object,required:!0},field:{type:Object,required:!0},readonly:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},activeFields:{type:Array,default:()=>[]}},methods:{isGroup(e){return e.children&&$e()(e.children)}}},Ui=Vi,Ki=Object(U["a"])(Ui,Li,Ri,!1,null,null,null),zi=Ki.exports,Wi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"error"}},[i("div",{staticClass:"v-error"},[i("i",{staticClass:"material-icons",class:e.color},[e._v(e._s(e.icon))]),i("h2",{staticClass:"style-1"},[e._v(e._s(e.title))]),i("p",[e._v(e._s(e.body))])])])},Hi=[],Gi={name:"v-error",props:{color:{type:String,default:"accent",validator(e){return["accent","secondary","success","warning","danger"].includes(e)}},icon:{type:String,required:!0},title:{type:String,required:!0},body:{type:String,required:!0}}},Qi=Gi,Xi=(i("e706"),Object(U["a"])(Qi,Wi,Hi,!1,null,"16c52c5c",null)),Yi=Xi.exports;const Zi={create:"none",read:"none",update:"none",delete:"none",comment:"none",explain:"none",status_blacklist:[],read_field_blacklist:[],write_field_blacklist:[]},Ji={create:"full",read:"full",update:"full",delete:"full",comment:"full",explain:"full",status_blacklist:[],read_field_blacklist:[],write_field_blacklist:[]};var es={name:"v-form",components:{VField:Pi,VGroup:zi,VError:Yi},props:{fields:{type:Object,required:!0},values:{type:Object,required:!0},readonly:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},permissions:{type:Object,default:()=>Ji},newItem:{type:Boolean,default:!1}},data(){return{activeFields:[],uniqueID:""}},computed:{collection(){return It()(this.fields)[0].collection},groupedFields(){const e=It()(this.fields).filter(e=>!1===this.permissions.read_field_blacklist.includes(e.field)),t=e.filter(e=>e.type&&"group"===e.type.toLowerCase()).map(e=>({...e,children:[]})),i=e.filter(e=>e.type&&"group"!==e.type.toLowerCase());return i.forEach(e=>{if(null!=e.group){const i=this.$lodash.findIndex(t,t=>t.id===e.group);return t[i].children.push(e)}return t.push(e)}),t.filter(e=>!1===e.hidden_detail||"0"==e.hidden_detail).sort((e,t)=>{return e.sort==t.sort?0:null===e.sort?1:null===t.sort?-1:e.sort>t.sort?1:-1})}},methods:{isGroup(e){return e.children&&$e()(e.children)},activateField(e){this.batchMode&&(this.activeFields=[...this.activeFields,e])},deactivateField(e){this.batchMode&&(this.activeFields=this.activeFields.filter(t=>t!==e),this.$emit("unstage-value",e))},isReadonly(e){return!!this.readonly||(!0===e.readonly||"1"===e.readonly||1===e.readonly||!!this.permissions.write_field_blacklist.includes(e.field))}},created(){this.uniqueID=this.$helpers.shortid.generate()}},ts=es,is=(i("cae2"),Object(U["a"])(ts,Fi,Oi,!1,null,null,null)),ss=is.exports,ns=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"form-button style-btn",class:[e.bg||"no-bg",{fullwidth:e.fullwidth,loading:e.loading},e.color],attrs:{type:e.type,disabled:e.disabled||e.loading},on:{click:function(t){return e.$emit("click")}}},[e.icon&&!e.loading?i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]):e._e(),e.loading?i("v-spinner",{staticClass:"spinner",attrs:{"line-size":2,size:"13","line-foreground-color":"#fff","line-background-color":"var(--darkest-gray)"}}):e._e(),e._t("default")],2)},as=[],os={name:"v-button",props:{fullwidth:{type:Boolean,default:!1},icon:{type:String,default:""},type:{type:String,default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},color:{type:String,default:"white",validator:e=>["white","black"].includes(e)},bg:{type:String,default:"action",validator:e=>["action","secondary","warning","danger"].includes(e)}}},ls=os,rs=(i("f01b"),Object(U["a"])(ls,ns,as,!1,null,"6eb092c3",null)),cs=rs.exports,ds=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"form-checkbox"},[i("input",{attrs:{id:e.id,type:"checkbox"},domProps:{checked:e.shouldBeChecked,value:e.value},on:{change:e.updateInput}}),i("label",{staticClass:"no-wrap",attrs:{for:e.id}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.shouldBeChecked?"check_box":"check_box_outline_blank"))]),e._v("\n    "+e._s(e.label)+"\n  ")])])},us=[],hs={name:"form-checkbox",model:{prop:"modelValue",event:"change"},props:{id:{type:String,default:""},value:{type:[String,Number],required:!0},modelValue:{type:null,default:!1},label:{type:String,default:""},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},checked:{type:Boolean,default:!1}},computed:{shouldBeChecked(){return $e()(this.modelValue)?this.modelValue.includes(this.value):this.modelValue===this.trueValue||!0===this.checked}},methods:{updateInput(e){const t=e.target.checked;if($e()(this.modelValue)){const e=[...this.modelValue];t?e.push(this.value):e.splice(e.indexOf(this.value),1),this.$emit("change",e)}else this.$emit("change",t?this.trueValue:this.falseValue)}}},ps=hs,ms=(i("ae68"),Object(U["a"])(ps,ds,us,!1,null,"45eca1a5",null)),fs=ms.exports,vs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-input",class:{"icon-left":e.iconLeft,"icon-right":e.iconRight}},[i("input",{ref:"input",class:{charactercount:e.charactercount},attrs:{type:e.type,autocomplete:e.autocomplete,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,name:e.name,placeholder:e.placeholder,required:e.required,readonly:e.readonly||e.disabled,spellcheck:e.spellcheck,id:e.id,step:e.step},domProps:{value:e.value},on:{keyup:function(t){return e.$emit("keyup",t)},keydown:function(t){return e.$emit("keydown",t)},input:function(t){return e.$emit("input",t.target.value)}}}),e.iconLeft?i("i",{staticClass:"material-icons",class:e.iconLeftColor},[e._v(e._s(e.iconLeft))]):e._e(),e.iconRight?i("i",{staticClass:"material-icons",class:e.iconRightColor},[e._v(e._s(e.iconRight))]):e._e(),e.charactercount?i("span",[e._v(e._s(e.charsRemaining))]):e._e()])},_s=[],gs={name:"v-input",props:{type:{type:String,default:"text"},autocomplete:{type:String,default:"on"},autofocus:{type:Boolean,default:!1},max:{type:[Number,Boolean,String],default:null},maxlength:{type:[Number,Boolean,String],default:null},min:{type:[Number,Boolean,String],default:null},minlength:{type:[Number,Boolean,String],default:null},name:{type:String,default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!0},id:{type:String,default:""},value:{type:null,default:""},step:{type:[String,Number],default:1},iconLeft:{type:String,default:""},iconLeftColor:{type:String,default:null},iconRight:{type:String,default:""},iconRightColor:{type:String,default:null},valid:{type:Boolean,default:!0},charactercount:{type:Boolean,default:!1}},computed:{charsRemaining(){return this.maxlength?this.maxlength-this.value.length:null}},mounted(){this.autofocus&&this.$refs.input.focus()}},ys=gs,bs=(i("f82d"),Object(U["a"])(ys,vs,_s,!1,null,"09a1f2ca",null)),$s=bs.exports,ks=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-radio"},[i("input",{attrs:{id:e.id,name:e.name,disabled:e.disabled,type:"radio"},domProps:{checked:e.shouldBeChecked,value:e.value},on:{change:e.updateInput}}),i("label",{attrs:{for:e.id}},[e._v(e._s(e.label))])])},ws=[],Cs={model:{prop:"modelValue",event:"change"},props:{name:{type:String,required:!0},id:{type:String,required:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:String,required:!0},modelValue:{type:String,default:""},label:{type:String,required:!0}},computed:{shouldBeChecked(){return this.modelValue===this.value}},methods:{updateInput(){this.$emit("change",this.value)}}},xs=Cs,Is=(i("20da"),Object(U["a"])(xs,ks,ws,!1,null,"052b9229",null)),Ss=Is.exports,Ms=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-select",class:{icon:e.icon}},[e.other?i("select",{attrs:{disabled:e.disabled||e.readonly,id:e.otherActive?null:e.id},domProps:{value:e.value},on:{change:function(t){return e.change(t.target.value)}}},[i("optgroup",{attrs:{label:e.$t("values")}},e._l(e.parsedOptions,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])}),0),i("optgroup",{attrs:{label:e.$t("other")}},[i("option",{domProps:{value:e.customValue||"__other",selected:e.otherActive}},[e._v(e._s(e.customValue.length?e.customValue:e.$t("enter_value")))])])]):i("select",{ref:"select",attrs:{disabled:e.disabled||e.readonly,id:e.otherActive?null:e.id},domProps:{value:e.value},on:{change:function(t){return e.change(t.target.value)}}},[e.placeholder?i("option",{ref:"default",attrs:{selected:"",disabled:"",value:""}},[e._v("\n      "+e._s(e.placeholder)+"\n    ")]):e._e(),e._l(e.parsedOptions,function(t,s){return i("option",{key:s,domProps:{value:s,selected:e.value==s}},[e._v(e._s(t))])})],2),e.otherActive?i("input",{ref:"input",attrs:{type:e.type,id:e.id,placeholder:e.placeholder,autofocus:""},domProps:{value:e.customValue},on:{input:e.changeCustom}}):e._e(),i("div",{staticClass:"value"},[e.icon?i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]):e._e(),e.placeholder&&!e.value?i("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder))]):e._e(),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.parsedOptions[e.value]))])]),i("i",{staticClass:"material-icons chevron"},[e._v("arrow_drop_down")])])},Es=[],Ts={name:"v-select",props:{disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,default:""},value:{type:[String,Number],default:""},other:{type:Boolean,default:!1},icon:{type:String,default:""},type:{type:String,default:""},options:{type:[Object,String],required:!0},placeholder:{type:String,default:""},defaultValue:{type:Boolean,default:!1}},data(){return{otherActive:!1,customValue:""}},computed:{parsedOptions(){return"string"===typeof this.options?JSON.parse(this.options):this.options}},methods:{change(e){if(e===this.customValue||"__other"===e)return this.$emit("input",this.customValue),void(this.otherActive=!0);this.otherActive=!1,this.$emit("input",e),!0===this.defaultValue&&(this.$refs.default.setAttribute("selected","selected"),this.$refs.select.value="")},changeCustom(e){this.customValue=e.target.value,this.$emit("input",this.customValue)}}},Ns=Ts,Fs=(i("0ae6"),Object(U["a"])(Ns,Ms,Es,!1,null,"22243264",null)),Os=Fs.exports,qs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-simple-select"},[i("select",{ref:"selectElement",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{change:e.stageValue}},[i("option",{attrs:{disabled:"",value:""},domProps:{selected:null==e.value}},[e._v(e._s(e.placeholder||"--"))]),e._t("default")],2),i("div",{staticClass:"preview"},[e.value?[e._v(e._s(e.valueText))]:i("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder||"--"))]),i("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")])],2)])},js=[],As={name:"v-simple-select",props:{value:{type:String,default:null},placeholder:{type:String,default:null},disabled:{type:Boolean,default:!1}},data(){return{valueText:""}},methods:{stageValue(e){this.$emit("input",e.target.value),this.valueText=e.target.options[e.target.selectedIndex].text},getValueText(){this.valueText=this.value}},mounted(){this.getValueText()},watch:{value(){this.getValueText()}}},Ds=As,Bs=(i("c702"),Object(U["a"])(Ds,qs,js,!1,null,"94653a2c",null)),Ps=Bs.exports,Ls=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-slider"},[i("div",{staticClass:"input"},[i("input",{attrs:{id:e.id,name:e.id,min:e.min,max:e.max,step:e.step,type:"range"},domProps:{value:e.value},on:{input:function(t){e.$emit("input",Number(t.target.value))}}}),i("div",{ref:"track",staticClass:"track-wrapper"},[i("div",{staticClass:"track-fill",style:{transform:"scaleX("+e.progress+")"}})])]),i("output",{class:{"output-shown":e.alwaysShowOutput},attrs:{for:e.id}},[e._v(e._s(e.valueOrDefault)+" "+e._s(e.unit))])])},Rs=[],Vs={name:"v-slider",props:{id:{type:String,default:null},value:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,required:!0},step:{type:[Number,String],default:1},unit:{type:String,default:null},alwaysShowOutput:{type:Boolean,default:!1}},data(){return{valuePos:0}},computed:{valueOrDefault(){return null==this.value?(this.max-this.min)/2:this.value},progress(){return Math.round((this.valueOrDefault-this.min)/(this.max-this.min)*100)/100}}},Us=Vs,Ks=(i("1e45"),Object(U["a"])(Us,Ls,Rs,!1,null,"4bb0a96c",null)),zs=Ks.exports,Ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("textarea",{staticClass:"v-textarea",attrs:{cols:e.cols,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,name:e.name,id:e.id,placeholder:e.placeholder,readonly:e.readonly,required:e.required,rows:e.rows,spellcheck:e.spellcheck,wrap:e.wrap,autofocus:e.autofocus},domProps:{value:e.value},on:{keydown:function(t){return e.$emit("keydown",t.target.value)},input:function(t){return e.$emit("input",t.target.value)}}})},Hs=[],Gs={name:"v-textarea",props:{cols:{type:Number,default:20},disabled:{type:Boolean,default:!1},maxlength:{type:Number,default:null},minlength:{type:Number,default:null},name:{type:String,default:null},id:{type:String,default:null},placeholder:{type:String,default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rows:{type:Number,default:null},spellcheck:{type:Boolean,default:null},wrap:{type:String,default:null},value:{type:String,default:null},autofocus:{type:String,default:null}}},Qs=Gs,Xs=(i("39f0"),Object(U["a"])(Qs,Ws,Hs,!1,null,"273b43ab",null)),Ys=Xs.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-toggle",class:{disabled:e.disabled},on:{click:e.emitValue}},[i("input",{attrs:{type:"checkbox",id:e.id,disabled:e.disabled},domProps:{checked:e.value},on:{change:function(t){return e.$emit("input",!e.value)}}}),i("div",{staticClass:"switch-track",class:{active:e.value}}),i("div",{staticClass:"switch-thumb",class:{active:e.value}})])},Js=[],en={name:"v-toggle",props:{value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},methods:{emitValue(){this.disabled||this.$emit("input",!this.value)}}},tn=en,sn=(i("4f98"),Object(U["a"])(tn,Zs,Js,!1,null,"01afc640",null)),nn=sn.exports,an=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){return e.$emit("confirm")}}},[i("div",{staticClass:"buttons",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("confirm")}}},[i("v-button",{staticClass:"confirm",on:{click:function(t){return e.$emit("confirm")}}},[e._v(e._s(e.confirmText||e.$t("ok")))])],1)])},on=[],ln=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"v-modal-base"},[i("div",{staticClass:"mask",on:{click:function(t){return e.$emit("cancel")}}}),i("div",{staticClass:"wrapper"},[i("aside",{staticClass:"modal"},[i("p",[e._v(e._s(e.message))]),e._t("default")],2)])])])},rn=[],cn={name:"v-modal-base",props:{message:{type:String,required:!0}},mounted(){this.$helpers.disableBodyScroll(this.$refs.modal)},beforeDestroy(){this.$helpers.enableBodyScroll(this.$refs.modal)}},dn=cn,un=(i("619b"),Object(U["a"])(dn,ln,rn,!1,null,"156e4bdf",null)),hn=un.exports,pn={name:"v-alert",props:{message:{type:String,required:!0},confirmText:{type:String,default:null}},components:{VModalBase:hn}},mn=pn,fn=(i("bfcb"),Object(U["a"])(mn,an,on,!1,null,"49e5a2ec",null)),vn=fn.exports,_n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){return e.$emit("cancel")}}},[i("div",{staticClass:"buttons",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")}}},[i("button",{staticClass:"cancel",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n      "+e._s(e.cancelText||e.$t("cancel"))+"\n    ")]),i("v-button",{staticClass:"confirm",attrs:{bg:e.color},on:{click:function(t){return e.$emit("confirm")}}},[e.loading?[i("v-spinner",{attrs:{size:20,"line-size":2}})]:[e._v(e._s(e.confirmText||e.$t("ok")))]],2)],1)])},gn=[],yn={name:"v-confirm",props:{message:{type:String,required:!0},confirmText:{type:String,default:null},cancelText:{type:String,default:null},loading:{type:Boolean,default:!1},color:{type:String,default:"action"}},components:{VModalBase:hn}},bn=yn,$n=(i("091a"),Object(U["a"])(bn,_n,gn,!1,null,"0dc1c4dd",null)),kn=$n.exports,wn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"v-modal"},[i("div",{staticClass:"modal-mask",class:e.actionRequired?null:"pointer",on:{click:function(t){!e.actionRequired&&e.$emit("close")}}}),i("div",{staticClass:"modal-wrapper"},[i("aside",{ref:"modal",staticClass:"modal-container",class:{"full-size":e.fullSize},attrs:{"aria-labelledby":"modal-title","aria-describedby":"modal-description",role:"dialog"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;!e.actionRequired&&e.$emit("close")}}},[i("div",{attrs:{role:"document"}},[i("div",{staticClass:"screen-reader-offscreen",attrs:{id:"modal-description"}},[e._v("\n            "+e._s(e.$t("dialog_beginning"))+"\n            "+e._s(e.actionRequired?null:e.$t("esc_cancel"))+"\n          ")]),e.title?i("header",[i("h1",{staticClass:"style-1",attrs:{id:"modal-title"}},[e._v(e._s(e.title))]),e.actionRequired?e._e():i("button",{on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"material-icons"},[e._v("close")])])]):e._e(),e.tabs?i("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return i("button",{key:s,class:{active:e.activeTab===s},attrs:{disabled:t.disabled},on:{click:function(t){return e.$emit("tab",s)}}},[e._v("\n              "+e._s(t.text)+"\n            ")])}),0):e._e(),i("div",{ref:"tabsBody",staticClass:"body"},[e.tabs?e._l(e.tabs,function(t,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.activeTab===s,expression:"activeTab === id"}],key:"tab-"+s,staticClass:"tab"},[e._t(s)],2)}):e._t("default")],2),i("div",{staticClass:"footer",class:{"action-required":e.actionRequired}},[e.actionRequired?e._e():i("button",{on:{click:function(t){return e.$emit("close")}}},[e._v("\n              "+e._s(e.$t("cancel"))+"\n            ")]),e._l(e.buttons,function(t,s){return i("v-button",{key:s,staticClass:"confirm",attrs:{loading:t.loading||!1,disabled:t.disabled||!1},on:{click:function(t){return e.$emit(s)}}},[e._v(e._s(t.text))])})],2)])])])])])},Cn=[],xn=i("c740"),In={name:"v-modal",props:{actionRequired:{type:Boolean,default:!1},title:{type:String,default:null},buttons:{type:Object,default:()=>({})},tabs:{type:Object,default:null},activeTab:{type:String,default:null},fullSize:{type:Boolean,default:!1}},mounted(){Object(xn["disableBodyScroll"])(this.$refs.modal)},beforeDestroy(){Object(xn["enableBodyScroll"])(this.$refs.modal)},watch:{activeTab(){setTimeout(()=>{this.$refs.tabsBody.querySelector("input").focus()},0)}}},Sn=In,Mn=(i("d353"),Object(U["a"])(Sn,wn,Cn,!1,null,"61a46046",null)),En=Mn.exports,Tn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){return e.$emit("cancel")}}},[i("div",{staticClass:"v-prompt",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")}}},[e.multiline?i("v-textarea",{staticClass:"input multiline",attrs:{autofocus:"",placeholder:e.placeholder,value:e.value},on:{input:function(t){return e.$emit("input",t)}}}):i("v-input",{staticClass:"input",attrs:{autofocus:"",value:e.value,placeholder:e.placeholder},on:{input:e.emitValue,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("confirm")}}}),e._t("default"),i("div",{staticClass:"buttons"},[i("button",{staticClass:"cancel",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n        "+e._s(e.cancelText||e.$t("cancel"))+"\n      ")]),i("v-button",{staticClass:"confirm",attrs:{loading:e.loading,disabled:e.required&&e.disabled},on:{click:function(t){return e.$emit("confirm")}}},[e._v(e._s(e.confirmText||e.$t("ok")))])],1)],2)])},Nn=[],Fn={name:"v-prompt",props:{message:{type:String,required:!0},confirmText:{type:String,default:null},cancelText:{type:String,default:null},value:{type:String,default:null},multiline:{type:Boolean,default:!1},required:{type:Boolean,default:!1},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},safe:{type:Boolean,default:!1}},components:{VModalBase:hn},computed:{disabled(){return null==this.value||0===this.value.length}},methods:{emitValue(e){this.safe&&(e=e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"")),this.$emit("input",e)}}},On=Fn,qn=(i("9360"),Object(U["a"])(On,Tn,Nn,!1,null,"33f2680e",null)),jn=qn.exports,An=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"v-header"},[i("button",{staticClass:"nav-toggle",attrs:{disabled:e.navActive},on:{click:e.activateNav}},[i("i",{staticClass:"material-icons"},[e._v("menu")])]),i("div",{staticClass:"title"},[e.title?i("h1",[e._v(e._s(e.title))]):i("ol",{staticClass:"breadcrumb"},e._l(e.breadcrumb||e.defaultBreadcrumb,function(t,s){var n=t.name,a=t.path,o=t.color;return void 0===o&&(o=null),i("li",{key:a},[s!==(e.breadcrumb||e.defaultBreadcrumb).length-1?[i("router-link",{style:{color:o?"var(--"+o+")":null},attrs:{to:a}},[e._v(e._s(n))])]:i("h1",{style:{color:o?"var(--"+o+")":null}},[e._v("\n          "+e._s(n)+"\n        ")])],2)}),0),e._t("title")],2),e._t("default"),e.infoToggle&&!e.itemDetail?i("v-header-button",{attrs:{label:e.$t("info"),icon:"info","no-background":""},on:{click:e.toggleInfo}}):e._e(),e.infoToggle&&e.itemDetail?i("v-header-button",{staticClass:"info-mobile",attrs:{label:e.$t("info"),icon:"info","no-background":""},on:{click:e.toggleInfo}}):e._e(),e._t("buttons")],2)},Dn=[];const Bn="🔒 Login Pending",Pn="🔒✅ Login Successful",Ln="🔒❌ Login Failed",Rn="🔒 Logout",Vn="🔒 Refresh Token",Un="🔒 Remove Auth Error",Kn="🔒 Change API",zn="🔖 Set Bookmarks",Wn="🔖 Add Bookmark",Hn="🔖 Delete Bookmark",Gn="🗄 Set Collections",Qn="🗄 Add Collection",Xn="🗄 Remove Collection",Yn="🗄 Update Collection",Zn="📝 Discard Changes",Jn="📝 Item Saved",ea="📝 Start Editing",ta="📝 Unstage Value",ia="📝 Stage Value",sa="📌 Add Field",na="📌 Update Field",aa="📌 Update Fields",oa="📌 Remove Field",la="📦 Set Interfaces",ra="📦 Set Layouts",ca="📦 Set Pages",da="🏪 Store Hydrated",ua="🏪❌ Store Hydration Failed",ha="🙅🏻‍♂️ Set Permissions",pa="🙅🏻‍♂️ Add Permissions",ma="⏱ Latency Check",fa="⏳ Queue Request",va="⏳ Remove Request from Queue",_a="👨🏻‍💻✅ Set Current User",ga="👨🏻‍💻 Current User Updated",ya="❤️ Set Relations",ba="❤️ Add Relation",$a="❤️ Update Relation",ka="🔮 Set Server Info",wa="🎨 Toggle Nav Sidebar",Ca="🎨 Toggle Info Sidebar",xa="👯‍♀️ Set Users",Ia="💬 Push Notification",Sa="💬❌ Remove Notification";var Ma={name:"v-header",props:{title:{type:String,default:null},breadcrumb:{type:Array,default:null},infoToggle:{type:Boolean,default:!1},itemDetail:{type:Boolean,default:!1}},computed:{defaultBreadcrumb(){const e=this.$route.path.split("/").filter(e=>e);return e.map((t,i)=>{let s="";for(let n=0;n<i;n++)s+=`/${e[n]}`;return s+=`/${t}`,{name:this.$helpers.formatTitle(t),path:s}})},navActive(){return this.$store.state.sidebars.nav}},methods:{activateNav(){this.$store.commit(wa,!0)},toggleInfo(){this.$store.commit(Ca)}}},Ea=Ma,Ta=(i("c020"),i("aef9"),Object(U["a"])(Ea,An,Dn,!1,null,"41856af5",null)),Na=Ta.exports,Fa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-header-button"},[Object.keys(e.options).length>0?i("div",{staticClass:"options"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.choice,expression:"choice"}],attrs:{disabled:e.disabled},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.choice=t.target.multiple?i:i[0]},e.emitChange]}},[i("option",{attrs:{disabled:"",selected:"",value:""}},[e._v(" "+e._s(e.$t("more_options"))+" ")]),e._l(e.options,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v("\n        "+e._s(t)+"\n      ")])})],2),i("i",{staticClass:"material-icons"},[e._v("more_horiz")])]):e._e(),i(e.disabled?"button":e.to?"router-link":"button",{tag:"component",class:{attention:e.alert,"no-bg":e.noBackground},style:{backgroundColor:e.noBackground||e.disabled?null:"var(--"+e.color+")",color:"var(--"+e.color+")"},attrs:{disabled:e.disabled,to:e.to||null},on:{click:function(t){!e.to&&e.$emit("click",t)}}},[e.loading?i("v-spinner",{attrs:{size:24,"line-fg-color":"white","line-bg-color":"transparent"}}):i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]),e.label?i("span",{staticClass:"style-btn"},[e._v(e._s(e.label))]):e._e()],1)],1)},Oa=[],qa={name:"v-header-button",props:{icon:{type:String,required:!0},color:{type:String,default:"accent"},label:{type:String,default:null},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},alert:{type:Boolean,default:!1},noBackground:{type:Boolean,default:!1},to:{type:String,default:null}},data(){return{choice:null}},methods:{emitChange(e){this.$emit("input",e.target.value),this.choice=null}}},ja=qa,Aa=(i("8982"),Object(U["a"])(ja,Fa,Oa,!1,null,"2b678338",null)),Da=Aa.exports,Ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-blocker",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"blocker-info",attrs:{"z-index":9},on:{click:e.disableSidebar}}),i("transition",{attrs:{name:"info"}},[e.active&&!e.itemDetail?i("aside",{staticClass:"info-sidebar",class:{wide:e.wide}},[i("div",{staticClass:"system"},[e._t("system")],2),e._t("default")],2):e._e()]),e.itemDetail?i("aside",{staticClass:"info-sidebar",class:[{wide:e.wide,"hide-when-small":!e.active},"info-leave-active"]},[e._t("default")],2):e._e()],1)},Pa=[],La=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"blocker",style:{zIndex:e.zIndex},on:{click:function(t){return e.$emit("click")},touchend:function(t){return e.$emit("click")}}})])},Ra=[],Va={name:"blocker",props:{zIndex:{type:Number,default:0}}},Ua=Va,Ka=(i("0ebd"),Object(U["a"])(Ua,La,Ra,!1,null,"db52f14e",null)),za=Ka.exports,Wa={name:"info-sidebar",components:{VBlocker:za},props:{wide:{type:Boolean,default:!1},itemDetail:{type:Boolean,default:!1}},computed:{active(){return this.$store.state.sidebars.info}},methods:{disableSidebar(){this.$store.commit(Ca,!1)}}},Ha=Wa,Ga=(i("c631"),Object(U["a"])(Ha,Ba,Pa,!1,null,"0c1db9ab",null)),Qa=Ga.exports,Xa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-upload",class:{uploading:Object.keys(e.files).length>0,disabled:e.disabled}},[i("input",{ref:"select",staticClass:"select",attrs:{disabled:e.disabled,type:"file",accept:e.accept,multiple:e.multiple},on:{change:function(t){return e.filesChange(t.target.files)}}}),i("div",{staticClass:"dropzone",class:{smaller:e.small}},[e._m(0),i("div",{staticClass:"info"},[i("p",{staticClass:"name"},[e._v(e._s(e.$tc("drop_files",e.multiple?2:1)))]),i("p",{staticClass:"file-info no-wrap"},[e._v("\n        "+e._s(e.$t("max_size",{size:e.$helpers.filesize(e.$store.state.serverInfo.maxUploadSize)}))+"\n      ")])]),i("div",{staticClass:"buttons"},[e.embed?i("form",{staticClass:"embed-input",on:{submit:function(t){return t.preventDefault(),e.saveEmbed(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.embedLink,expression:"embedLink"}],attrs:{type:"url",placeholder:e.$t("embed_placeholder")},domProps:{value:e.embedLink},on:{input:function(t){t.target.composing||(e.embedLink=t.target.value)}}}),i("button",{attrs:{type:"submit"}},[e._v("Save")])]):e._e(),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("embed"),expression:"$t('embed')"}],staticClass:"material-icons select",on:{click:function(t){e.embed=!e.embed}}},[e._v("link")]),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("select_from_device"),expression:"$t('select_from_device')"}],staticClass:"material-icons select",on:{click:function(t){return e.$refs.select.click()}}},[e._v("devices")])])]),i("transition-group",{attrs:{tag:"ol",name:"list"}},e._l(e.files,function(t){return i("li",{key:t.name,staticClass:"list-item"},[i("v-progress-ring",{staticClass:"icon",attrs:{progress:t.progress,icon:null!==t.error?"cloud_off":100===t.progress?"cloud_done":"cloud_upload",color:null!==t.error?"danger":100===t.progress?"success":"accent",stroke:100===t.progress?0:2}}),i("div",{staticClass:"info"},[i("p",{staticClass:"name no-wrap"},[e._v(e._s(t.name))]),i("p",{staticClass:"file-info no-wrap"},[e._v("\n          "+e._s(t.size)+"\n          "),t.progress&&100!==t.progress?i("span",{staticClass:"progress"},[e._v(e._s(t.progress)+"%")]):e._e()])])],1)}),0),i("input",{ref:"drop",staticClass:"drop",attrs:{disabled:e.disabled,type:"file",accept:e.accept,multiple:e.multiple},on:{click:function(e){e.preventDefault()},change:function(t){return e.filesChange(t.target.files)}}})],1)},Ya=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("i",{staticClass:"material-icons"},[e._v("cloud_upload")])])}],Za=i("774e"),Ja=i.n(Za),eo=i("49d5"),to=i.n(eo),io={name:"v-upload",props:{accept:{type:String},multiple:{type:Boolean,default:!0},small:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{files:{},embedLink:null,embed:!1}},methods:{saveEmbed(){this.$api.createItem("directus_files",{data:this.embedLink}).then(e=>{this.$emit("upload",{data:e})}).then(()=>this.embed=!1).then(()=>this.embedLink=null).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},filesChange(e){e&&e.length&&Ja()(e).forEach(this.save)},save(e){const t=this.$helpers.shortid.generate(),i=new FormData,{name:s,size:n,type:a}=e;-1!==n&&n>this.$store.state.serverInfo.maxUploadSize?this.$events.emit("warning",{notify:this.$t("upload_exceeds_max_size",{filename:s})}):(i.append("data",e,s),this.files={[t]:{name:s,size:to()(n),type:a,progress:0,error:null},...this.files},this.$api.uploadFiles(i,({loaded:e,total:i})=>{const s=Math.round(100*e/i);this.files[t].progress=s}).then(e=>e.data).then(e=>{this.$emit("upload",{...this.files[t],data:e}),this.$refs.select.value="",this.$refs.drop.value=""}).catch(e=>{this.files[t].error=e,this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})}))}}},so=io,no=(i("08fc"),Object(U["a"])(so,Xa,Ya,!1,null,"243991e0",null)),ao=no.exports,oo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-progress-ring",style:{height:2*e.radius+"px",width:2*e.radius+"px"}},[i("svg",[i("circle",{staticClass:"background",attrs:{fill:"var(--"+e.color+")",stroke:"transparent","stroke-width":e.stroke,r:e.normalizedRadius,cx:e.radius,cy:e.radius}}),i("circle",{style:{strokeDashoffset:e.strokeDashoffset},attrs:{stroke:"var(--"+e.color+")",fill:"transparent","stroke-dasharray":e.circumference+" "+e.circumference,"stroke-width":e.stroke,r:e.normalizedRadius,cx:e.radius,cy:e.radius}})]),e.icon?i("i",{staticClass:"material-icons",style:{fontSize:e.iconSize,color:"var(--"+e.color+")"}},[e._v(e._s(e.icon))]):e._e()])},lo=[],ro={name:"v-progress-ring",props:{radius:{type:Number,default:24},stroke:{type:Number,default:2},progress:{type:Number,required:!0,validator(e){return e>=0&&e<=100}},color:{type:String,default:"dark-gray"},icon:{type:String,default:null}},data(){const e=this.radius-2*this.stroke,t=2*e*Math.PI;return{normalizedRadius:e,circumference:t}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference},iconSize(){return 6*Math.round(this.radius/6)+"px"}}},co=ro,uo=(i("5d15"),Object(U["a"])(co,oo,lo,!1,null,"26bfdc0c",null)),ho=uo.exports;b["default"].component("v-ext-page",ki),b["default"].component("v-ext-input",it),b["default"].component("v-ext-display",bt),b["default"].component("v-ext-layout",Lt),b["default"].component("v-ext-layout-options",ni),b["default"].component("v-items",Ni),b["default"].component("v-form",ss),b["default"].component("v-button",cs),b["default"].component("v-checkbox",fs),b["default"].component("v-input",$s),b["default"].component("v-radio",Ss),b["default"].component("v-select",Os),b["default"].component("v-simple-select",Ps),b["default"].component("v-slider",zs),b["default"].component("v-textarea",Ys),b["default"].component("v-toggle",nn),b["default"].component("v-alert",vn),b["default"].component("v-confirm",kn),b["default"].component("v-modal",En),b["default"].component("v-prompt",jn),b["default"].component("v-header",Na),b["default"].component("v-header-button",Da),b["default"].component("v-info-sidebar",Qa),b["default"].component("v-error",Yi),b["default"].component("invisible-label",z),b["default"].component("loader",Y),b["default"].component("v-spinner",B.a),b["default"].component("v-avatar",se),b["default"].component("v-card",ce),b["default"].component("v-details",fe),b["default"].component("v-table",xe),b["default"].component("v-upload",ao),b["default"].component("v-progress-ring",ho);i("5b09"),i("6bff");var po=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hydratingError?i("div",{staticClass:"error"},[i("v-error",{attrs:{icon:"warning",title:e.$t("server_error"),body:e.$t("server_error_copy"),color:"danger"}}),i("p",[e._v("\n    Try again later or\n    "),i("router-link",{attrs:{to:"/logout"}},[e._v("login to another instance")]),e._v(".\n  ")],1)],1):e.extensionError?i("div",{staticClass:"error"},[i("v-error",{attrs:{icon:"extension",title:e.$t("extensions_missing"),body:e.$t("extensions_missing_copy"),color:"warning"}})],1):e.publicRoute?i("div",{staticClass:"public"},[i("router-view"),i("v-notification")],1):i("div",{style:{"--accent":"var(--"+e.color+")"}},[e.hydrated?i("div",{staticClass:"directus"},[i("v-nav-sidebar"),i("router-view",{staticClass:"page-root"})],1):i("loader",{attrs:{area:"full-page"}}),i("portal-target",{attrs:{name:"modal",multiple:""}}),i("v-notification")],1)},mo=[],fo=i("2f62"),vo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-sidebar"},[i("v-blocker",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"blocker",attrs:{"z-index":2},on:{click:e.disableNav}}),i("transition",{attrs:{name:"nav"}},[i("aside",{class:{active:e.active}},[i("button",{staticClass:"a11y-close",on:{click:e.disableNav}},[e._v("Close nav")]),i("v-logo",{staticClass:"logo"}),i("section",{staticClass:"content"},[i("project-switcher"),e.collections&&e.collections.length>0?i("nav-menu",{attrs:{title:e.$t("collections"),"no-border":!e.bookmarks.length&&!e.extensions,links:e.collections.map(function(t){var i=t.collection,s=t.icon;return{path:"/collections/"+i,name:e.$t("collections-"+i),icon:s}})}}):e._e(),e.extensions?i("nav-menu",{attrs:{title:e.$t("extensions"),links:e.extensions,"no-border":!e.bookmarks.length}}):e._e(),i("nav-bookmarks",{attrs:{bookmarks:e.bookmarks,"no-border":""}})],1),i("user-menu")],1)])],1)},_o=[],go=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-logo"},[e.customLogoExists?i("img",{attrs:{src:e.customLogoPath,alt:e.projectName}}):i("div",{staticClass:"logo",class:{running:e.running},on:{animationiteration:e.checkRunning}})])},yo=[],bo={name:"v-logo",data(){return{customLogoPath:"",running:!1}},computed:{customLogoExists(){return Boolean(this.$store.state.settings.logo)},projectName(){return this.$store.state.auth.projectName},queueContainsItems(){return 0!==this.$store.state.queue.length}},watch:{queueContainsItems(e){!0===e&&(this.running=!0)}},created(){if(this.customLogoExists){const e=this.$store.state.settings.logo;this.$api.getItem("directus_files",e).then(e=>e.data.storage.full_url).then(e=>this.customLogoPath=e).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},methods:{checkRunning(){!1===this.queueContainsItems&&(this.running=!1)}}},$o=bo,ko=(i("53eb"),Object(U["a"])($o,go,yo,!1,null,"714080ad",null)),wo=ko.exports,Co=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-switcher"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:{content:e.$store.state.auth.url+"<br>"+e.$t("latency")+": "+e.$n(Math.round(e.$store.state.latency[e.$store.state.latency.length-1].latency))+"ms",boundariesElement:"body"},expression:"{\n      content:\n        $store.state.auth.url +\n        `<br>${$t('latency')}: ${$n(\n          Math.round(\n            $store.state.latency[$store.state.latency.length - 1].latency\n          )\n        )}ms`,\n      boundariesElement: 'body'\n    }",modifiers:{left:!0}}],class:{slow:1==e.$store.getters.signalStrength,disconnected:0==e.$store.getters.signalStrength}},[i("v-signal",{staticClass:"icon"}),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.$store.state.auth.projectName))]),Object.keys(e.urls).length>1?i("i",{staticClass:"material-icons chevron"},[e._v("arrow_drop_down")]):e._e(),Object.keys(e.urls).length>1?i("select",{domProps:{value:e.currentUrl},on:{change:function(t){return t.preventDefault(),e.changeUrl(t)}}},e._l(e.urls,function(t,s){return i("option",{key:t+s,domProps:{value:s,selected:s===e.currentUrl||s+"/"===e.currentUrl}},[e._v(e._s(t))])}),0):e._e()],1)])},xo=[],Io=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[0===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 26 24"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.24 8l1.35-1.68C25.1 5.96 20.26 2 13 2S.9 5.96.42 6.32l12.57 15.66.01.02.01-.01L20 13.28V8h4.24z"}}),i("path",{attrs:{d:"M22 22h2v-2h-2v2zm0-12v8h2v-8h-2z"}})]):1===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M13.34 29.72l10.65 13.27.01.01.01-.01 10.65-13.27C34.13 29.31 30.06 26 24 26s-10.13 3.31-10.66 3.72z"}})]):2===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M9.58 25.03l14.41 17.95.01.02.01-.02 14.41-17.95C37.7 24.47 32.2 20 24 20s-13.7 4.47-14.42 5.03z"}})]):3===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M7.07 21.91l16.92 21.07.01.02.02-.02 16.92-21.07C40.08 21.25 33.62 16 24 16c-9.63 0-16.08 5.25-16.93 5.91z"}})]):4===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}})]):e._e()])},So=[],Mo={name:"v-signal",computed:{strength(){return this.$store.getters.signalStrength}}},Eo=Mo,To=(i("c5d8"),Object(U["a"])(Eo,Io,So,!1,null,"341685e1",null)),No=To.exports,Fo={name:"project-switcher",components:{VSignal:No},data(){return{active:!1}},computed:{urls(){return this.$lodash.mapKeys(window.__DirectusConfig__.api,(e,t)=>!1===t.endsWith("/")?t+"/":t)},currentUrl(){return this.$store.state.auth.url+"/"+this.$store.state.auth.project+"/"}},methods:{changeUrl(e){const t=e.target.value;this.$store.dispatch("changeAPI",t)}}},Oo=Fo,qo=(i("83d4"),Object(U["a"])(Oo,Co,xo,!1,null,"837d75f8",null)),jo=qo.exports,Ao=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-menu"},[e.title?i("h3",{staticClass:"style-4"},[e._v(e._s(e.title))]):e._e(),i("nav",{class:{"no-border":e.noBorder}},[i("ul",e._l(e.links,function(t){var s=t.path,n=t.name,a=t.icon,o=t.color;return i("li",{key:s},[i(s.startsWith("http")?"a":"router-link",{tag:"component",class:o||null,attrs:{to:s,href:s,target:"__blank",rel:"noopener noreferrer"}},[a?i("i",{staticClass:"material-icons icon"},[e._v(e._s(a))]):i("svg",{staticClass:"icon",attrs:{viewBox:"0 0 17 18"}},[i("path",{attrs:{d:"M.4783 14.2777l7.676 3.5292a.7888.7888 0 0 0 .6913 0l7.6738-3.5292a.7661.7661 0 0 0 .4805-.748V4.3566a.8228.8228 0 0 0-.0147-.1474V4.165a.824.824 0 0 0-.0329-.1054l-.0113-.034a.8228.8228 0 0 0-.0669-.1246l-.0181-.0261a.824.824 0 0 0-.0726-.0873l-.0396-.026a.8228.8228 0 0 0-.0907-.0748l-.0227-.0159a.824.824 0 0 0-.111-.0623L8.8434.0794a.7888.7888 0 0 0-.6914 0L.4794 3.6086a.8228.8228 0 0 0-.111.0623l-.0227.0159a.824.824 0 0 0-.0907.0748l-.0283.0283a.824.824 0 0 0-.0726.0873l-.0181.026a.8228.8228 0 0 0-.0657.1247l-.0227.0317a.824.824 0 0 0-.034.1054v.043A.8228.8228 0 0 0 0 4.3567v9.1731c0 .3513.1587.6007.4783.748zm1.1684-8.6325L7.675 8.4218v7.3587l-6.0282-2.7778V5.644v.0012zM9.324 15.7794V8.4207l6.027-2.7767v7.3587l-6.027 2.7755v.0012zm-.825-14.051l5.7062 2.6293-5.7063 2.627-5.7052-2.6281 5.7052-2.6282z","fill-rule":"nonzero"}})]),e._v("\n          "+e._s(n)+"\n        ")])],1)}),0)])])},Do=[],Bo={name:"nav-menu",props:{title:{type:String,default:null},links:{type:Array,required:!0},noBorder:{type:Boolean,default:!1}}},Po=Bo,Lo=(i("56a1"),Object(U["a"])(Po,Ao,Do,!1,null,"3ee3e54d",null)),Ro=Lo.exports,Vo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-menu"},[i("header",[i("v-avatar",{staticClass:"avatar",attrs:{src:e.avatarURL,alt:e.fullName,indicator:!0}}),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.fullName))]),i("i",{staticClass:"material-icons"},[e._v("more_vert")])],1),i("div",{staticClass:"links"},[i("nav-menu",{attrs:{links:e.firstLinks}}),i("nav-menu",{attrs:{links:e.secondLinks}}),i("nav-menu",{attrs:{links:e.thirdLinks}}),i("button",{staticClass:"sign-out",on:{click:function(t){e.confirmSignOut=!0}}},[i("i",{staticClass:"material-icons icon"},[e._v("exit_to_app")]),e._v(" "+e._s(e.$t("sign_out"))+"\n    ")])],1),e.confirmSignOut?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{busy:e.confirmSignOutLoading,message:e.editing?e.$t("sign_out_confirm_edits"):e.$t("sign_out_confirm"),"confirm-text":e.$t("sign_out")},on:{cancel:function(t){e.confirmSignOut=!1},confirm:e.signOut}})],1):e._e()],1)},Uo=[],Ko={name:"user-menu",components:{NavMenu:Ro},data(){return{confirmSignOut:!1,confirmSignOutLoading:!1}},computed:{avatarURL(){return this.$store.state.currentUser.avatar?this.$store.state.currentUser.avatar.data.full_url:null},currentUserID(){return this.$store.state.currentUser&&this.$store.state.currentUser.id},editing(){return this.$store.getters.editing},email(){return this.$store.state.currentUser&&this.$store.state.currentUser.email},fullName(){const e=this.$store.state.currentUser&&this.$store.state.currentUser.first_name,t=this.$store.state.currentUser&&this.$store.state.currentUser.last_name;return`${e} ${t}`},permissions(){return this.$store.state.permissions},firstLinks(){const e=[];return!0===this.$store.state.currentUser.admin&&e.push({path:"/settings",name:this.$t("admin_settings"),icon:"settings",color:"warning"}),e.push({path:"https://docs.directus.io",name:this.$t("help_and_docs"),icon:"help"}),e},secondLinks(){const e=[];return"none"!==this.permissions.directus_files.read&&e.push({path:"/files",name:this.$t("file_library"),icon:"collections"}),"none"===this.permissions.directus_users.read&&"mine"===this.permissions.directus_users.read||e.push({path:"/users",name:this.$t("user_directory"),icon:"person"}),e},thirdLinks(){const e=[];return"none"!==this.permissions.directus_activity.read&&e.push({path:"/activity",name:this.$t("my_activity"),icon:"notifications"}),e.push({path:`/users/${this.currentUserID}`,name:this.$t("my_profile"),icon:"person"}),e}},methods:{signOut(){this.confirmSignOutLoading=!0,this.$store.dispatch("logout")}}},zo=Ko,Wo=(i("3d0c"),Object(U["a"])(zo,Vo,Uo,!1,null,"6d8fb23c",null)),Ho=Wo.exports,Go=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-bookmarks"},[e.bookmarks&&e.bookmarks.length>0?i("h3",{staticClass:"style-4"},[e._v("\n    "+e._s(e.$t("bookmarks"))+"\n  ")]):e._e(),e.bookmarks&&e.bookmarks.length>0?i("nav",{class:{"no-border":e.noBorder}},[i("ul",e._l(e.bookmarks,function(t){return i("li",{key:t.id,staticClass:"bookmark"},[i("router-link",{staticClass:"no-wrap",attrs:{to:"/bookmarks/"+t.collection+"/"+t.id}},[i("i",{staticClass:"material-icons icon"},[e._v("bookmark_outline")]),e._v(e._s(t.title)+"\n        ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("delete_bookmark"),expression:"$t('delete_bookmark')"}],on:{click:function(i){e.confirmRemove=!0,e.toBeDeletedBookmark=t.id}}},[i("i",{staticClass:"material-icons"},[e._v("remove_circle_outline")])])],1)}),0)]):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("delete_bookmark_body")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.deleteBookmark}})],1):e._e()],1)},Qo=[],Xo={name:"nav-bookmarks",props:{bookmarks:{type:Array,required:!0},noBorder:{type:Boolean,default:!1}},data(){return{confirmRemove:!1,toBeDeletedBookmark:null}},methods:{deleteBookmark(){this.$store.dispatch("deleteBookmark",this.toBeDeletedBookmark),this.confirmRemove=!1,this.toBeDeletedBookmark=null}}},Yo=Xo,Zo=(i("2fb8"),Object(U["a"])(Yo,Go,Qo,!1,null,"2e3c9607",null)),Jo=Zo.exports,el={name:"nav-sidebar",components:{VLogo:wo,ProjectSwitcher:jo,NavMenu:Ro,UserMenu:Ho,NavBookmarks:Jo,VBlocker:za},computed:{permissions(){return this.$store.state.permissions},collections(){const e=this.$store.state.collections;return null==e?[]:It()(e).filter(e=>0==e.hidden&&1==e.managed&&!1===e.collection.startsWith("directus_")).filter(e=>{return e.status_mapping&&this.permissions[e.collection].statuses?this.$lodash.some(this.permissions[e.collection].statuses,e=>"none"!==e.read):"none"!==this.permissions[e.collection].read})},bookmarks(){return this.$store.state.bookmarks},projectName(){return this.$store.state.auth.projectName},active(){return this.$store.state.sidebars.nav},extensions(){const e=[],t=this.$store.state.extensions.pages;return this.$lodash.forEach(t,(t,i)=>{e.push({path:`/ext/${i}`,name:t.name,icon:t.icon})}),e.length?e:null}},methods:{logout(){this.$store.dispatch("logout")},deleteBookmark(e){this.$store.dispatch("deleteBookmark",e)},toBookmark(e){const{collection:t,search_query:i,filters:s,view_options:n,view_type:a,view_query:o}=e;this.$store.dispatch("setListingPreferences",{collection:t,updates:{search_query:i,filters:s,view_options:n,view_type:a,view_query:o}}).then(()=>{this.$router.push(`/collections/${t}`)})},disableNav(){this.$store.commit(wa,!1)}}},tl=el,il=(i("c072"),i("58de"),Object(U["a"])(tl,vo,_o,!1,null,"29471a68",null)),sl=il.exports,nl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notifications"},[i("transition-group",{attrs:{name:"slide-fade",tag:"div"}},e._l(e.notifications,function(e){return i("v-item",{key:e.id,attrs:{item:e}})}),1)],1)},al=[],ol=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification",class:e.item.type},[i("div",{staticClass:"icon-main",style:{backgroundColor:e.ringColor}},[i("i",{staticClass:"material-icons",style:{color:e.iconColor}},[e._v(e._s(e.item.iconMain))])]),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[e._v(e._s(e.item.title))]),i("div",{staticClass:"details",domProps:{innerHTML:e._s(e.detailHtml)}})]),i("div",{staticClass:"icon-right",on:{click:e.actionClick}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.item.iconRight))])])])},ll=[],rl={name:"v-item",props:{item:{type:Object,required:!0}},computed:{detailHtml(){return void 0!==this.item.details?this.$helpers.snarkdown(this.item.details):""},iconColor(){return void 0!==this.item.color?`var(--${this.item.color}-500)`:"var(--blue-gray-500)"},ringColor(){return void 0!==this.item.color?`var(--${this.item.color}-100)`:"var(--blue-gray-100)"}},methods:{...Object(fo["b"])("notifications",[Sa]),startItemTimeout(){void 0!==this.item.delay&&this.item.delay>0&&setTimeout(()=>this.removeItemFromStore(),this.item.delay)},removeItemFromStore(){this.$store.commit(Sa,this.item.id)},actionClick(){if(!(this.item.onClick instanceof Function))throw new Error("Notification callback is not a function");this.item.onClick(),this.removeItemFromStore()}},mounted(){this.startItemTimeout()}},cl=rl,dl=(i("7560"),Object(U["a"])(cl,ol,ll,!1,null,"7b9e08a6",null)),ul=dl.exports,hl={name:"VNotifications",components:{VItem:ul},computed:{notifications(){return this.$store.state.notifications.queue}}},pl=hl,ml=(i("ec05"),Object(U["a"])(pl,nl,al,!1,null,"7558f1bd",null)),fl=ml.exports,vl={name:"directus",metaInfo:{title:"Directus"},components:{VError:Yi,VNavSidebar:sl,VNotification:fl},computed:{...Object(fo["c"])({color:e=>e.settings.values.color||"light-blue-600"}),publicRoute(){return this.$route.meta.publicRoute||!1},hydrated(){return this.$store.state.hydrated||!1},hydratingError(){return this.$store.state.hydratingError},extensionError(){if(!this.hydrated)return null;const e=this.$store.state.extensions;return 0===It()(e.interfaces).length&&0===It()(e.layouts).length&&0===It()(e.pages).length}},watch:{$route(){this.bodyClass(),this.$store.commit(wa,!1),this.infoActive=!1},infoActive(e){const t=this.$route.meta&&"wide"===this.$route.meta.infoSidebarWidth?"info-wide-active":"info-active";e?document.body.classList.add(t):(document.body.classList.remove("info-wide-active"),document.body.classList.remove("info-active"))},hydratingError(e){e&&document.body.classList.add("no-padding")}},created(){this.bodyClass()},methods:{bodyClass(){this.publicRoute?document.body.classList.add("no-padding"):document.body.classList.remove("no-padding")},keepEditing(){this.$router.push(`/collections/${this.$store.state.edits.collection}/${this.$store.state.edits.primaryKey}`)},discardChanges(){this.$store.dispatch("discardChanges")}}},_l=vl,gl=(i("6294"),i("8758"),Object(U["a"])(_l,po,mo,!1,null,"0ed30a4d",null)),yl=gl.exports,bl=i("8c4f"),$l=i("537e"),kl=i.n($l),wl=i("1b32"),Cl=i.n(wl),xl=i("f499"),Il=i.n(xl),Sl=i("6cc8"),Ml=i.n(Sl);let El=null;function Tl(){El=setInterval(()=>{bc.dispatch("latency"),bc.dispatch("track",{page:Kh.currentRoute.path})},1e4)}function Nl(){clearInterval(El)}const Fl=window.__DirectusConfig__,Ol=Fl?Object($["mapKeys"])(Fl.api,(e,t)=>t.endsWith("/")?t:t+"/"):null;function ql(e){let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0],t}function jl({commit:e},t){e(Bn);const{url:i}=t;let s=i;if(!1===s.endsWith("/")&&(s+="/"),!1===s.startsWith("http")){const e=document.createElement("a");e.href=s,s=e.href}const n=s.split("/"),a=n.pop()||n.pop(),o=n.join("/");return wc.login({...t,url:o,project:a,persist:!0}).then(t=>{e(Pn,{...t,projectName:Ol[i]||Ol[t.url+"/"+t.project+"/"]||Cl()(ql(t.url))})}).catch(t=>{throw e(Ln,t),t})}function Al({commit:e},t){e(Bn);const{url:i,project:s}=Ml()(t);return wc.url=i,wc.project=s,wc.request("POST","auth/sso/access_token",{},{request_token:t}).then(e=>e.data).then(({token:t})=>{wc.token=t,e(Pn,{project:s,url:i,token:t,projectName:Fl.api[i]||ql(i)})})}function Dl({commit:e},{token:t,url:i,project:s}){e(Vn,{token:t,url:i,project:s})}function Bl({commit:e},t){return new Ee.a(i=>{Nl(),wc.reset(),$c(),We.locale="en-US",Kh.push("/login"),e(Rn,t),i()})}function Pl({commit:e,dispatch:t},i){t("logout").then(()=>{const t=i.split("/"),s=t.pop()||t.pop(),n=t.join("/");e(Kn,{url:n,project:s})})}function Ll({commit:e}){e(Un)}function Rl({commit:e}){e(Rn)}const Vl={[Bn](e){e.loading=!0},[Pn](e,t){e.loading=!1,e.error=null,e.token=t.token,e.project=t.project,e.url=t.url,e.projectName=t.projectName},[Ln](e,t){e.token=null,e.url=null,e.project=null,e.projectName=null,e.loading=!1,e.error=t},[Rn](e,t){e.error=t},[Vn](e,t){e.loading=!1,e.error=null,e.token=t.token,e.project=t.project,e.url=t.url},[Un](e){e.error=null},[Kn](e,{url:t,project:i}){e.url=t,e.project=i}};var Ul=Vl,Kl=i("3be2"),zl=i.n(Kl);function Wl(e){if(e.token){const t=Ml()(e.token);return t.exp&&zl()(t.exp)&&(t.exp=new Date(1e3*t.exp)),t}return null}function Hl(e){return!!(e.token&&e.token.length>0&&e.url&&e.url.length>0&&Wl(e).exp>new Date)}const Gl={token:null,url:null,project:"_",error:null,loading:!1,projectName:null};var Ql={state:Gl,actions:n,mutations:Ul,getters:a};function Xl(e,t,i){const s=e=>{return null==e?e:"string"===typeof e?e.split(" ").map(e=>e.startsWith("$t:")?We.t(`${t}-${i}-${e.substring(3)}`):e).join(" "):Object($["isObject"])(e)&&ye()(e).length>0||$e()(e)&&e.length>0?Xl(e,t,i):e};return $e()(e)?e.map(s):Object($["mapValues"])(e,s)}function Yl({commit:e},t){const i=t.toUpperCase();let n=null;switch(t){case"interfaces":n=wc.getInterfaces();break;case"layouts":n=wc.getLayouts();break;case"pages":n=wc.getPages();break;default:}return n.then(e=>e.data).then(e=>{return e.forEach(e=>{const{id:i,translation:s}=e;s&&Object($["forEach"])(s,(e,s)=>{We.mergeLocaleMessage(s,Object($["mapKeys"])(e,(e,s)=>`${t}-${i}-${s}`))})}),e}).then(e=>e.map(e=>Xl(e,t,e.id))).then(t=>{e(s[`SET_${i}`],t)})}function Zl({dispatch:e}){return Ee.a.all([e("getExtensions","interfaces"),e("getExtensions","layouts"),e("getExtensions","pages")])}const Jl={[la](e,t){e.interfaces=Object($["keyBy"])(t,"id")},[ra](e,t){e.layouts=Object($["keyBy"])(t,"id")},[ca](e,t){e.pages=Object($["keyBy"])(t,"id")}};var er=Jl;const tr={layouts:{},interfaces:{},pages:{}};var ir={state:tr,actions:o,mutations:er};function sr({commit:e},{collection:t,field:i}){e(sa,{collection:t,field:i})}function nr({commit:e},{collection:t,field:i}){e(na,{collection:t,field:i})}function ar({commit:e},{collection:t,updates:i}){e(aa,{collection:t,updates:i})}function or({commit:e},{collection:t,field:i}){e(oa,{collection:t,field:i})}async function lr({commit:e}){let{data:t}=await wc.getCollections();k.a.forEach(t,e=>{k.a.isEmpty(e.translation)?ye()(Xe).forEach(t=>{We.mergeLocaleMessage(t,{[`collections-${e.collection}`]:Cl()(e.collection)})}):k.a.forEach(e.translation,(t,i)=>{We.mergeLocaleMessage(i,{[`collections-${e.collection}`]:t})})});const{data:i}=await wc.getSettingsFields();t=k.a.keyBy(t,"collection"),t.directus_settings.fields=k.a.keyBy(i,"field"),e(Gn,t)}function rr({commit:e},t){k.a.isEmpty(t.translation)?ye()(Xe).forEach(e=>{We.mergeLocaleMessage(e,{[`collections-${t.collection}`]:Cl()(t.collection)})}):k.a.forEach(t.translation,(e,i)=>{We.mergeLocaleMessage(i,{[`collections-${t.collection}`]:e})}),e(Qn,t)}function cr({commit:e},t){e(Xn,t)}function dr({commit:e},{collection:t,edits:i}){e(Yn,{collection:t,edits:i})}const ur={[Gn](e,t){const i=k.a.mapValues(k.a.keyBy(t,"collection"),e=>{const t=k.a.find(e.fields,{interface:"status"});let i=t&&t.options&&t.options.status_mapping;return i&&"string"===typeof i&&(i=JSON.parse(i)),{...e,status_mapping:i}});k.a.forEach(i,(t,i)=>{b["default"].set(e,i,t)})},[Qn](e,t){if(It()(t.fields).some(e=>"status"===e.type)){const e=It()(t.fields).filter(e=>"status"===e.type)[0];t.status_mapping=e.options.status_mapping}b["default"].set(e,t.collection,t)},[Xn](e,t){b["default"].delete(e,t)},[Yn](e,{collection:t,edits:i}){k.a.forEach(i,(i,s)=>{b["default"].set(e[t],s,i)})},[sa](e,{collection:t,field:i}){b["default"].set(e[t],"fields",{...e[t].fields,[i.field]:i}),"status"===i.type&&b["default"].set(e[t],"status_mapping",i.options.status_mapping)},[na](e,{collection:t,field:i}){b["default"].set(e[t],"fields",{...e[t].fields,[i.field]:i})},[aa](e,{collection:t,updates:i}){i.forEach(i=>{b["default"].set(e[t].fields,i.field,{...e[t].fields[i.field],...i})})},[oa](e,{collection:t,field:i}){const s=Ii()({},e[t].fields);delete s[i],b["default"].set(e[t],"fields",s)}};var hr=ur;const pr={};var mr={actions:l,mutations:hr,state:pr};function fr({commit:e}){e(Zn)}function vr({commit:e},{collection:t,primaryKey:i,savedValues:s}){e(ea,{collection:t,primaryKey:i,savedValues:s})}function _r({commit:e,state:t},{field:i,value:s}){return t.savedValues[i]==s?e(ta,{field:i}):e(ia,{field:i,value:s})}function gr({commit:e},t){return e(ta,{field:t})}function yr({commit:e,state:t,rootState:i},s){const n={...t,...s};return"directus_users"===n.collection&&n.primaryKey==i.currentUser.id&&e(ga,n.values),"+"===n.primaryKey?wc.createItem(n.collection,n.values).then(t=>{return e(Jn),t}):n.collection.startsWith("directus_")?wc.updateItem(n.collection,n.primaryKey,n.values).then(t=>{return e(Jn),t}):wc.patch("/items/"+n.collection+"/"+n.primaryKey,n.values,{fields:"*.*.*.*"}).then(t=>{return e(Jn),t})}function br(e){const t=e.collection&&e.collection.length>0,i=e.primaryKey&&e.primaryKey.length>0,s=e.values&&ye()(e.values).length>0,n=e.saving;return t&&i&&s&&!n||!1}const $r={[Zn](e){e.saving=!1,e.error=null,e.collection=null,e.primaryKey=null,e.values={}},[Jn](e){e.saving=!1,e.error=null,e.collection=null,e.primaryKey=null},[ea](e,{collection:t,primaryKey:i,savedValues:s}){e.collection=t,e.primaryKey=i,e.savedValues=s,e.values={}},[ta](e,{field:t}){b["default"].delete(e.values,t)},[ia](e,{field:t,value:i}){b["default"].set(e.values,t,i)}};var kr=$r;const wr={collection:null,primaryKey:null,values:{},savedValues:{}};var Cr={actions:r,mutations:kr,state:wr,getters:c};function xr({commit:e},{collection:t,permission:i}){e(pa,{collection:t,permission:i})}function Ir({commit:e,rootState:t}){const i=t.collections,s=!0===t.currentUser.admin,n=s?Ji:Zi,a=Object($["mapValues"])(i,e=>{return e.status_mapping?{statuses:Object($["mapValues"])(e.status_mapping,()=>n),$create:n}:{...n,$create:n}});return s?(e(ha,a),Ee.a.resolve()):wc.getMyPermissions().then(e=>e.data).then(t=>{return t.forEach(e=>{const{collection:t,status:i}=e;return i?"$create"===i?a[t].$create=e:a[t].statuses[i]=e:a[t]={...a[t],...e}}),e(ha,a),a}).then(t=>{Object($["forEach"])(t,t=>{if(t.read_field_blacklist&&t.read_field_blacklist.length>0){const s=i[t.collection];e(Yn,{collection:t.collection,edits:{fields:Object($["omit"])(s.fields,t.read_field_blacklist)}})}})})}const Sr={[ha](e,t){Object($["forEach"])(t,(t,i)=>{b["default"].set(e,i,t)})},[pa](e,{collection:t,permission:i}){b["default"].set(e,t,i)}};var Mr=Sr,Er={actions:d,mutations:Mr,state:{}};const Tr="⚙️ Set Settings",Nr="⚙️ Set Setting";var Fr={[Tr](e,t){const i=k.a.keyBy(t,"key");e.values=k.a.mapValues(i,"value"),e.primaryKeys=k.a.mapValues(i,"id")},[Nr](e,{id:t,key:i,value:s}){e.values[i]=s,e.primaryKeys[i]=t}};async function Or({commit:e}){const{data:t}=await wc.getSettings();e(Tr,t)}function qr({dispatch:e},t){return Ee.a.all(ye()(t).map(i=>e("setSetting",{key:i,value:t[i]})))}async function jr({commit:e,state:t},{key:i,value:s}){const n=t.primaryKeys[i];if(k.a.isNil(n)){const{data:t}=await wc.createItem("directus_settings",{key:i,value:s});e(Nr,t)}else{const{data:t}=await wc.updateItem("directus_settings",n,{value:s});e(Nr,t)}}var Ar={actions:u,mutations:Fr,state:{values:{},primaryKeys:{}}};function Dr({commit:e}){return wc.getUsers({fields:["id","first_name","last_name","title","status","timezone","roles.*","avatar.*","company"]}).then(e=>e.data).then(e=>e.map(e=>({...e,roles:e.roles.map(({role:e})=>e)}))).then(t=>{e(xa,t)})}var Br={[xa](e,t){It()(t).forEach(t=>{b["default"].set(e,t.id,t)})}};const Pr={};var Lr={actions:h,mutations:Br,state:Pr};function Rr({commit:e}){return wc.getRelations({limit:-1}).then(e=>e.data).then(t=>e(ya,t))}function Vr({commit:e},t){e(ba,t)}function Ur({commit:e},t){e($a,t)}function Kr(e,t,{collections:i}){return function(t,s){const n=e.filter(e=>e.collection_many===t&&e.field_many===s),a=n?n[n.length-1]:null;return a?{id:a.id,collection_many:i[a.collection_many],collection_one:i[a.collection_one],field_many:i[a.collection_many].fields[a.field_many],field_one:i[a.collection_one].fields[a.field_one]}:null}}function zr(e,t,{collections:i}){return function(s,n){const a=e.filter(e=>e.collection_one===s&&e.field_one===n),o=a?a[a.length-1]:null;if(o&&null!=o.junction_field){const e=t.m2o(o.collection_many,o.junction_field);return{id:o.id,collection_many:i[o.collection_many],collection_one:i[o.collection_one],field_many:i[o.collection_many].fields[o.field_many],field_one:i[o.collection_one].fields[o.field_one],junction:e}}return o?{id:o.id,collection_many:i[o.collection_many],collection_one:i[o.collection_one],field_many:i[o.collection_many].fields[o.field_many],field_one:i[o.collection_one].fields[o.field_one]}:null}}var Wr={[ya](e,t){Object($["forEach"])(t,(t,i)=>{b["default"].set(e,i,t)})},[ba](e,t){b["default"].set(e,e.length,t)},[$a](e,t){const i=e.map(e=>{return e.id===t.id?t:e});Object($["forEach"])(i,(t,i)=>{b["default"].set(e,i,t)})}};const Hr=[];var Gr={actions:p,mutations:Wr,getters:m,state:Hr},Qr={[ka](e,t){e.apiVersion=t.apiVersion,e.phpVersion=t.phpVersion,e.maxUploadSize=t.maxUploadSize}};function Xr({commit:e}){wc.serverInfo().then(e=>e.data).then(t=>{e(ka,{apiVersion:Object($["get"])(t,"api.version"),phpVersion:Object($["get"])(t,"server.general.php_version"),maxUploadSize:Object($["get"])(t,"server.max_upload_size")})})}const Yr={apiVersion:null,phpVersion:null,maxUploadSize:null,databaseVendor:"mysql"};var Zr={state:Yr,mutations:Qr,actions:f};const Jr={[Ia](e,t){e.queue.push(t)},[Sa](e,t){e.queue=e.queue.filter(e=>e.id!==t)}};var ec=Jr;const tc={queue:[]};var ic={state:tc,mutations:ec},sc={hydrated:!1,hydratingError:null,latency:[],currentUser:{},bookmarks:[],sidebars:{nav:!1,info:!1},queue:[]},nc=i("0a0d"),ac=i.n(nc);function oc({commit:e}){const t=performance.now(),i=ac()();wc.request("get","/server/ping",{},{},!0).then(()=>{const s=performance.now(),n=s-t;e(ma,{date:i,latency:n})}).catch(s=>{const n=performance.now(),a=n-t;return-2===s.code?e(ma,{date:i,latency:a}):e(ma,{date:i,latency:-1})})}function lc({commit:e}){return wc.getMe({fields:["id","avatar.*","email","first_name","last_name","locale","roles.*"]}).then(e=>e.data).then(e=>{return{...e,roles:e.roles.map(e=>e.role),admin:e.roles.map(e=>e.role).includes(1)}}).then(t=>e(_a,t))}function rc({commit:e,state:t},{page:i}){const s=t.currentUser.id,n={last_page:i};return e(ga,n),wc.request("PATCH",`/users/${s}/tracking/page`,{},n)}function cc({commit:e}){return wc.getMyBookmarks().then(t=>{return e(zn,t),t})}function dc({commit:e},t){return wc.createCollectionPreset(t).then(t=>{const i=t.data;return e(Wn,i),i})}function uc({commit:e},t){return e(Hn,t),wc.deleteCollectionPreset(t).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}function hc({commit:e},{id:t,desc:i}){e(fa,{id:t,desc:i})}function pc({commit:e},t){e(va,t)}function mc(e){let t=e.latency[e.latency.length-1];return t?(t=t.latency,t>0&&t<200?4:t>=200&&t<500?3:t>=500&&t<1e3?2:t>=1e3?1:0):0}const fc={[da](e,t){e.hydrated=t},[ua](e,t){e.hydrated=!1,e.hydratingError=t},[ma](e,t){const i=[...e.latency];i.push(t),i.length>200&&i.shift(),e.latency=i},[_a](e,t){e.currentUser=t},[ga](e,t){e.currentUser={...e.currentUser,...t}},[zn](e,t){e.bookmarks=t},[Wn](e,t){e.bookmarks=[...e.bookmarks,t]},[Hn](e,t){e.bookmarks=e.bookmarks.filter(e=>e.id!==t)},[wa](e,t=!e.sidebars.nav){e.sidebars.nav=t},[Ca](e,t=!e.sidebars.info){e.sidebars.info=t},[fa](e,{id:t,desc:i}){e.queue=[...e.queue,{id:t,desc:i}]},[va](e,t){e.queue=e.queue.filter(e=>e.id!==t)}};var vc=fc;b["default"].use(fo["a"]);const _c=!1,gc=new fo["a"].Store({state:sc,actions:v,getters:_,mutations:vc,strict:_c,modules:{auth:Ql,collections:mr,extensions:ir,edits:Cr,permissions:Er,users:Lr,relations:Gr,serverInfo:Zr,notifications:ic,settings:Ar}}),yc=JSON.parse(Il()(gc.state));var bc=gc;function $c(){const e=Ii()({},yc);e.auth.url=gc.state.auth.url,gc.replaceState(e)}const kc=new kl.a({storage:window.sessionStorage});if(kc.onAutoRefreshError=function(e){bc.dispatch("logout",e)},kc.loggedIn){const e=window.__DirectusConfig__,t=e?k.a.mapKeys(e.api,(e,t)=>t.endsWith("/")?t:t+"/"):null;bc.commit(Pn,{project:kc.project,token:kc.token,url:kc.url,projectName:t[kc]||t[kc.url+"/"+kc.project+"/"]||Cl()(Cc(kc.url))})}var wc=kc;function Cc(e){let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0],t}var xc=i("8dee"),Ic=i.n(xc);const Sc={delay:5e3},Mc=function(e){const t={...Sc,...e,id:Ic.a.generate()};bc.commit(Ia,t)};var Ec=Mc;const Tc=e=>{Object($["isEmpty"])(e.message)||console.error(e.message),Object($["isUndefined"])(e.error)||console.error(e.error),Object($["isEmpty"])(e.notify)||Ec({title:e.notify,color:"red",iconMain:"error"})};var Nc=Tc;const Fc=e=>{Object($["isEmpty"])(e.notify)||Ec({title:e.notify,color:e.color||"orange",iconMain:e.iconMain||"warning"})};var Oc=Fc;const qc=new b["default"];y()(qc,{on:{get(){return qc.$on}},off:{get(){return qc.$off}},emit:{get(){return qc.$emit}},once:{get(){return qc.$once}}}),qc.on("error",Nc),qc.on("warning",Oc),qc.install=(e=>{Object.defineProperty(e.prototype,"$events",{value:qc})});var jc=qc,Ac=i("caa8");let Dc=null;function Bc(e){const t=+e.state.settings.auto_sign_out||60;Dc=(new Ac["a"]).whenNotInteractive().within(t).do(()=>{e.dispatch("logout",{code:101}),Dc.stop()}).start()}var Pc=i("9224");function Lc(){return Ee.a.all([bc.dispatch("latency"),bc.dispatch("getCurrentUser"),bc.dispatch("getCollections"),bc.dispatch("getSettings"),bc.dispatch("getAllExtensions"),bc.dispatch("getBookmarks"),bc.dispatch("getUsers"),bc.dispatch("getRelations"),bc.dispatch("getServerInfo")]).then(()=>bc.dispatch("getPermissions")).then(()=>{ye()(Xe).includes(bc.state.currentUser.locale)&&Qe(bc.state.currentUser.locale)}).then(()=>{Tl(),Bc(bc)}).then(()=>{const e=bc.state.currentUser.admin;e&&navigator.onLine&&T.a.post("https://telemetry.directus.io/count",{type:"app",url:window.location.origin,version:Pc["a"]}).catch(()=>{})}).then(()=>{bc.commit(da,new Date)}).catch(e=>{bc.commit(ua,e),console.error(e)})}var Rc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"collections"},[i("v-header",{attrs:{breadcrumb:[{name:e.$t("collections"),path:"/collections"}]}}),0===e.items.length?i("v-error",{attrs:{title:e.$t("no_collections"),body:e.$t("no_collections_body"),icon:"error_outline"}}):i("v-table",{attrs:{items:e.items,columns:e.fields,"primary-key-field":"collection",link:"__link__"},on:{select:e.select}})],1)},Vc=[],Uc={name:"collections",metaInfo(){return{title:this.$t("collections")}},components:{VError:Yi},computed:{items(){return null==this.collections?[]:It()(this.collections).filter(e=>0==e.hidden&&1==e.managed&&!1===e.collection.startsWith("directus_")).filter(e=>{return e.status_mapping?this.$lodash.some(this.permissions[e.collection].statuses,e=>"none"!==e.read):"none"!==this.permissions[e.collection].read}).map(e=>({...e,collection:this.$t(`collections-${e.collection}`),__link__:`/collections/${e.collection}`}))},fields(){return[{field:"collection",name:this.$t("collection")},{field:"note",name:this.$t("note")}]},collections(){return this.$store.state.collections},permissions(){return this.$store.state.permissions}},methods:{select(e){this.selection=e}}},Kc=Uc,zc=(i("ecee"),Object(U["a"])(Kc,Rc,Vc,!1,null,"cc403700",null)),Wc=zc.exports,Hc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):i("div",{staticClass:"route-item-listing"},[i("v-header",{attrs:{"info-toggle":"","item-detail":!1,breadcrumb:e.breadcrumb}},[i("template",{slot:"title"},[i("button",{staticClass:"bookmark",class:e.currentBookmark?"active":null,attrs:{disabled:e.currentBookmark},on:{click:function(t){e.bookmarkModal=!0}}},[i("i",{staticClass:"material-icons"},[e._v("\n          "+e._s(e.currentBookmark?"bookmark":"bookmark_border")+"\n        ")])]),e.currentBookmark?i("div",{staticClass:"bookmark-name no-wrap"},[e._v("\n        ("+e._s(e.currentBookmark.title)+")\n      ")]):e._e()]),i("v-search-filter",{directives:[{name:"show",rawName:"v-show",value:e.selection&&0===e.selection.length&&!e.emptyCollection,expression:"selection && selection.length === 0 && !emptyCollection"}],attrs:{filters:e.filters,"search-query":e.searchQuery,"field-names":e.fieldNames,placeholder:e.resultCopy},on:{filter:function(t){return e.updatePreferences("filters",t)},search:function(t){return e.updatePreferences("search_query",t)},"clear-filters":e.clearFilters}}),i("template",{slot:"buttons"},[e.editButton&&!e.activity?i("v-header-button",{key:"edit",attrs:{icon:"mode_edit",color:"warning",disabled:!e.editButtonEnabled,label:e.$t("batch"),to:e.batchURL}}):e._e(),e.deleteButton&&!e.activity?i("v-header-button",{key:"delete",attrs:{icon:"delete_outline",color:"danger",disabled:!e.deleteButtonEnabled,label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}):e._e(),e.addButton&&!e.activity?i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new"),to:"/collections/"+e.collection+"/+"}}):e._e()],1)],2),e.preferences?i("v-items",{ref:"listing",attrs:{collection:e.collection,filters:e.filters,"search-query":e.searchQuery,"view-query":e.viewQuery,"view-type":e.viewType,"view-options":e.viewOptions,selection:e.activity?null:e.selection,links:""},on:{fetch:function(t){e.meta=t},options:e.setViewOptions,select:function(t){e.selection=t},query:e.setViewQuery}}):e._e(),e.preferences?i("v-info-sidebar",[i("template",{slot:"system"},[i("v-select",{attrs:{id:"layout",options:e.layoutNames,value:e.viewType,name:"layout"},on:{input:function(t){return e.updatePreferences("view_type",t)}}})],1),i("v-ext-layout-options",{key:e.collection+"-"+e.viewType,attrs:{type:e.viewType,collection:e.collection,fields:e.$lodash.keyBy(e.fields,"field"),"view-options":e.viewOptions,"view-query":e.viewQuery,selection:e.selection,link:"__link__"},on:{query:e.setViewQuery,options:e.setViewOptions}})],2):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$tc("batch_delete_confirm",e.selection.length,{count:e.selection.length}),color:"danger","confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.bookmarkModal?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{message:e.$t("name_bookmark")},on:{cancel:e.cancelBookmark,confirm:e.saveBookmark},model:{value:e.bookmarkTitle,callback:function(t){e.bookmarkTitle=t},expression:"bookmarkTitle"}})],1):e._e()],1)},Gc=[],Qc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"searchFilter",staticClass:"search-filter",class:{open:e.open}},[i("v-header-button",{staticClass:"toggle",attrs:{alert:e.hasFilters,icon:"filter_list","no-background":""},on:{click:function(t){e.open=!e.open}}},[e._v("Filter")]),i("div",{staticClass:"wrapper"},[i("i",{staticClass:"material-icons"},[e._v("search")]),i("input",{ref:"searchInput",staticClass:"search",class:{"has-filters":e.hasFilters},attrs:{placeholder:e.placeholder||e.$t("search"),type:"text"},domProps:{value:e.searchQuery},on:{input:function(t){return e.search(t.target.value)}}}),i("transition",{attrs:{name:"fade"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasFilters,expression:"hasFilters"}],staticClass:"clear-filters",class:{"has-filters":e.hasFilters},on:{click:e.clearFilters}},[i("i",{staticClass:"material-icons"},[e._v("close")])])]),i("button",{staticClass:"toggle",class:{"has-filters":e.hasFilters},on:{click:function(t){e.open=!e.open}}},[i("i",{staticClass:"material-icons"},[e._v("filter_list")])])],1),i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"dropdown"},[i("div",{staticClass:"search field"},[i("v-input",{attrs:{placeholder:e.placeholder||e.$t("search"),value:e.searchQuery,type:"search","icon-left":"search"},on:{input:e.search}})],1),e._l(e.filters,function(t,s){return i("div",{key:s,staticClass:"field"},[i("invisible-label",{attrs:{"html-for":"filter-"+s}},[e._v("\n          "+e._s(e.fields[t.field])+" "+e._s(e.operators[t.operator])+"\n        ")]),i("div",{staticClass:"name"},[i("p",[e._v(e._s(e.fields[t.field]))]),i("span",[e._v("\n            "+e._s(e.$t(e.operators[t.operator]))+"\n            "),i("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")]),i("select",{on:{change:function(t){return e.updateFilter(s,"operator",t.target.value)}}},e._l(e.operators,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v(e._s(e.$t(t)))])}),0)]),i("button",{staticClass:"remove",on:{click:function(t){return e.deleteFilter(s)}}},[e._v("\n            "+e._s(e.$t("remove"))+"\n          ")])]),i("v-input",{attrs:{autofocus:"",id:"filter-"+s,value:t.value,type:"text"},on:{input:function(t){return e.updateFilter(s,"value",t)}}})],1)}),i("div",{staticClass:"field"},[i("invisible-label",{attrs:{"html-for":"add"}},[e._v(e._s(e.$t("add_field_filter")))]),i("v-select",{attrs:{id:"add",icon:"add_circle",placeholder:e.$t("add_field_filter"),options:e.fields,"default-value":""},on:{input:e.addFilter}})],1)],2)]),e.open?i("v-blocker",{staticClass:"blocker",attrs:{"z-index":18},on:{click:function(t){e.open=!e.open}}}):e._e()],1)},Xc=[],Yc={name:"search-filter",components:{VBlocker:za},props:{fieldNames:{type:Array,default:()=>[]},filters:{type:Array,default:()=>[]},searchQuery:{type:String,default:""},placeholder:{type:String,default:null}},data(){return{open:!1}},computed:{operators(){return{eq:"equal_to",neq:"not_equal_to",lt:"less_than",lte:"less_than_equal",gt:"greater_than",gte:"greater_than_equal",in:"in_list",nin:"not_in_list",null:"is_null",nnull:"is_not_null",contains:"contains",ncontains:"not_contains",empty:"is_empty",nempty:"not_empty",has:"related_entries",nhas:"no_related_entries"}},hasFilters(){return!!(this.filters&&this.filters.length>0||this.searchQuery)},fields(){const e={};return this.fieldNames.forEach(t=>{e[t]=this.$helpers.formatTitle(t)}),e}},created(){this.search=this.$lodash.debounce(this.search,300),this.updateFilter=this.$lodash.debounce(this.updateFilter,300)},mounted(){window.addEventListener("click",this.closeFilter)},beforeDestroy(){window.removeEventListener("click",this.closeFilter)},methods:{search(e){this.$emit("search",e)},addFilter(e){this.$emit("filter",[...this.filters,{field:e,operator:"contains",value:""}])},updateFilter(e,t,i){const s=this.$lodash.cloneDeep(this.filters);s[e][t]=i,this.$emit("filter",s)},deleteFilter(e){const t=this.$lodash.cloneDeep(this.filters);t.splice(e,1),this.$emit("filter",t)},clearFilters(){this.$emit("clear-filters"),this.open&&(this.open=!1)},closeFilter(e){const t=this.$refs.searchFilter.contains(e.target);this.open&&!1===t&&(this.open=!1)}}},Zc=Yc,Jc=(i("3980"),Object(U["a"])(Zc,Qc,Xc,!1,null,"df520028",null)),ed=Jc.exports,td=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"not-found"},[i("v-header",{attrs:{title:e.$t("page_not_found")}}),i("v-error",{attrs:{title:e.$t("page_not_found"),body:e.$t("page_not_found_body"),icon:"not_interested"}})],1)},id=[],sd={name:"not-found",metaInfo(){return{title:this.$t("page_not_found")}},components:{VError:Yi}},nd=sd,ad=(i("0ae0"),Object(U["a"])(nd,td,id,!1,null,"615a2524",null)),od=ad.exports,ld={name:"items",metaInfo(){return{title:this.$helpers.formatTitle(this.collection)}},components:{VSearchFilter:ed,VNotFound:od},data(){return{selection:[],meta:null,preferences:null,confirmRemove:!1,bookmarkModal:!1,bookmarkTitle:"",notFound:!1}},computed:{activity(){return"directus_activity"===this.collection},breadcrumb(){if("directus_users"===this.collection)return[{name:this.$t("user_directory"),path:"/users"}];if("directus_files"===this.collection)return[{name:this.$t("file_library"),path:"/files"}];const e=[];return this.collection.startsWith("directus_")?e.push({name:this.$helpers.formatTitle(this.collection.substr(9)),path:`/${this.collection.substring(9)}`}):e.push({name:this.$t("collections"),path:"/collections"},{name:this.$t(`collections-${this.collection}`),path:`/collections/${this.collection}`}),e},fields(){const e=this.$store.state.collections[this.collection].fields;return It()(e).map(e=>({...e,name:this.$helpers.formatTitle(e.field)}))},batchURL(){return`/collections/${this.collection}/${this.selection.map(e=>e[this.primaryKeyField]).join(",")}`},currentBookmark(){if(!this.preferences)return;const e=this.$store.state.bookmarks,t={collection:this.preferences.collection,search_query:this.preferences.search_query,filters:this.preferences.filters,view_options:this.preferences.view_options,view_type:this.preferences.view_type,view_query:this.preferences.view_query},i=e.filter(e=>{const i={collection:e.collection,search_query:e.search_query,filters:e.filters,view_options:e.view_options,view_type:e.view_type,view_query:e.view_query};return this.$lodash.isEqual(i,t)})[0];return i||null},collection(){return this.$route.params.collection},collectionInfo(){return this.$store.state.collections[this.collection]},emptyCollection(){return this.meta&&0===this.meta.total_count||!1},filters(){return this.preferences&&this.preferences.filters||[]},searchQuery(){return this.preferences&&this.preferences.search_query||""},viewType(){return this.preferences&&this.preferences.view_type||"tabular"},viewQuery(){if(!this.preferences)return{};const e=this.preferences.view_query&&this.preferences.view_query[this.viewType]||{},t=this.fields.map(e=>e.field);if(e.fields&&(e.fields=e.fields.split(",").filter(e=>t.includes(e)).join(",")),e.sort){const i=e.sort.startsWith("-")?e.sort.substring(1):e.sort;!1===t.includes(i)&&(e.sort=this.primaryKeyField)}return e},viewOptions(){return this.preferences&&this.preferences.view_options&&this.preferences.view_options[this.viewType]||{}},resultCopy(){if(!this.meta||!this.preferences)return this.$t("loading");const e=!this.$lodash.isEmpty(this.preferences.filters)||!this.$lodash.isNil(this.preferences.search_query)&&this.preferences.search_query.length>0;return e?this.$tc("item_count_filter",this.meta.result_count,{count:this.$n(this.meta.result_count)}):this.$tc("item_count",this.meta.total_count,{count:this.$n(this.meta.total_count)})},fieldNames(){return this.fields.map(e=>e.field)},layoutNames(){if(!this.$store.state.extensions.layouts)return{};const e={};return ye()(this.$store.state.extensions.layouts).forEach(t=>{e[t]=this.$store.state.extensions.layouts[t].name}),e},statusField(){return this.fields?(this.$lodash.find(It()(this.fields),e=>"status"===e.type.toLowerCase())||{}).field:null},softDeleteStatus(){if(!this.collectionInfo.status_mapping)return null;const e=ye()(this.collectionInfo.status_mapping),t=this.$lodash.findIndex(It()(this.collectionInfo.status_mapping),{soft_delete:!0});return e[t]},userCreatedField(){return this.fields?(this.$lodash.find(It()(this.fields),e=>"user_created"===e.type.toLowerCase())||{}).field:null},primaryKeyField(){return this.fields?this.$lodash.find(this.fields,{primary_key:!0}).field:null},permission(){return this.$store.state.permissions[this.collection]},addButton(){return!!this.$store.state.currentUser.admin||(this.statusField?It()(this.permission.statuses).some(e=>"full"===e.create)||"full"===this.permission.$create.create:"full"===this.permission.create)},deleteButton(){return!!this.selection&&0!==this.selection.length},deleteButtonEnabled(){if(this.$store.state.currentUser.admin)return!0;const e=this.$store.state.currentUser.id;let t=!0;return this.selection.forEach(i=>{const s=this.statusField?i[this.statusField]:null,n=this.statusField?this.permission.statuses[s]:this.permission,a=i[this.userCreatedField];if("none"===n.delete)return t=!1;if("mine"===n.delete&&a!==e)return t=!1;if("role"===n.delete){const e=this.$store.state.users[a].roles,i=this.$store.state.currentUser.roles;let s=!1;if(e.forEach(e=>{i.includes(e)&&(s=!0)}),!1===s)return t=!1}}),t},editButton(){return!!(this.selection&&this.selection.length>1)},editButtonEnabled(){const e=this.$store.state.currentUser.id;let t=!0;return!!this.$store.state.currentUser.admin||(this.selection.forEach(i=>{const s=this.statusField?i[this.statusField]:null,n=this.statusField?this.permission.statuses[s]:this.permission,a=i[this.userCreatedField];if("none"===n.update)return t=!1;if("mine"===n.update&&a!==e)return t=!1;if("role"===n.update){const e=this.$store.state.users[a].roles,i=this.$store.state.currentUser.roles;let s=!1;if(e.forEach(e=>{i.includes(e)&&(s=!0)}),!1===s)return t=!1}}),t)}},methods:{cancelBookmark(){this.bookmarkTitle="",this.bookmarkModal=!1},setViewQuery(e){const t={...this.preferences.view_query,[this.viewType]:{...this.viewQuery,...e}};this.updatePreferences("view_query",t)},setViewOptions(e){const t={...this.preferences.view_options,[this.viewType]:{...this.viewOptions,...e}};this.updatePreferences("view_options",t)},updatePreferences(e,t,i=!1){i&&(t={...this.preferences[e],...t}),this.$set(this.preferences,e,t);const s=null==this.preferences.user;if(s)return this.createCollectionPreset();const n=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:n}),this.$api.updateCollectionPreset(this.preferences.id,{[e]:t}).then(()=>{this.$store.dispatch("loadingFinished",n)}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},createCollectionPreset(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e});const t={...this.preferences};return delete t.id,this.$api.createCollectionPreset({...t,collection:this.collection,user:this.$store.state.currentUser.id}).then(({data:t})=>{this.$store.dispatch("loadingFinished",e),this.$set(this.preferences,"id",t.id),this.$set(this.preferences,"user",t.user)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},clearFilters(){this.updatePreferences("filters",null),this.updatePreferences("search_query",null)},remove(){const e=this.$helpers.shortid.generate();let t;this.$store.dispatch("loadingStart",{id:e});const i=this.selection.map(e=>e[this.primaryKeyField]);t=this.softDeleteStatus?this.$api.updateItem(this.collection,i.join(","),{[this.statusField]:this.softDeleteStatus}):this.$api.deleteItems(this.collection,this.selection.map(e=>e[this.primaryKeyField])),t.then(()=>{this.$store.dispatch("loadingFinished",e),this.$refs.listing.getItems(),this.selection=[],this.confirmRemove=!1}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},saveBookmark(){const e={...this.preferences};e.user=this.$store.state.currentUser.id,e.title=this.bookmarkTitle,delete e.id,delete e.role,e.collection||(e.collection=this.collection);const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("saveBookmark",e).then(()=>{this.$store.dispatch("loadingFinished",t),this.bookmarkModal=!1,this.bookmarkTitle=""}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},watch:{$route(){this.$route.query.b&&this.$router.replace({path:this.$route.path})}},beforeRouteEnter(e,t,i){const{collection:s}=e.params,n=bc.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return i(e=>e.notFound=!0);if(n&&n.single)return i(`/collections/${s}/1`);const a=Ic.a.generate();return bc.dispatch("loadingStart",{id:a}),wc.getMyListingPreferences(s).then(e=>{bc.dispatch("loadingFinished",a),i(t=>{t.$data.preferences=e})}).catch(e=>{bc.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},beforeRouteUpdate(e,t,i){const{collection:s}=e.params;this.preferences=null,this.selection=[],this.meta={},this.notFound=!1;const n=this.$store.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return this.notFound=!0,i();if(n&&n.single)return i(`/collections/${s}/1`);const a=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:a}),wc.getMyListingPreferences(s).then(e=>{this.$store.dispatch("loadingFinished",a),this.preferences=e,i()}).catch(e=>{this.$store.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},rd=ld,cd=(i("735d"),Object(U["a"])(rd,Hc,Gc,!1,null,"cd7dabac",null)),dd=cd.exports,ud=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):i("div",{staticClass:"route-file-library"},[i("v-header",{attrs:{"info-toggle":"",breadcrumb:e.breadcrumb}},[i("template",{slot:"title"},[i("button",{staticClass:"bookmark",class:e.currentBookmark?"active":null,attrs:{disabled:e.currentBookmark},on:{click:function(t){e.bookmarkModal=!0}}},[i("i",{staticClass:"material-icons"},[e._v("\n          "+e._s(e.currentBookmark?"bookmark":"bookmark_border")+"\n        ")])]),e.currentBookmark?i("div",{staticClass:"bookmark-name no-wrap"},[e._v("\n        ("+e._s(e.currentBookmark.title)+")\n      ")]):e._e()]),i("v-search-filter",{directives:[{name:"show",rawName:"v-show",value:0===e.selection.length&&!e.emptyCollection,expression:"selection.length === 0 && !emptyCollection"}],attrs:{filters:e.filters,"search-query":e.searchQuery,"field-names":e.fieldNames,placeholder:e.resultCopy},on:{filter:function(t){return e.updatePreferences("filters",t)},search:function(t){return e.updatePreferences("search_query",t)},"clear-filters":e.clearFilters}}),i("template",{slot:"buttons"},[e.selection.length>1?i("v-header-button",{key:"edit",attrs:{icon:"mode_edit",color:"warning",label:e.$t("batch"),to:"/collections/"+e.collection+"/"+e.selection.join(",")}}):e._e(),e.selection.length?i("v-header-button",{key:"delete",attrs:{icon:"delete_outline",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}):e._e(),i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.newModal=!0}}})],1)],2),e.preferences?i("v-items",{key:e.key,ref:"listing",attrs:{collection:e.collection,filters:e.filters,"search-query":e.searchQuery,"view-query":e.viewQuery,"view-type":e.viewType,"view-options":e.viewOptions,selection:e.selection,links:""},on:{fetch:function(t){e.meta=t},options:e.setViewOptions,select:function(t){e.selection=t},query:e.setViewQuery}}):e._e(),e.preferences?i("v-info-sidebar",[i("template",{slot:"system"},[i("label",{staticClass:"style-4",attrs:{for:"listing"}},[e._v(e._s(e.$t("view_type")))]),i("v-select",{attrs:{id:"listing",options:e.layoutNames,value:e.viewType,name:"listing"},on:{input:function(t){return e.updatePreferences("view_type",t)}}})],1),i("v-ext-layout-options",{key:e.collection+"-"+e.viewType,attrs:{type:e.viewType,collection:e.collection,fields:e.$lodash.keyBy(e.fields,"field"),"view-options":e.viewOptions,"view-query":e.viewQuery,selection:e.selection,link:"__link__"},on:{query:e.setViewQuery,options:e.setViewOptions}})],2):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$tc("batch_delete_confirm",e.selection.length,{count:e.selection.length}),color:"danger","confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.bookmarkModal?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{message:e.$t("name_bookmark")},on:{cancel:e.cancelBookmark,confirm:e.saveBookmark},model:{value:e.bookmarkTitle,callback:function(t){e.bookmarkTitle=t},expression:"bookmarkTitle"}})],1):e._e(),e.newModal?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("file_upload"),buttons:{done:{text:e.$t("done")}}},on:{done:function(t){e.newModal=!1},close:function(t){e.newModal=!1}}},[i("div",{staticClass:"modal-body"},[i("v-upload",{on:{upload:function(t){e.key=e.$helpers.shortid.generate()}}})],1)])],1):e._e()],1)},hd=[],pd={name:"route-file-library",metaInfo(){return{title:this.$t("file_library")}},components:{VSearchFilter:ed,VNotFound:od},data(){return{selection:[],meta:null,preferences:null,confirmRemove:!1,bookmarkModal:!1,bookmarkTitle:"",notFound:!1,newModal:!1,key:"init"}},computed:{breadcrumb(){return[{name:this.$t("file_library"),path:"/files"}]},fields(){const e=this.$store.state.collections[this.collection].fields;return It()(e).map(e=>({...e,name:this.$helpers.formatTitle(e.field)}))},currentBookmark(){if(!this.preferences)return;const e=this.$store.state.bookmarks,t={collection:this.preferences.collection,search_query:this.preferences.search_query,filters:this.preferences.filters,view_options:this.preferences.view_options,view_type:this.preferences.view_type,view_query:this.preferences.view_query},i=e.filter(e=>{const i={collection:e.collection,search_query:e.search_query,filters:e.filters,view_options:e.view_options,view_type:e.view_type,view_query:e.view_query};return this.$lodash.isEqual(i,t)})[0];return i||null},collection(){return"directus_files"},emptyCollection(){return this.meta&&0===this.meta.total_count||!1},filters(){return this.preferences&&this.preferences.filters||[]},searchQuery(){return this.preferences&&this.preferences.search_query||""},viewType(){return this.preferences&&this.preferences.view_type||"tabular"},viewQuery(){return this.preferences&&this.preferences.view_query&&this.preferences.view_query[this.viewType]||{}},viewOptions(){return this.preferences&&this.preferences.view_options&&this.preferences.view_options[this.viewType]||{}},resultCopy(){if(!this.meta||!this.preferences)return this.$t("loading");const e=!this.$lodash.isEmpty(this.preferences.filters)||!this.$lodash.isNil(this.preferences.search_query)&&this.preferences.search_query.length>0;return e?this.$tc("item_count_filter",this.meta.result_count,{count:this.$n(this.meta.result_count)}):this.$tc("item_count",this.meta.total_count,{count:this.$n(this.meta.total_count)})},fieldNames(){return this.fields.map(e=>e.field)},layoutNames(){if(!this.$store.state.extensions.layouts)return{};const e={};return ye()(this.$store.state.extensions.layouts).forEach(t=>{e[t]=this.$store.state.extensions.layouts[t].name}),e}},methods:{cancelBookmark(){this.bookmarkTitle="",this.bookmarkModal=!1},setViewQuery(e){const t={...this.preferences.view_query,[this.viewType]:{...this.viewQuery,...e}};this.updatePreferences("view_query",t)},setViewOptions(e){const t={...this.preferences.view_options,[this.viewType]:{...this.viewOptions,...e}};this.updatePreferences("view_options",t)},updatePreferences(e,t,i=!1){i&&(t={...this.preferences[e],...t}),this.$set(this.preferences,e,t);const s=null==this.preferences.user;if(s)return this.createCollectionPreset();const n=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:n}),this.$api.updateCollectionPreset(this.preferences.id,{[e]:t}).then(()=>{this.$store.dispatch("loadingFinished",n)}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},createCollectionPreset(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e});const t={...this.preferences};return delete t.id,this.$api.createCollectionPreset({...t,collection:this.collection,user:this.$store.state.currentUser.id}).then(({data:t})=>{this.$store.dispatch("loadingFinished",e),this.$set(this.preferences,"id",t.id),this.$set(this.preferences,"user",t.user)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},clearFilters(){this.updatePreferences("filters",null),this.updatePreferences("search_query",null)},remove(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteItems(this.collection,this.selection.map(e=>e.id)).then(()=>{this.$store.dispatch("loadingFinished",e),this.$refs.listing.getItems(),this.selection=[]}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})}),this.confirmRemove=!1},saveBookmark(){const e={...this.preferences};e.user=this.$store.state.currentUser.id,e.title=this.bookmarkTitle,delete e.id,delete e.role,e.collection||(e.collection=this.collection);const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("saveBookmark",e).then(()=>{this.$store.dispatch("loadingFinished",t),this.bookmarkModal=!1,this.bookmarkTitle=""}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},watch:{$route(){this.$route.query.b&&this.$router.replace({path:this.$route.path})}},beforeRouteEnter(e,t,i){const s="directus_files",n=bc.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return i(e=>e.notFound=!0);if(n&&n.single)return i(`/collections/${s}/1`);const a=Ic.a.generate();return bc.dispatch("loadingStart",{id:a}),Ee.a.all([wc.getMyListingPreferences(s)]).then(([e])=>({preferences:e})).then(({preferences:e})=>{bc.dispatch("loadingFinished",a),i(t=>{t.$data.preferences=e})}).catch(e=>{bc.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},beforeRouteUpdate(e,t,i){const s="directus_files";this.preferences=null,this.selection=[],this.meta={},this.notFound=!1;const n=this.$store.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return this.notFound=!0,i();if(n&&n.single)return i(`/collections/${s}/1`);const a=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:a}),Ee.a.all([wc.getMyListingPreferences(s)]).then(([e])=>({preferences:e})).then(({preferences:e})=>{this.$store.dispatch("loadingFinished",a),this.preferences=e,i()}).catch(e=>{this.$store.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},md=pd,fd=(i("f2af"),Object(U["a"])(md,ud,hd,!1,null,"dd25fcf0",null)),vd=fd.exports,_d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):e.error?i("div",[i("v-header"),e.error?i("v-error",{attrs:{icon:"error_outline",color:"warning",title:e.$t("server_trouble"),body:e.$t("server_trouble_copy")}}):e._e()],1):null===e.fields?i("div",[i("v-header"),i("v-loader",{attrs:{area:"content"}})],1):i("div",{key:e.collection+"-"+e.primaryKey,staticClass:"edit"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb,"info-toggle":!e.newItem&&!e.batch&&!e.activityDetail,"item-detail":""}},[i("template",{slot:"buttons"},[e.newItem||e.singleItem||"none"===e.permission.delete?e._e():i("v-header-button",{attrs:{icon:"delete_outline",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}),e.batch&&"none"!==e.permission.update?i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:function(t){e.confirmBatchSave=!0}}}):(e.isNew?"none"!==e.permission.create:"none"!==e.permission.update)?i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),options:{stay:e.$t("save_and_stay"),add:e.$t("save_and_add"),copy:e.$t("save_as_copy")},icon:"check",color:"action"},on:{click:function(t){e.singleItem?e.save("stay"):e.save("leave")},input:e.save}}):e._e()],1)],2),e.newItem||e.batch?e._e():i("v-info-sidebar",{attrs:{wide:"","item-detail":""}},[i("div",{staticClass:"tabs"},[i("button",{class:{active:"both"===e.activeTab},on:{click:function(t){e.activeTab="both"}}},[e._v("\n        "+e._s(e.$t("both"))+"\n      ")]),"none"!==e.permission.comment?i("button",{class:{active:"comments"===e.activeTab},on:{click:function(t){e.activeTab="comments"}}},[e._v("\n        "+e._s(e.$t("comments"))+"\n      ")]):e._e(),i("button",{class:{active:"activity"===e.activeTab},on:{click:function(t){e.activeTab="activity"}}},[e._v("\n        "+e._s(e.$t("activity"))+"\n      ")])]),i("v-activity",{attrs:{activity:e.activity,revisions:e.revisions,loading:e.activityLoading,show:e.activeTab,"comment-permission":e.permission.comment},on:{input:e.postComment,revert:function(t){e.revertActivity=t}}})],1),i("v-form",{ref:"form",attrs:{readonly:e.readonly,fields:e.fields,values:e.values,collection:e.collection,"batch-mode":e.batch,permissions:e.permission,"new-item":e.newItem},on:{"unstage-value":e.unstageValue,"stage-value":e.stageValue}}),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.batch?e.$tc("batch_delete_confirm",e.primaryKey.split(",").length,{count:e.primaryKey.split(",").length}):e.$t("delete_are_you_sure"),busy:e.confirmRemoveLoading},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.confirmNavigation?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("unsaved_changes_copy"),"confirm-text":e.$t("keep_editing"),"cancel-text":e.$t("discard_changes")},on:{confirm:function(t){e.confirmNavigation=!1},cancel:function(t){e.$router.push(e.leavingTo),e.confirmNavigation=!1}}})],1):e._e(),e.confirmBatchSave?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("update_confirm",{count:e.primaryKey.split(",").length}),"confirm-text":e.$t("update")},on:{confirm:function(t){return e.save("leave")},cancel:function(t){e.confirmBatchSave=!1}}})],1):e._e(),e.revertActivity?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("preview_and_revert"),buttons:{revert:{text:e.$t("revert"),loading:e.reverting}}},on:{revert:function(t){return e.revertItem(e.revertActivity.revision.id)},close:function(t){e.revertActivity=!1}}},[i("div",{staticClass:"revert"},[i("p",{staticClass:"notice"},[e._v("\n          "+e._s(e.$t("revert_copy",{date:e.$d(e.revertActivity.date,"long")}))+"\n        ")]),i("v-form",{attrs:{readonly:"",values:e.revertActivity.revision.data,fields:e.fields}})],1)])],1):e._e()],1)},gd=[],yd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-activity"},[i("form",{directives:[{name:"show",rawName:"v-show",value:"none"!==e.commentPermission&&"read"!==e.commentPermission&&"activity"!==e.show,expression:"\n      commentPermission !== 'none' &&\n        commentPermission !== 'read' &&\n        show !== 'activity'\n    "}],staticClass:"new-comment",on:{submit:function(t){return t.preventDefault(),e.postComment(t)}}},[i("v-textarea",{staticClass:"textarea",attrs:{rows:5,required:"",placeholder:e.$t("leave_comment")},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),i("button",{attrs:{type:"submit",disabled:0===e.comment.trim().length}},[e._v("\n      "+e._s(e.$t("submit"))+"\n    ")])],1),e._l(e.activityWithChanges,function(t,s){return i("article",{key:t.id,staticClass:"activity-item"},[t.action&&"comment"===t.action.toLowerCase()?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("comment"),expression:"$t('comment')"}],staticClass:"material-icons"},[e._v("message")]):i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$helpers.formatTitle(t.action),expression:"$helpers.formatTitle(activity.action)"}],staticClass:"indicator",class:t.action}),i("div",{staticClass:"content"},["external"!==t.action&&t.changes&&t.name?i("details",[i("summary",{staticClass:"title"},[e._v(e._s(t.name)),t.date?i("span",[e._v("•")]):e._e(),t.date?i("v-timeago",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$d(t.date,"long"),delay:{show:1500,hide:100}},expression:"{\n              content: $d(activity.date, 'long'),\n              delay: { show: 1500, hide: 100 }\n            }"}],staticClass:"date",attrs:{"auto-update":1,since:t.date,locale:e.$i18n.locale}}):e._e(),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Revision Details",expression:"'Revision Details'"}],staticClass:"material-icons chevron"},[e._v("chevron_left")])],1),t.changes?i("div",[i("v-diff",{attrs:{changes:t.changes}}),0!==s?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("revert"),expression:"$t('revert')"}],staticClass:"revert",on:{click:function(i){return e.$emit("revert",t)}}},[i("i",{staticClass:"material-icons"},[e._v("restore")])]):e._e()],1):e._e()]):t.name?i("div",{staticClass:"title"},[e._v("\n        "+e._s(t.name)),t.date?i("span",[e._v("•")]):e._e(),t.date?i("v-timeago",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$d(t.date,"long"),delay:{show:1500,hide:100}},expression:"{\n            content: $d(activity.date, 'long'),\n            delay: { show: 1500, hide: 100 }\n          }"}],staticClass:"date",attrs:{"auto-update":1,since:t.date,locale:e.$i18n.locale}}):e._e()],1):e._e(),t.htmlcomment?i("p",{class:{comment:t.action&&"comment"===t.action.toLowerCase()},domProps:{innerHTML:e._s(t.htmlcomment)}}):e._e()])])})],2)},bd=[],$d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-diff"},e._l(e.changes,function(t){var s=t.field,n=t.before,a=t.after;return i("div",{key:s,staticClass:"change"},[i("p",[e._v(e._s(e.$helpers.formatTitle(s)))]),i("div",{staticClass:"diff"},[i("div",{staticClass:"before",class:{empty:!n}},[e._v("\n        "+e._s(n||"--")+"\n      ")]),i("div",{staticClass:"after",class:{empty:!a}},[e._v(e._s(a||"--"))])])])}),0)},kd=[],wd={name:"v-diff",props:{changes:{type:Object,required:!0}}},Cd=wd,xd=(i("4cca"),Object(U["a"])(Cd,$d,kd,!1,null,"29de59ac",null)),Id=xd.exports,Sd={name:"v-activity",components:{VDiff:Id},data(){return{comment:""}},props:{activity:{type:Array,required:!0},revisions:{type:Object,required:!0},loading:{type:Boolean,default:!1},show:{type:String,default:"both"},commentPermission:{type:String,default:"none"}},computed:{activityFiltered(){switch(this.show){case"comments":return"none"===this.commentPermission?[]:this.activity.filter(e=>null!==e.comment);case"activity":return this.activity.filter(e=>null===e.comment);case"both":default:return this.activity.filter(e=>{return"none"!==this.commentPermission||null==e.comment})}},activityWithChanges(){const e=this.activityFiltered.map((e,t)=>({...e,changes:this.getChanges(e.id,t),revision:this.revisions[e.id]}));if(0===e.length)return[];const t=e&&e[e.length-1];if(t||"comments"===this.show){const i="create"===t.action.toLowerCase(),s="upload"===t.action.toLowerCase();i||s||e.push({action:"external",comment:this.$t("activity_outside_directus"),id:-1})}else e.push({action:"external",comment:this.$t("activity_outside_directus"),id:-1});return e.map(e=>({...e,htmlcomment:this.$helpers.snarkdown((e.comment||"").replace(/#/g,"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")||"")}))}},methods:{getChanges(e,t){const i=this.revisions[e];if(!i)return null;let s=null;for(let l=t+1;l<this.activityFiltered.length;l++)if("update"===this.activityFiltered[l].action||"create"===this.activityFiltered[l].action||"upload"===this.activityFiltered[l].action){s=this.activityFiltered[l];break}if(!s)return null;const n=this.revisions[s.id],a=n&&n.data||{},o=i.delta;return this.$lodash.mapValues(o,(e,t)=>({before:a[t],after:e,field:t}))},postComment(){this.$emit("input",this.comment),this.comment=""}}},Md=Sd,Ed=(i("a970"),i("04bd"),Object(U["a"])(Md,yd,bd,!1,null,"1802066b",null)),Td=Ed.exports;function Nd(e){const t=bc.state.collections[e].fields;return It()(t).map(e=>e.field).map(i=>{const s=t[i];return"o2m"===(s.type&&s.type.toLowerCase())&&null!=bc.getters.o2m(e,i).junction?i.endsWith(".*.*.*")?i:i+".*.*.*":"m2o"===(s.type&&s.type.toLowerCase())||"o2m"===(s.type&&s.type.toLowerCase())||"m2m"===(s.type&&s.type.toLowerCase())||"translation"===(s.type&&s.type.toLowerCase())||"file"===(s.type&&s.type.toLowerCase())?i.endsWith(".*.*.*")?i:i+".*.*.*":i}).join(",")}var Fd={name:"edit",metaInfo(){const e=this.collection.startsWith("directus_")?this.$helpers.formatTitle(this.collection.substr(9)):this.$helpers.formatTitle(this.collection);return this.isNew?{title:this.$t("creating_item_page_title",{collection:e})}:this.batch?{title:this.$t("batch_edit",{collection:e})}:{title:this.$t("editing",{collection:e})}},components:{VLoader:Y,VNotFound:od,VError:Yi,VActivity:Td},props:{collection:{type:String,required:!0},primaryKey:{type:null,required:!0}},data(){return{saving:!1,notFound:!1,error:!1,confirmRemove:!1,confirmRemoveLoading:!1,confirmBatchSave:!1,confirmNavigation:!1,leavingTo:"",activeTab:"both",activityLoading:!1,activity:[],revisions:{},revertActivity:null,reverting:!1}},computed:{breadcrumb(){if("directus_users"===this.collection){let e=this.$t("editing_item");return this.primaryKey==this.$store.state.currentUser.id?e=this.$t("editing_my_profile"):this.newItem&&(e=this.$t("creating_item")),[{name:this.$t("user_directory"),path:"/users"},{name:e,path:this.$route.path}]}if("directus_files"===this.collection)return[{name:this.$t("file_library"),path:"/files"},{name:this.newItem?this.$t("creating_item"):this.$t("editing_item"),path:this.$route.path}];if(this.singleItem)return[{name:this.$t("collections"),path:"/collections"},{name:this.$t("editing_single",{collection:this.$helpers.formatTitle(this.collection)}),path:this.$route.path}];const e=[];if(this.collection.startsWith("directus_")?e.push({name:this.$helpers.formatTitle(this.collection.substr(9)),path:`/${this.collection.substring(9)}`}):e.push({name:this.$t("collections"),path:"/collections"},{name:this.$t(`collections-${this.collection}`),path:`/collections/${this.collection}`}),this.batch){const t=this.primaryKey.split(",").length;e.push({name:this.$t("editing_items",{count:t}),path:this.$route.path})}else e.push({name:this.newItem?this.$t("creating_item"):this.$t("editing_item"),path:this.$route.path});return e},collectionInfo(){return this.$store.state.collections[this.collection]},defaultValues(){return this.$lodash.mapValues(this.fields,e=>{return"array"===e.type?[e.default_value]:"boolean"===e.type?"1"===e.default_value||"true"===e.default_value:e.default_value})},values(){const e=this.$store.state.edits.values;return{...this.defaultValues,...this.savedValues||{},...e}},activityDetail(){return"directus_activity"===this.collection},editing(){return this.$store.getters.editing},savedValues(){return this.$store.state.edits.savedValues},newItem(){return"+"===this.primaryKey},softDeleteStatus(){if(!this.collectionInfo.status_mapping)return null;const e=ye()(this.collectionInfo.status_mapping),t=this.$lodash.findIndex(It()(this.collectionInfo.status_mapping),{soft_delete:!0});return e[t]},singleItem(){return this.collectionInfo&&!0===this.collectionInfo.single},primaryKeyField(){return this.$lodash.find(this.fields,{primary_key:!0}).field},batch(){return this.primaryKey.includes(",")},statusField(){return this.fields?(this.$lodash.find(It()(this.fields),e=>e.type&&"status"===e.type.toLowerCase())||{}).field:null},status(){return this.statusField?this.savedValues[this.statusField]:null},permission(){const e=this.$store.state.permissions[this.collection];if(this.batch){if(this.statusField){const t=this.savedValues.map(e=>e[this.statusField]);return this.$lodash.merge({},...t.map(t=>e.statuses[t]))}return e}return this.isNew?this.status?{...e.statuses[this.status],read_field_blacklist:e.$create.read_field_blacklist,write_field_blacklist:e.$create.write_field_blacklist,status_blacklist:e.$create.status_blacklist}:{...e,read_field_blacklist:e.$create.read_field_blacklist,write_field_blacklist:e.$create.write_field_blacklist,status_blacklist:e.$create.status_blacklist}:this.status?e.statuses[this.status]:e},readonly(){return"none"===this.permission.update},isNew(){return"+"===this.primaryKey},fields(){const e=this.$store.state.collections[this.collection].fields;return Object($["mapValues"])(e,e=>({...e,name:Cl()(e.field)}))}},created(){this.isNew?this.stageDefaultValues():(this.fetchActivity(),this.checkOtherUsers())},mounted(){const e=()=>{return this.save("stay"),!1};this.$helpers.mousetrap.bind("mod+s",e),this.formtrap=this.$helpers.mousetrap(this.$refs.form.$el).bind("mod+s",e)},beforeDestroy(){this.$helpers.mousetrap.unbind("mod+s"),this.formtrap.unbind("mod+s")},watch:{$route(){this.fetchActivity()},notFound(e){this.singleItem&&!0===e&&this.$router.push(`/collections/${this.collection}/+`)}},methods:{stageDefaultValues(){this.$lodash.forEach(this.defaultValues,(e,t)=>this.stageValue({field:t,value:e}))},stageValue({field:e,value:t}){this.$store.dispatch("stageValue",{field:e,value:t})},unstageValue(e){this.$store.dispatch("unstageValue",e)},remove(){this.confirmRemoveLoading=!0;const e=this.$helpers.shortid.generate();let t;this.$store.dispatch("loadingStart",{id:e}),t=this.softDeleteStatus?this.$api.updateItem(this.collection,this.primaryKey,{[this.statusField]:this.softDeleteStatus}):this.$api.deleteItem(this.collection,this.primaryKey),t.then(()=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("discardChanges",e),this.$notify({title:this.$t("item_deleted"),color:"green",iconMain:"check"}),this.confirmRemoveLoading=!1,this.confirmRemove=!1,this.$router.push(`/collections/${this.collection}`)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},save(e){if(!1===this.$store.getters.editing)return;if(this.saving=!0,"copy"===e){const e=Ii()({},this.values);this.$lodash.forEach(this.fields,(t,i)=>{switch(!0===t.primary_key&&delete e[i],t.type.toLowerCase()){case"alias":case"datetime_created":case"datetime_updated":case"user_created":case"user_updated":case"o2m":case"m2o":delete e[i];break}});const t=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("save",{primaryKey:"+",values:e}).then(e=>{return this.$store.dispatch("loadingFinished",t),this.saving=!1,e.data[this.primaryKeyField]}).then(e=>{return this.$notify({title:this.$tc("item_saved"),color:"green",iconMain:"check"}),this.collection.startsWith("directus_")?this.$router.push(`/${this.collection.substring(9)}/${e}`):this.$router.push(`/collections/${this.collection}/${e}`)}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})}const t=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("save").then(e=>e.data).then(e=>{return this.$store.dispatch("loadingFinished",t),this.saving=!1,e}).then(t=>{const i=this.savedValues.length;if(this.$notify({title:this.$tc("item_saved",i,{count:i}),color:"green",iconMain:"check"}),"leave"===e)return this.collection.startsWith("directus_")?this.$router.push(`/${this.collection.substring(9)}`):this.$router.push(`/collections/${this.collection}`);if("stay"===e){if(this.fetchActivity(),this.newItem){const e=t[this.primaryKeyField];return this.$router.push(`/collections/${this.collection}/${e}`)}this.$store.dispatch("startEditing",{collection:this.collection,primaryKey:this.primaryKey,savedValues:t})}"add"===e&&(this.$route.fullPath.endsWith("+")?this.$store.dispatch("startEditing",{collection:this.collection,primaryKey:"+",savedValues:{}}):this.$router.push(`/collections/${this.collection}/+`))}).catch(e=>{this.saving=!1,this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})},fetchActivity(){this.activity=[],this.revisions={},this.activeTab="both",this.activityLoading=!0;const e=Ic.a.generate();return bc.dispatch("loadingStart",{id:e}),Ee.a.all([this.$api.getActivity({"filter[collection][eq]":this.collection,"filter[item][eq]":this.primaryKey,fields:"id,action,action_on,comment,action_by.first_name,action_by.last_name",sort:"-action_on"}),this.activityDetail?Ee.a.resolve({data:[]}):this.$api.getItemRevisions(this.collection,this.primaryKey)]).then(([t,i])=>{return bc.dispatch("loadingFinished",e),{activity:t.data,revisions:i.data}}).then(({activity:e,revisions:t})=>{return{activity:e.map(e=>{const t=new Date(e.action_on);let i;return i=e.action_by?e.action_by.first_name+" "+e.action_by.last_name:"Public",{id:e.id,date:t,name:i,action:e.action.toLowerCase(),comment:e.comment}}),revisions:this.$lodash.keyBy(t,"activity")}}).then(({activity:e,revisions:t})=>{this.activity=e,this.revisions=t,this.activityLoading=!1}).catch(t=>{bc.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},checkOtherUsers(){const e=this.$router.currentRoute.path,t=this.$helpers.date.dateToSql(new Date(new Date-3e5));this.$api.getUsers({"filter[last_access_on][gte]":t,"filter[last_page][eq]":e,"filter[id][neq]":this.$store.state.currentUser.id}).then(e=>e.data).then(e=>{e.length>0&&e.forEach(e=>{const{first_name:t,last_name:i}=e;this.$notify({title:this.$t("user_edit_warning",{first_name:t,last_name:i}),color:"red",iconMain:"error"})})}).catch(e=>{console.error(e)})},postComment(e){const t=Ic.a.generate();bc.dispatch("loadingStart",{id:t});const i=this.$store.state.currentUser;this.$api.post("/activity/comment",{collection:this.collection,item:this.primaryKey,comment:e}).then(e=>e.data).then(e=>{bc.dispatch("loadingFinished",t),this.activity=[{...e,name:`${i.first_name} ${i.last_name}`},...this.activity]}).catch(e=>{bc.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},revertItem(e){this.reverting=!0,this.$api.revert(this.collection,this.primaryKey,e).then(()=>{return this.reverting=!1,this.revertActivity=null,Ee.a.all([this.$api.getItem(this.collection,this.primaryKey,{fields:Nd(this.collection)}),this.fetchActivity()])}).then(([{data:e}])=>{this.$store.dispatch("startEditing",{collection:this.collection,primaryKey:this.primaryKey,savedValues:e})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},beforeRouteEnter(e,t,i){const{collection:s,primaryKey:n}=e.params,a=ye()(bc.state.collections).includes(s)||s.startsWith("directus_"),o="+"===n;if(!1===a)return i(e=>e.$data.notFound=!0);if(o)return bc.dispatch("startEditing",{collection:s,primaryKey:n,savedValues:{}}),void i();const l=Ic.a.generate();return bc.dispatch("loadingStart",{id:l}),wc.getItem(s,n,{fields:Nd(s)}).then(e=>e.data).then(e=>{bc.dispatch("loadingFinished",l),bc.dispatch("startEditing",{collection:s,primaryKey:n,savedValues:e}),i()}).catch(e=>{return bc.dispatch("loadingFinished",l),e&&203===e.code?i(e=>e.$data.notFound=!0):(jc.emit("error",{notify:We.t("something_went_wrong_body"),error:e}),i(e=>e.$data.error=!0))})},beforeRouteUpdate(e,t,i){const{collection:s,primaryKey:n}=e.params,a=ye()(this.$store.state.collections).includes(s)||s.startsWith("directus_"),o="+"===n;if(this.saving=!1,this.notFound=!1,this.error=!1,this.confirmRemove=!1,this.confirmRemoveLoading=!1,this.confirmBatchSave=!1,this.confirmNavigation=!1,this.leavingTo="",this.activeTab="both",this.activityLoading=!1,this.activity=[],this.revisions={},this.revertActivity=null,this.reverting=!1,!1===a)return this.notFound=!0,i();if(o)return this.$store.dispatch("startEditing",{collection:s,primaryKey:n,savedValues:{}}),void i();const l=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:l}),this.$api.getItem(s,n,{fields:Nd(s)}).then(e=>e.data).then(e=>{this.$store.dispatch("loadingFinished",l),this.$store.dispatch("startEditing",{collection:s,primaryKey:n,savedValues:e}),i()}).catch(e=>{if(this.$store.dispatch("loadingFinished",l),e&&203===e.code)return this.notFound=!0,i();this.$events.emit("error",{notify:We.t("something_went_wrong_body"),error:e}),this.error=e,i()})},beforeRouteLeave(e,t,i){return!1===this.$store.getters.editing?i():!0===this.confirmNavigation?(this.$store.dispatch("discardChanges"),i()):(this.confirmNavigation=!0,this.leavingTo=e.fullPath,i(!1))}},Od=Fd,qd=(i("5a2e"),Object(U["a"])(Od,_d,gd,!1,null,"0a32c34e",null)),jd=qd.exports,Ad=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"login",class:{loading:e.loading}},[e.installing?s("v-install",{attrs:{saving:e.saving},on:{install:e.install}}):s("form",{on:{submit:function(t){return t.preventDefault(),e.processForm(t)}}},[s("img",{staticClass:"logo",attrs:{alt:"",src:i("2224")}}),e.loading?s("h1",[e._v("\n        "+e._s(e.loggedIn?e.$t("fetching_data"):e.$t("signing_in"))+"\n      ")]):e.notInstalled?s("h1",[e._v(e._s(e.$t("welcome")))]):s("h1",[e._v(e._s(e.resetMode?e.$t("reset_password"):e.$t("sign_in")))]),s("label",{staticClass:"project-switcher"},[Object.keys(e.urls).length>1||e.allowOther?s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUrl,expression:"selectedUrl"}],attrs:{disabled:e.loading},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedUrl=t.target.multiple?i:i[0]}}},[e._l(e.urls,function(t,i){return s("option",{key:i,attrs:{checked:i===e.url||i===e.url+"/"},domProps:{value:i}},[e._v("\n            "+e._s(t)+"\n          ")])}),e.allowOther?s("option",{attrs:{value:"other"}},[e._v(e._s(e.$t("other")))]):e._e()],2):e._e(),e._v("\n        "+e._s(e.$t("to"))+"\n        "),s("span",[e._v(e._s(e.urls[e.selectedUrl]||e.$t("choose_project"))+"\n          "),Object.keys(e.urls).length>1||e.allowOther?s("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")]):e._e()])]),e.selectOther?s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],class:{"has-value":e.url&&e.url.length>0},attrs:{disabled:e.loading,type:"url",id:"url",name:"url"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),s("label",{attrs:{for:"url"}},[e._v(e._s(e.$t("api_url")))])]):e._e(),e.notInstalled?[s("p",{staticClass:"install-copy"},[e._v(e._s(e.$t("install_copy")))]),s("button",{staticClass:"style-btn",attrs:{type:"button"},on:{click:function(t){e.installing=!0}}},[e._v("\n          "+e._s(e.$t("install"))+"\n        ")])]:[s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],class:{"has-value":e.email&&e.email.length>0},attrs:{autocomplete:"email",disabled:e.loading||!1===e.exists,type:"text",id:"email",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("label",{attrs:{for:"email"}},[e._v(e._s(e.$t("email")))])]),e.resetMode?e._e():s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:{"has-value":e.password&&e.password.length>0},attrs:{autocomplete:"current-password",disabled:e.loading||!1===e.exists,type:"password",id:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("password")))])]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"forgot",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.resetMode=!e.resetMode}}},[e._v("\n            "+e._s(e.resetMode?e.$t("sign_in"):e.$t("forgot_password"))+"\n          ")]),s("button",{staticClass:"style-btn",attrs:{type:"submit",disabled:e.disabled||e.loading}},[e._v("\n            "+e._s(e.resetMode?e.$t("reset_password"):e.$t("sign_in"))+"\n          ")])]),s("transition-group",{staticClass:"stack",attrs:{name:"list",tag:"div"}},[e.checkingExistence||e.gettingThirdPartyAuthProviders?s("v-spinner",{key:"spinner",staticClass:"spinner",attrs:{size:18,"line-size":2,"line-fg-color":"var(--gray)","line-bg-color":"var(--lighter-gray)"}}):e.error||e.SSOerror?s("span",{key:"error",staticClass:"notice",class:e.errorType,on:{click:function(t){e.error=null}}},[s("i",{staticClass:"material-icons"},[e._v(e._s(e.errorType))]),e._v(" "+e._s(e.errorMessage)+"\n          ")]):e.thirdPartyAuthProviders&&!e.thirdPartyAuthProviders.length?s("i",{key:"lock",staticClass:"material-icons lock"},[e._v(e._s(e.loggedIn?"lock_open":"lock_outline"))]):s("ul",{key:"third-party-auth",staticClass:"third-party-auth"},e._l(e.thirdPartyAuthProviders,function(t){return s("li",{key:t.name},[s("a",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$helpers.formatTitle(t.name),expression:"$helpers.formatTitle(provider.name)",modifiers:{bottom:!0}}],attrs:{href:e.url+"auth/sso/"+t.name}},[s("img",{attrs:{alt:t.name,src:t.icon}})])])}),0)],1)]],2),s("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{classes:["inverted"],content:e.version},expression:"{ classes: ['inverted'], content: version }"}],staticClass:"style-4"},[e._v(e._s(e.$t("powered_by_directus")))])],1)])},Dd=[],Bd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{tabs:e.tabs,buttons:e.buttons,"active-tab":e.activeTab,"action-required":""},on:{tab:function(t){e.activeTab=t},next:e.nextTab}},[i("template",{slot:"project"},[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("project_info")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("project_info_copy")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.nextTab(t)}}},[i("label",[e._v("\n        "+e._s(e.$t("project_name"))+"\n        "),i("v-input",{ref:"projectName",staticClass:"input",attrs:{id:"project-name",autofocus:""},model:{value:e.values.project_name,callback:function(t){e.$set(e.values,"project_name",t)},expression:"values.project_name"}})],1),i("label",[e._v("\n        "+e._s(e.$t("project_key"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"environment",disabled:"",value:"Default ( _ )"}})],1),i("label",[e._v("\n        "+e._s(e.$t("admin_email"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"admin-email",type:"email"},model:{value:e.values.user_email,callback:function(t){e.$set(e.values,"user_email",t)},expression:"values.user_email"}})],1),i("label",[e._v("\n        "+e._s(e.$t("admin_password"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"admin-password",type:"password",autocomplete:"new-password"},model:{value:e.values.user_password,callback:function(t){e.$set(e.values,"user_password",t)},expression:"values.user_password"}})],1),i("input",{staticClass:"hidden",attrs:{type:"submit"}})])]),i("template",{slot:"database"},[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("database_connection")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("database_connection_copy")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.nextTab(t)}}},[i("label",[e._v("\n        "+e._s(e.$t("host"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_host"},model:{value:e.values.db_host,callback:function(t){e.$set(e.values,"db_host",t)},expression:"values.db_host"}})],1),i("label",[e._v("\n        "+e._s(e.$t("port"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_port"},model:{value:e.values.db_port,callback:function(t){e.$set(e.values,"db_port",t)},expression:"values.db_port"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_user"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_user"},model:{value:e.values.db_user,callback:function(t){e.$set(e.values,"db_user",t)},expression:"values.db_user"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_password"))+"\n        "),i("v-input",{staticClass:"input",attrs:{type:"password",id:"db_password"},model:{value:e.values.db_password,callback:function(t){e.$set(e.values,"db_password",t)},expression:"values.db_password"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_name"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_name"},model:{value:e.values.db_name,callback:function(t){e.$set(e.values,"db_name",t)},expression:"values.db_name"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_type"))+"\n        "),i("v-input",{staticClass:"input",attrs:{disabled:"",id:"db_type",value:"MySQL & Variants"}})],1),i("input",{staticClass:"hidden",attrs:{type:"submit"}})])])],2)},Pd=[],Ld={name:"v-install",props:{saving:{type:Boolean,default:!1}},data(){return{activeTab:"project",values:{db_host:"localhost",db_port:3306,db_name:"directus",db_user:"root",db_password:null,user_email:null,user_password:null,project_name:"Directus",cors_enabled:!0}}},computed:{databaseDisabled(){const{isEmpty:e}=this.$lodash,{project_name:t,user_email:i,user_password:s}=this.values;return e(t)||e(i)||e(s)},schemaDisabled(){const{isEmpty:e}=this.$lodash,{db_host:t,db_port:i,db_name:s,db_user:n,db_password:a}=this.values;return e(t)||e(i)||e(s)||e(n)||e(a)},buttons(){let e=!1;return"project"===this.activeTab&&this.databaseDisabled&&(e=!0),{next:{disabled:e,text:"database"===this.activeTab?this.$t("save"):this.$t("next"),loading:this.saving}}},tabs(){return{project:{text:this.$t("project")},database:{text:this.$t("database"),disabled:this.databaseDisabled}}}},methods:{nextTab(){switch(this.activeTab){case"project":this.activeTab="database";break;case"database":default:this.save();break}},save(){this.$emit("install",this.values)}}},Rd=Ld,Vd=(i("0b15"),Object(U["a"])(Rd,Bd,Pd,!1,null,"01369511",null)),Ud=Vd.exports,Kd={name:"login",components:{VInstall:Ud},data(){return{selectedUrl:this.$store.state.auth.url+"/"+this.$store.state.auth.env+"/",url:null,email:null,password:null,loading:!1,loggedIn:!1,error:null,SSOerror:null,exists:null,checkingExistence:!1,thirdPartyAuthProviders:null,gettingThirdPartyAuthProviders:!1,resetMode:!1,installing:!1,notInstalled:!1,saving:!1}},computed:{urls(){if(window.__DirectusConfig__)return this.$lodash.mapKeys(window.__DirectusConfig__.api,(e,t)=>!1===t.endsWith("/")?t+"/":t)},allowOther(){if(window.__DirectusConfig__)return window.__DirectusConfig__.allowOtherAPI},version(){return`${this.$t("version")} v${Pc["a"]}`},storeError(){return this.$store.state.auth.error},storeUrl(){return this.$store.state.auth.url?this.$store.state.auth.url+"/"+this.$store.state.auth.env:null},errorType(){if(!this.error&&!this.SSOerror)return;const e=this.error&&this.error.code||this.SSOerror;return+e>=100&&+e<200?101===+e||102===+e?null:"warning":"error"},errorMessage(){if(!this.error&&!this.SSOerror)return;const e=this.error&&this.error.code||this.SSOerror;return this.localeMessages.errors&&null!=this.localeMessages.errors[e]?this.$t(`errors[${e}]`):this.$t("error_unknown")},localeMessages(){return this.$i18n.getLocaleMessage(this.$i18n.locale)},disabled(){return this.resetMode?null===this.email||0===this.email.length:null===this.email||null===this.password||(0===this.email.length||0===this.password.length)},selectOther(){return"other"===this.selectedUrl}},created(){this.checkUrl=this.$lodash.debounce(this.checkUrl,300),this.url&&this.checkUrl();let e=this.storeUrl||ye()(window.__DirectusConfig__.api)[0];!1===ye()(window.__DirectusConfig__.api).includes(e)&&(e=null),this.url=e||ye()(window.__DirectusConfig__.api)[0]||"",this.selectedUrl=this.url,!1===this.url.endsWith("/")&&(this.url=this.url+"/"),this.trySSOLogin()},watch:{url(){this.exists=null,this.checkUrl()},selectedUrl(e){if("other"!==e)return this.url=e},exists(e){!0===e?this.getThirdPartyAuthProviders():!1===e&&(this.error={code:-1})},$route(){this.trySSOLogin()},storeError(e){this.error=e}},methods:{processForm(){if(this.resetMode)this.loading=!0,this.$axios.post(this.url+"auth/password/request",{email:this.email}).then(()=>{this.loading=!1,this.$notify({title:this.$t("password_reset_sent",{email:this.email}),color:"green",iconMain:"check"})}).catch(e=>{this.error=e,this.loading=!1});else{const e={url:this.url,email:this.email,password:this.password};this.loading=!0,this.$store.dispatch("login",e).then(()=>{this.loggedIn=!0,this.enterApp()}).catch(()=>{this.loading=!1})}},enterApp(){if(this.$route.query.redirect)return this.$router.push(this.$route.query.redirect);this.$api.getMe({fields:"last_page"}).then(e=>e.data.last_page).then(e=>{this.$router.push(e||"/")}).catch(e=>{this.loading=!1,this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),this.$router.push("/")})},checkUrl(){if(!this.url)return;this.checkingExistence=!0,this.exists=null,this.thirdPartyAuthProviders=null,this.error=null,this.notInstalled=!1;const e=this.url.split("/");e.pop()||e.pop();const t=e.join("/");this.$axios.get(t+"/server/ping").then(()=>{this.exists=!0,this.checkingExistence=!1,this.error=null}).catch(()=>{this.exists=!1,this.notInstalled=!1,this.checkingExistence=!1})},getThirdPartyAuthProviders(){this.gettingThirdPartyAuthProviders=!0,this.thirdPartyAuthProviders=null;const e=new kl.a,t=this.url.split("/"),i=t.pop()||t.pop(),s=t.join("/");e.env=i,e.url=s,e.getThirdPartyAuthProviders().then(e=>e.data).then(e=>{this.thirdPartyAuthProviders=e,this.gettingThirdPartyAuthProviders=!1}).catch(e=>{14===e.code&&(this.notInstalled=!0,this.exists=!0),this.gettingThirdPartyAuthProviders=!1})},trySSOLogin(){const e=new URLSearchParams(window.location.search);if(e.get("error")){this.SSOerror=+this.$route.query.code;const e=window.location.toString();if(e.indexOf("?")>0){const t=e.substring(0,e.indexOf("?"));window.history.replaceState({},document.title,t)}return null}e.get("request_token")&&e.get("request_token").length>0&&(this.clearRequestToken(),this.loading=!0,this.$store.dispatch("loginSSO",e.get("request_token")).then(()=>this.enterApp()).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),this.loading=!1}))},install(e){const t=this.url.split("/");t.pop()||t.pop();const i=t.join("/");this.saving=!0,this.$axios.post(i+"/projects",e).then(()=>{this.installing=!1,this.exists=!0,this.notInstalled=!1,this.$notify({title:this.$t("api_installed"),color:"green",iconMain:"check"}),this.saving=!1}).catch(e=>{this.$events.emit("error",{notify:e.response.data.error.message,error:e}),this.saving=!1})},clearRequestToken(){const e=window.location.href,t=e.replace(new RegExp("[?&]request_token=[^&#]*(#.*)?$"),"$1").replace(new RegExp("([?&])request_token=[^&]*&"),"$1");history.replaceState({},"Login | Directus",t)}}},zd=Kd,Wd=(i("96fc"),Object(U["a"])(zd,Ad,Dd,!1,null,"a9950678",null)),Hd=Wd.exports,Gd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"interfaces"},[i("v-header",{attrs:{breadcrumb:e.links}}),i("v-table",{attrs:{columns:e.columns,items:e.items,link:"__link","primary-key-field":"id"}})],1)},Qd=[],Xd={metaInfo(){return{title:"Interfaces"}},computed:{links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("interfaces"),path:"/settings/interfaces"}]},items(){return ye()(this.$store.state.extensions.interfaces).map(e=>({...this.$store.state.extensions.interfaces[e],__link:`/settings/interfaces/${e}`}))},columns(){return[{field:"name",name:"Name"},{field:"id",name:"id"},{field:"version",name:"Version"}]}}},Yd=Xd,Zd=Object(U["a"])(Yd,Gd,Qd,!1,null,null,null),Jd=Zd.exports,eu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"interface-debugger"},[i("v-header",{attrs:{breadcrumb:e.links}}),i("label",[e._v("Dummy Label")]),i("div",{staticClass:"interface",style:{width:e.width+"px"}},[i("v-ext-input",{attrs:{id:e.id,name:e.id,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.options,"new-item":e.newItem,relation:e.relation,fields:e.fields,values:e.values},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),i("form",{on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",[e._v("Output")]),i("label",{attrs:{for:"value"}},[e._v("Value")]),i("p",[e._v("The value saved into the database")]),i("v-input",{staticClass:"value",attrs:{id:"value",type:"text"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("label",[e._v("Display")]),i("p",[e._v("Appearance on the Items Page (eg: Tabular)")]),i("div",{staticClass:"listing"},[i("v-ext-display",{attrs:{"interface-type":e.id,name:e.id,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.options,"new-item":e.newItem,relation:e.relation},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),i("fieldset",[i("legend",[e._v("Options")]),e._l(e.extension.options,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),e.options.comment?i("p",{domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment))}}):e._e(),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options},model:{value:e.options[s],callback:function(t){e.$set(e.options,s,t)},expression:"options[optionID]"}})],1)})],2),i("fieldset",[i("legend",[e._v("Settings")]),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"type"}},[e._v("Type")]),i("p",[e._v("Allowed datatypes this interface supports")]),i("v-simple-select",{staticClass:"small",attrs:{id:"type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.extension.types,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"length"}},[e._v("Length")]),i("p",[e._v("Database length for the column")]),i("v-input",{staticClass:"length",attrs:{id:"length",type:"number",min:0},model:{value:e.length,callback:function(t){e.length=t},expression:"length"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection"}},[e._v("Collection")]),i("p",[e._v("The parent collection for this field")]),i("v-input",{staticClass:"value",attrs:{id:"collection"},model:{value:e.collection,callback:function(t){e.collection=t},expression:"collection"}})],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the readonly/disabled state")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"readonly",value:"readonly",type:"checkbox"},model:{value:e.readonly,callback:function(t){e.readonly=t},expression:"readonly"}}),i("label",{staticClass:"inline",attrs:{for:"readonly"}},[e._v("Read only")])],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the required state")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"required",value:"required",type:"checkbox"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}),i("label",{staticClass:"inline",attrs:{for:"required"}},[e._v("Required")])],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the loading state (Beta)")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"loading",value:"loading",type:"checkbox"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),i("label",{staticClass:"inline",attrs:{for:"loading"}},[e._v("Loading")])],1)]),i("fieldset",[i("legend",[e._v("Relation")]),i("div",{staticClass:"relation"},[i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection_many"}},[e._v("Collection Many")]),i("v-input",{staticClass:"value",attrs:{id:"collection_many",type:"text"},model:{value:e.relation.collection_many,callback:function(t){e.$set(e.relation,"collection_many",t)},expression:"relation.collection_many"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"field_many"}},[e._v("Field Many")]),i("v-input",{staticClass:"value",attrs:{id:"field_many",type:"text"},model:{value:e.relation.field_many,callback:function(t){e.$set(e.relation,"field_many",t)},expression:"relation.field_many"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection_one"}},[e._v("Collection One")]),i("v-input",{staticClass:"value",attrs:{id:"collection_one",type:"text"},model:{value:e.relation.collection_one,callback:function(t){e.$set(e.relation,"collection_one",t)},expression:"relation.collection_one"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"field_one"}},[e._v("Field One")]),i("v-input",{staticClass:"value",attrs:{id:"field_one",type:"text"},model:{value:e.relation.field_one,callback:function(t){e.$set(e.relation,"field_one",t)},expression:"relation.field_one"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"junction_field"}},[e._v("Junction Field")]),i("v-input",{staticClass:"value",attrs:{id:"junction_field",type:"text"},model:{value:e.relation.junction_field,callback:function(t){e.$set(e.relation,"junction_field",t)},expression:"relation.junction_field"}})],1)])]),i("fieldset",[i("legend",[e._v("Misc.")]),i("div",{staticClass:"misc"},[i("p",[e._v("Toggle viewing between New and Edit")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"new",value:"newItem",type:"checkbox"},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}}),i("label",{staticClass:"inline",attrs:{for:"new"}},[e._v("New item")])],1)])])],1)},tu=[],iu={name:"interface-debugger",metaInfo(){return{title:"Interface Debugger"}},props:{id:{type:String,required:!0}},data(){return{type:null,length:null,value:null,readonly:!1,required:!1,loading:!1,options:{},width:2e3,newItem:!1,collection:"members",relation:{field_many:"favorites",field_one:"members",collection_many:"members",collection_one:"movies",junction_field:""},customFields:{name:{collection:"movies",default_value:null,field:"name",group:null,hidden_detail:!1,hidden_browse:!1,id:154,interface:"text-input",length:"100",locked:!1,managed:!0,name:"Name",note:null,options:null,primary_key:!1,readonly:!1,relation:null,required:!1,signed:null,sort:"10",translation:null,type:"VARCHAR",validation:null,width:4},director:{collection:"movies",default_value:null,field:"director",group:null,hidden_detail:!1,hidden_browse:!1,id:161,interface:"text-input",length:"100",locked:!1,managed:!0,name:"Director",note:null,options:null,primary_key:!1,readonly:!1,relation:null,required:!1,signed:null,sort:"9",translation:null,type:"VARCHAR",validation:null,width:4}},customValues:{id:123,name:"Directus The Movie",director:"Ben Spielberg",preview:null}}},computed:{links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("interfaces"),path:"/settings/interfaces"},{name:this.extension.name,path:`/settings/interfaces/${this.id}`}]},extension(){return this.$store.state.extensions.interfaces[this.id]},fields(){return{...this.customFields,[this.id]:{type:this.type,length:this.length,value:this.value,readonly:this.readonly,required:this.required,loading:this.loading,options:this.options,width:this.width,newItem:this.newItem,relation:this.relation,collection:this.collection}}},values(){return{...this.customValues,[this.id]:this.value}}},watch:{id(){this.hydrate()},type(e){if(e){const{databaseVendor:e}=this.$store.state.serverInfo,t=Ze[this.type][e].default,i=Ye[e][t];i.length&&(this.length=i.defaultLength)}}},created(){this.hydrate()},methods:{hydrate(){this.type=this.extension.types[0];const e=this.$lodash.mapValues(this.extension.options,e=>void 0===e.default?null:e.default);this.options=e}}},su=iu,nu=(i("9dc1"),Object(U["a"])(su,eu,tu,!1,null,"1e306724",null)),au=nu.exports,ou=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"debug"},[i("v-header",{attrs:{title:"Upload Component"}}),i("div",{staticClass:"wrapper"},[i("v-upload")],1)],1)},lu=[],ru={metaInfo(){return{title:"Debugger"}}},cu=ru,du=(i("0ffd"),Object(U["a"])(cu,ou,lu,!1,null,"d997f522",null)),uu=du.exports,hu=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"settings"},[s("v-header",{attrs:{breadcrumb:e.links}}),s("v-details",{attrs:{title:e.$t("settings_project"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("settings_global"),subtitle:e.$tc("item_count",e.globalNum,{count:e.globalNum}),element:"li",to:"/settings/global",icon:"public"}}),s("v-card",{attrs:{title:e.$t("settings_collections_fields"),subtitle:e.$tc("collection_count",e.collectionsNum,{count:e.collectionsNum}),element:"li",to:"/settings/collections"}},[s("img",{attrs:{slot:"icon",src:i("bb19"),alt:""},slot:"icon"})]),s("v-card",{attrs:{title:e.$t("settings_permissions"),subtitle:e.roleCount,element:"li",to:"/settings/roles",icon:"group"}}),s("v-card",{attrs:{title:e.$t("settings_update_database"),subtitle:e.$t("settings_update_database_subtext"),element:"li",icon:"update"},on:{click:function(t){e.updateDBActive=!0}}})],1)])]),s("v-details",{attrs:{title:e.$t("additional_info"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("interfaces"),subtitle:e.$tc("interface_count",e.interfaceCount,{count:e.interfaceCount}),element:"li",to:"/settings/interfaces",icon:"extension"}}),s("v-card",{attrs:{title:e.$t("about_directus"),subtitle:e.$t("learn_more"),element:"li",href:"https://directus.io",icon:"info_outline"}}),s("v-card",{attrs:{title:e.$t("activity_log"),subtitle:e.activityCount,element:"li",to:"/activity",icon:"warning"}}),s("v-card",{attrs:{title:e.$t("report_issue"),subtitle:e.$t("open_on_gh"),element:"li",href:"https://github.com/directus/app/issues/new?template=Bug_report.md",icon:"bug_report"}}),s("v-card",{attrs:{title:e.$t("request_feature"),subtitle:e.$t("open_on_gh"),element:"li",href:"https://github.com/directus/app/issues/new?template=Feature_request.md",icon:"how_to_vote"}})],1)])]),s("v-details",{attrs:{title:e.$t("coming_soon"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("connection"),subtitle:e.$t("latency")+": "+e.$n(Math.round(e.$store.state.latency[e.$store.state.latency.length-1].latency))+"ms",disabled:"",element:"li"}},[s("v-signal",{staticClass:"signal",attrs:{slot:"icon"},slot:"icon"})],1),s("v-card",{attrs:{title:e.$t("server_details"),disabled:"",subtitle:e.projectName,element:"li",icon:"storage"}}),s("v-card",{attrs:{title:e.$t("version_and_updates"),disabled:"",subtitle:e.version,element:"li",icon:"update"}})],1)])]),e.updateDBActive?s("portal",{attrs:{to:"modal"}},[s("v-confirm",{attrs:{message:e.$t("settings_update_database_confirm"),"confirm-text":e.$t("update"),loading:e.updateDBInProgress},on:{confirm:e.updateDB,cancel:function(t){e.updateDBActive=!1}}})],1):e._e()],1)},pu=[],mu={name:"settings",metaInfo(){return{title:`${this.$t("settings")}`}},components:{VSignal:No},data(){return{roleCount:"Loading...",activityCount:"Loading...",updateDBActive:!1,updateDBInProgress:!1}},computed:{globalNum(){return ye()(this.$store.state.collections.directus_settings.fields).length},collectionsNum(){return ye()(this.$store.state.collections).filter(e=>!1===e.startsWith("directus_")).length},projectName(){return this.$store.state.auth.projectName},interfaceCount(){return ye()(this.$store.state.extensions.interfaces).length},version(){return Pc["a"]},links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"}]}},created(){this.getRoleCount(),this.getActivityCount()},methods:{getRoleCount(){this.$api.getItems("directus_roles",{fields:"-",limit:0,meta:"total_count"}).then(e=>e.meta).then(({total_count:e})=>{this.roleCount=this.$tc("role_count",e,{count:this.$n(e)})}).catch(()=>{this.roleCount="--"})},getActivityCount(){this.$api.getItems("directus_activity",{fields:"-",limit:0,meta:"total_count"}).then(e=>e.meta).then(({total_count:e})=>{this.activityCount=this.$tc("event_count",e,{count:this.$n(e)})}).catch(()=>{this.activityCount="--"})},updateDB(){this.updateDBInProgress=!0,this.$api.updateDatabase().then(()=>{this.updateDBInProgress=!1,this.updateDBActive=!1,this.$notify({title:this.$t("db_updated"),color:"green",iconMain:"check"})}).catch(e=>{this.updateDBInProgress=!1,this.$events.emit("error",{notify:this.$t("db_update_failed"),error:e})})}}},fu=mu,vu=(i("799b"),Object(U["a"])(fu,hu,pu,!1,null,"0e51d843",null)),_u=vu.exports,gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings-global"},[i("v-header",{attrs:{breadcrumb:e.links}},[i("template",{slot:"buttons"},[i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:function(t){return e.save("leave")}}})],1)],2),i("v-form",{attrs:{fields:e.fields,values:e.values},on:{"stage-value":e.stageValue}})],1)},yu=[],bu={name:"settings-global",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("settings_global")}`}},data(){return{saving:!1,edits:{}}},computed:{...Object(fo["c"])({settings:e=>e.settings.values,fields:e=>e.collections.directus_settings.fields}),values(){return{...this.settings,...this.edits}},links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("settings_global"),path:"/settings/global"}]},editing(){return ye()(this.edits).length>0}},methods:{stageValue({field:e,value:t}){return this.settings[e]==t?this.$delete(this.edits,e):this.$set(this.edits,e,t)},save(){this.saving=!0,this.$store.dispatch("setSettings",this.edits).then(()=>{this.saving=!1,this.edits={},this.$router.push("/settings"),this.$notify({title:this.$t("settings_saved"),color:"green",iconMain:"check"})}).catch(e=>{this.saving=!1,this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})}}},$u=bu,ku=(i("c96c"),Object(U["a"])($u,gu,yu,!1,null,"65db5788",null)),wu=ku.exports,Cu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"collections"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.addNew=!0}}})],1)],2),0===e.items.length?i("v-error",{attrs:{title:e.$t("no_collections"),body:e.$t("no_collections_body"),icon:"error_outline"}}):i("div",{staticClass:"table"},[i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell style-4"},[e._v(e._s(e.$t("collection")))]),i("div",{staticClass:"cell note style-4"},[e._v(e._s(e.$t("note")))])])]),i("div",{staticClass:"body"},e._l(e.items,function(t){return i("router-link",{key:t.collection,staticClass:"row",attrs:{to:t.__link__}},[i("div",{staticClass:"cell"},[e._v(e._s(t.name))]),i("div",{staticClass:"cell note"},[e._v(e._s(t.note))]),t.managed?i("button",{staticClass:"managed",on:{click:function(i){return i.preventDefault(),i.stopPropagation(),e.toggleManage(t)}}},[e._v("\n          "+e._s(e.$t("dont_manage"))+"\n        ")]):i("button",{staticClass:"not-managed",on:{click:function(i){return i.preventDefault(),i.stopPropagation(),e.toggleManage(t)}}},[e._v("\n          "+e._s(e.$t("manage"))+"\n        ")])])}),1)]),e.addNew?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{safe:"","confirm-text":e.$t("create"),message:e.$t("create_collection"),placeholder:e.$t("enter_collection_name"),loading:e.adding},on:{cancel:function(t){e.addNew=!1},confirm:e.add},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}},[i("v-details",{attrs:{title:"Default fields",open:!0}},[i("div",{staticClass:"advanced-form"},[i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),e._v(" "+e._s(e.$t("Status")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}}),e._v(" "+e._s(e.$t("Sort")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{attrs:{value:!0},model:{value:e.createdBy,callback:function(t){e.createdBy=t},expression:"createdBy"}}),e._v("\n            "+e._s(e.$t("Created by")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{attrs:{value:!0},model:{value:e.createdOn,callback:function(t){e.createdOn=t},expression:"createdOn"}}),e._v("\n            "+e._s(e.$t("Created on")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.modifiedBy,callback:function(t){e.modifiedBy=t},expression:"modifiedBy"}}),e._v(" "+e._s(e.$t("Modified by")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.modifiedOn,callback:function(t){e.modifiedOn=t},expression:"modifiedOn"}}),e._v(" "+e._s(e.$t("Modified on")))],1)])])],1)],1):e._e(),e.dontManage?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("dont_manage_copy",{collection:e.dontManage.name}),color:"danger","confirm-text":e.$t("dont_manage")},on:{cancel:function(t){e.dontManage=null},confirm:e.stopManaging}})],1):e._e()],1)},xu=[],Iu={name:"settings-collections",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("settings_collections_fields")}`}},data(){return{addNew:!1,newName:"",adding:!1,status:!0,sort:!1,createdBy:!0,createdOn:!0,modifiedBy:!1,modifiedOn:!1,dontManage:null}},computed:{items(){const e=this.$store.state.collections||{};return It()(e).filter(e=>!1===e.collection.startsWith("directus_")).map(e=>({...e,name:this.$t(`collections-${e.collection}`),__link__:`/settings/collections/${e.collection}`}))},breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("collections_and_fields"),path:"/settings/collections"}]}},methods:{add(){this.adding=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e});let t=[{type:"integer",datatype:"INT",length:15,field:"id",interface:"primary-key",auto_increment:!0,primary_key:!0,hidden_detail:!0,hidden_browse:!0}],i={id:{auto_increment:!0,collection:this.newName,datatype:"INT",default_value:null,field:"id",group:null,hidden_detail:!0,hidden_browse:!0,interface:"primary-key",length:"10",locked:0,note:"",options:null,primary_key:!0,readonly:0,required:!0,signed:!1,sort:1,translation:null,type:"integer",unique:!1,validation:null,width:4}};this.status&&(t.push({type:"status",datatype:"VARCHAR",length:20,field:"status",interface:"status",options:{status_mapping:{published:{name:"Published",text_color:"white",background_color:"accent",browse_subdued:!1,browse_badge:!0,soft_delete:!1,published:!0},draft:{name:"Draft",text_color:"white",background_color:"blue-grey-200",browse_subdued:!0,browse_badge:!0,soft_delete:!1,published:!1},deleted:{name:"Deleted",text_color:"white",background_color:"red",browse_subdued:!0,browse_badge:!0,soft_delete:!0,published:!1}}}}),i.status={collection:this.newName,field:"status",datatype:"VARCHAR",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!0,type:"status",sort:0,interface:"status",hidden_detail:!1,hidden_browse:!1,required:!1,options:{status_mapping:{published:{name:"Published",text_color:"white",background_color:"accent",browse_subdued:!1,browse_badge:!0,soft_delete:!1,published:!0},draft:{name:"Draft",text_color:"white",background_color:"blue-grey-200",browse_subdued:!0,browse_badge:!0,soft_delete:!1,published:!1},deleted:{name:"Deleted",text_color:"white",background_color:"red",browse_subdued:!0,browse_badge:!0,soft_delete:!0,published:!1}}},locked:!1,translation:null,readonly:!1,width:4,validation:null,group:null,length:"20"}),this.sort&&(t.push({type:"sort",datatype:"INT",field:"sort",interface:"sort"}),i.sort={collection:this.newName,field:"sort",datatype:"INT",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!1,type:"sort",sort:0,interface:"sort",hidden_detail:!1,hidden_browse:!1,required:!1,options:null,locked:!1,translation:null,readonly:!1,width:4,validation:null,group:null,length:"10"}),this.createdBy&&(t.push({type:"user_created",datatype:"INT",field:"created_by",interface:"user-created",options:{template:"{{first_name}} {{last_name}}",display:"both"},readonly:!0,hidden_detail:!0,hidden_browse:!0}),i.created_by={collection:this.newName,field:"created_by",datatype:"INT",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!1,type:"user_created",sort:0,interface:"user-created",hidden_detail:!0,hidden_browse:!0,required:!1,options:{template:"{{first_name}} {{last_name}}",display:"both"},locked:!1,translation:null,readonly:!0,width:4,validation:null,group:null,length:"10"}),this.createdOn&&(t.push({type:"datetime_created",datatype:"DATETIME",field:"created_on",interface:"datetime-created",readonly:!0,hidden_detail:!0,hidden_browse:!0}),i.created_on={collection:this.newName,field:"created_on",datatype:"DATETIME",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!0,type:"datetime_created",sort:0,interface:"datetime-created",hidden_detail:!0,hidden_browse:!0,required:!1,options:null,locked:!1,translation:null,readonly:!0,width:4,validation:null,group:null,length:null}),this.modifiedBy&&(t.push({type:"user_updated",datatype:"INT",field:"modified_by",interface:"user-updated",options:{template:"{{first_name}} {{last_name}}",display:"both"},readonly:!0,hidden_detail:!0,hidden_browse:!0}),i.modified_by={collection:this.newName,field:"modified_by",datatype:"INT",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!1,type:"user_updated",sort:0,interface:"user-updated",hidden_detail:!0,hidden_browse:!0,required:!1,options:{template:"{{first_name}} {{last_name}}",display:"both"},locked:!1,translation:null,readonly:!0,width:4,validation:null,group:null,length:"10"}),this.modifiedOn&&(t.push({type:"datetime_updated",datatype:"DATETIME",field:"modified_on",interface:"datetime-updated",readonly:!0,hidden_detail:!0,hidden_browse:!0}),i.modified_on={collection:this.newName,field:"modified_on",datatype:"DATETIME",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!0,type:"datetime_updated",sort:0,interface:"datetime-updated",hidden_detail:!0,hidden_browse:!0,required:!1,options:null,locked:!1,translation:null,readonly:!0,width:4,validation:null,group:null,length:null}),this.$api.createCollection({collection:this.newName,hidden:0,fields:t},{fields:"*.*"}).then(e=>e.data).then(t=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("addCollection",{...t,fields:i}),this.$store.dispatch("addPermission",{collection:this.newName,permission:{$create:Ji,...Ji}}),this.$router.push(`/settings/collections/${this.newName}`)}).catch(t=>{if(this.adding=!1,this.$store.dispatch("loadingFinished",e),t){const e={4:this.$t("collection_invalid_name")};this.$events.emit("error",{notify:t.code in e?e[t.code]:this.$t("something_went_wrong_body"),error:t})}})},toggleManage(e){if(!e.managed)return this.$api.updateItem("directus_collections",e.collection,{managed:!0}).then(()=>{return this.$store.dispatch("getCollections")}).then(()=>{this.$notify({title:this.$t("manage_started",{collection:e.collection}),color:"green",iconMain:"check"})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})});this.dontManage=e},stopManaging(){return this.$api.updateItem("directus_collections",this.dontManage.collection,{managed:!1}).then(()=>{return this.$store.dispatch("getCollections")}).then(()=>{this.$notify({title:this.$t("manage_stopped",{collection:this.dontManage.collection}),color:"green",iconMain:"check"}),this.dontManage=null}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}}},Su=Iu,Mu=(i("d5ae"),Object(U["a"])(Su,Cu,xu,!1,null,"adbb7024",null)),Eu=Mu.exports,Tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.collectionInfo?i("div",{staticClass:"settings-fields"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"delete",attrs:{icon:"delete_outline",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}),i("v-header-button",{key:"save",attrs:{icon:"check",color:"action",loading:e.saving,disabled:0===Object.keys(e.edits).length,label:e.$t("save")},on:{click:e.save}})],1)],2),i("label",{staticClass:"label "},[e._v(e._s(e.$t("fields"))+"\n    "),i("em",{staticClass:"notice"},[e._v(e._s(e.$t("fields_are_saved_instantly")))])]),i("div",{staticClass:"table"},[i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"drag"},[i("i",{staticClass:"material-icons"},[e._v("swap_vert")])]),i("div",[e._v(e._s(e.$t("field")))]),i("div",[e._v(e._s(e.$t("interface")))])])]),i("div",{staticClass:"body",class:{dragging:e.dragging}},[i("draggable",{on:{start:e.startSort,end:e.saveSort},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,function(t){return i("div",{key:t.field,staticClass:"row"},[i("div",{staticClass:"drag"},[i("i",{staticClass:"material-icons"},[e._v("drag_handle")])]),i("div",{staticClass:"inner row",on:{click:function(i){return i.stopPropagation(),e.startEditingField(t)}}},[i("div",[e._v("\n              "+e._s(e.$helpers.formatTitle(t.field))+"\n              "),!0===t.required||"1"===t.required?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]):e._e(),t.primary_key?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("primary_key"),expression:"$t('primary_key')"}],staticClass:"material-icons key"},[e._v("vpn_key")]):e._e()]),i("div",[e._v("\n              "+e._s(e.$store.state.extensions.interfaces[t.interface]&&e.$store.state.extensions.interfaces[t.interface].name||"--")+"\n            ")])]),e.canDuplicate(t.interface)||e.fields.length>1?i("v-popover",{staticClass:"more-options",attrs:{placement:"left-start"}},[i("button",{staticClass:"menu-toggle",attrs:{type:"button"}},[i("i",{staticClass:"material-icons"},[e._v("more_vert")])]),i("template",{slot:"popover"},[i("ul",{staticClass:"ctx-menu"},[i("li",[i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{type:"button",disabled:!e.canDuplicate(t.interface)},on:{click:function(i){return i.stopPropagation(),e.duplicateField(t)}}},[i("i",{staticClass:"material-icons"},[e._v("control_point_duplicate")]),e._v("\n                    "+e._s(e.$t("duplicate"))+"\n                  ")])]),i("li",[i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{disabled:1===e.fields.length,type:"button"},on:{click:function(i){return i.stopPropagation(),e.warnRemoveField(t.field)}}},[i("i",{staticClass:"material-icons"},[e._v("close")]),e._v(" "+e._s(e.$t("delete"))+"\n                  ")])])])])],2):e._e()],1)}),0)],1)]),i("v-button",{staticClass:"new-field",on:{click:function(t){return e.startEditingField({})}}},[e._v("New Field")]),e.fields?i("v-form",{attrs:{fields:e.directusFields,values:e.values,collection:"directus_collections"},on:{"stage-value":e.stageValue}}):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_collection_are_you_sure"),"confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.confirmFieldRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_field_are_you_sure",{field:e.fieldToBeRemoved}),"confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmFieldRemove=!1},confirm:function(t){return e.removeField(e.fieldToBeRemoved)}}})],1):e._e(),e.editingField?i("v-field-setup",{attrs:{"field-info":e.fieldBeingEdited,"collection-info":e.collectionInfo,saving:e.fieldSaving},on:{close:function(t){e.editingField=!1},save:e.setFieldSettings}}):e._e(),e.duplicatingField?i("v-field-duplicate",{attrs:{"field-information":e.fieldBeingDuplicated,"collection-information":e.collectionInfo},on:{close:function(t){e.duplicatingField=!1},save:e.duplicateFieldSettings}}):e._e()],1):i("not-found")},Nu=[],Fu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{title:e.existing?e.$t("update_field")+": "+e.displayName:e.$t("create_field"),tabs:e.tabs,"active-tab":e.activeTab,buttons:e.buttons},on:{tab:function(t){e.activeTab=t},next:e.nextTab,close:function(t){return e.$emit("close")}}},[i("template",{slot:"interface"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("choose_interface")))])],e.interfaceName?i("p",{staticClass:"currently-selected subtext"},[e._v("\n      "+e._s(e.$t("currently_selected",{thing:e.interfaces[e.interfaceName].name}))+"\n    ")]):i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("select_interface_below")))]),i("div",e._l(e.interfacesGrouped,function(t,s){return i("v-details",{key:t.title,attrs:{title:t.title,open:0===s}},[i("div",{staticClass:"interfaces"},e._l(t.interfaces,function(s){return i("article",{key:t.title+"-"+s.id,staticClass:"interface",class:{active:e.interfaceName===s.id},on:{click:function(t){return e.setInterface(s.id)}}},[i("div",{staticClass:"header"},[i("i",{staticClass:"material-icons"},[e._v(e._s(s.icon?s.icon:"category"))])]),i("div",{staticClass:"body"},[i("h2",[e._v(e._s(s.name))]),i("p",[e._v("Directus Team")])])])}),0)])}),1)],2),e.interfaceName?i("template",{slot:"schema"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v("\n        "+e._s(e.$t("name_field",{field:e.$helpers.formatTitle(e.interfaceName)}))+"\n      ")]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("intelligent_defaults")))])],i("form",{staticClass:"schema",on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"name"},[i("label",[e._v(e._s(e.$t("name"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-input",{staticClass:"name-input",attrs:{type:"text",placeholder:e.$t("db_column_name"),disabled:e.existing},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1),i("label",[e._v(e._s(e.$t("display_name"))+"\n          "),i("v-input",{attrs:{type:"text",disabled:"",value:e.displayName,placeholder:e.$t("auto_generated")}})],1)]),i("label",[e._v(e._s(e.$t("note"))+"\n        "),i("v-input",{attrs:{type:"text",placeholder:e.$t("add_note")},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),i("details",{staticClass:"advanced",attrs:{open:e.existing}},[i("summary",[e._v(e._s(e.$t("advanced_options")))]),i("div",{staticClass:"advanced-form"},[i("label",[e._v("\n            "+e._s(e.$t("field_type"))+"\n            "),i("v-simple-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.availableFieldTypes,function(t){return i("option",{key:t,domProps:{value:t,selected:e.type===t}},[e._v("\n                "+e._s(e.$helpers.formatTitle(t))+"\n              ")])}),0),i("small",{staticClass:"description"},[e._v(e._s(e.fieldTypeDescription))])],1),i("label",[e._v("\n            "+e._s(e.$t("db_datatype",{db:e.$helpers.formatTitle(e.databaseVendor)}))+"\n            "),i("v-simple-select",{model:{value:e.datatype,callback:function(t){e.datatype=t},expression:"datatype"}},e._l(e.availableDatatypes,function(t){return i("option",{key:t,domProps:{value:t,selected:e.datatype===t}},[e._v("\n                "+e._s(t)+"\n              ")])}),0),i("small",{staticClass:"description"},[e._v(e._s(e.selectedDatatypeInfo&&e.selectedDatatypeInfo.description))])],1),i("label",[e._v(e._s(e.$t("default"))+"\n            "),i("v-input",{attrs:{type:"text",placeholder:"NULL",disabled:"o2m"===e.type||"translation"===e.type},model:{value:e.default_value,callback:function(t){e.default_value=t},expression:"default_value"}})],1),i("label",[e._v(e._s(e.$t("length"))+"\n            "),i("v-input",{attrs:{type:e.selectedDatatypeInfo&&e.selectedDatatypeInfo.decimal?"string":"number",value:e.lengthDisabled?null:e.length,disabled:e.lengthDisabled,placeholder:e.lengthDisabled?e.$t("length_disabled_placeholder"):""},on:{input:function(t){e.length=t}}})],1),i("label",[e._v(e._s(e.$t("validation"))+"\n            "),i("v-input",{attrs:{type:"text",placeholder:e.$t("regex")},model:{value:e.validation,callback:function(t){e.validation=t},expression:"validation"}})],1),i("div"),"alias"!==e.type?i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}),e._v(" "+e._s(e.$t("required"))+"\n          ")],1):e._e(),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.readonly,callback:function(t){e.readonly=t},expression:"readonly"}}),e._v(" "+e._s(e.$t("readonly"))+"\n          ")],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.unique,callback:function(t){e.unique=t},expression:"unique"}}),e._v(" "+e._s(e.$t("unique")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.hidden_detail,callback:function(t){e.hidden_detail=t},expression:"hidden_detail"}}),e._v("\n            "+e._s(e.$t("hidden_detail")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.hidden_browse,callback:function(t){e.hidden_browse=t},expression:"hidden_browse"}}),e._v(e._s(e.$t("hidden_browse")))],1),i("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.primaryKeyTooltip,expression:"primaryKeyTooltip"}],staticClass:"toggle",class:{disabled:e.primaryKeyDisabled}},[i("v-toggle",{attrs:{disabled:e.primaryKeyDisabled},model:{value:e.primary_key,callback:function(t){e.primary_key=t},expression:"primary_key"}}),e._v("\n            "+e._s(e.$t("primary_key"))+"\n          ")],1),e.isNumeric?i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.signed,callback:function(t){e.signed=t},expression:"signed"}}),e._v("\n            "+e._s(e.$t("signed"))+"\n          ")],1):e._e()])])])],2):e._e(),e.selectedInterfaceInfo&&e.relation?i("template",{slot:"relation"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("relation_setup")))]),i("p",{staticClass:"subtext"},[e._v("\n        "+e._s(e.$t("relation_setup_copy",{relation:e.$t(e.relation)}))+"\n      ")])],"m2o"===e.relation?i("form",{staticClass:"single"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfo.collection_many,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfo.field_many,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.field}},[e._v(e._s(e.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_backward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.collection_one,callback:function(t){e.$set(e.relationInfo,"collection_one",t)},expression:"relationInfo.collection_one"}},[i("optgroup",{attrs:{label:e.$t("collections")}},e._l(e.collectionsGrouped.user,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0),i("optgroup",{attrs:{label:"Directus"}},e._l(e.collectionsGrouped.system,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyFieldByCollection(e.relationInfo.collection_one).field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyFieldByCollection(e.relationInfo.collection_one).field}},[e._v("\n          "+e._s(e.primaryKeyFieldByCollection(e.relationInfo.collection_one).field)+"\n        ")])])],1):e._e(),"o2m"===e.relation?i("form",{staticClass:"single"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.collectionInfo.collection,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyField.field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyField.field}},[e._v(e._s(e.primaryKeyField.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_forward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.collection_many,callback:function(t){e.$set(e.relationInfo,"collection_many",t)},expression:"relationInfo.collection_many"}},[i("optgroup",{attrs:{label:e.$t("collections")}},e._l(e.collectionsGrouped.user,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0),i("optgroup",{attrs:{label:"Directus"}},e._l(e.collectionsGrouped.system,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.field_many,callback:function(t){e.$set(e.relationInfo,"field_many",t)},expression:"relationInfo.field_many"}},e._l(e.fields(e.relationInfo.collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])}),0)],1):e._e(),"m2m"===e.relation?i("form",{staticClass:"full"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.collectionInfo.collection,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyField.field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyField.field}},[e._v(e._s(e.primaryKeyField.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_forward")]),i("p",[e._v(e._s(e.$t("junction_collection")))]),e.createM2Mjunction?e._e():i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfoM2M[0].collection_many},on:{input:function(t){e.relationInfoM2M[0].collection_many=t,e.relationInfoM2M[1].collection_many=t}}},[i("optgroup",{attrs:{label:e.$t("collections")}},e._l(e.collectionsGrouped.user,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0),i("optgroup",{attrs:{label:"Directus"}},e._l(e.collectionsGrouped.system,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)]),e.createM2Mjunction?i("v-input",{staticClass:"select",attrs:{type:"text",placeholder:e.autoM2Msuggestion(e.collectionInfo.collection,e.relationInfoM2M[0==e.currentM2MIndex?1:0].collection_one)},model:{value:e.createM2MjunctionName,callback:function(t){e.createM2MjunctionName=t},expression:"createM2MjunctionName"}}):e._e(),e.createM2Mjunction?e._e():i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[e.currentM2MIndex].field_many,callback:function(t){e.$set(e.relationInfoM2M[e.currentM2MIndex],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex].field_many"}},e._l(e.fields(e.relationInfoM2M[0].collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])}),0),e.createM2Mjunction?i("v-input",{staticClass:"select",attrs:{type:"text",placeholder:e.autoM2Msuggestion(e.collectionInfo.collection,"id")},model:{value:e.relationInfoM2M[e.currentM2MIndex].field_many,callback:function(t){e.$set(e.relationInfoM2M[e.currentM2MIndex],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex].field_many"}}):e._e(),e.createM2Mjunction?e._e():i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[0===e.currentM2MIndex?1:0].field_many,callback:function(t){e.$set(e.relationInfoM2M[0===e.currentM2MIndex?1:0],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex === 0 ? 1 : 0].field_many"}},e._l(e.fields(e.relationInfoM2M[0].collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])}),0),e.createM2Mjunction?i("v-input",{staticClass:"select",attrs:{type:"text",placeholder:e.autoM2Msuggestion(e.relationInfoM2M[0==e.currentM2MIndex?1:0].collection_one,"id")},model:{value:e.relationInfoM2M[0===e.currentM2MIndex?1:0].field_many,callback:function(t){e.$set(e.relationInfoM2M[0===e.currentM2MIndex?1:0],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex === 0 ? 1 : 0].field_many"}}):e._e(),i("v-checkbox",{attrs:{value:"m2mjunction",label:e.$t("auto_generate"),id:"createM2Mjunction",checked:e.createM2Mjunction},on:{change:function(t){e.createM2Mjunction=!e.createM2Mjunction}}}),i("i",{staticClass:"material-icons"},[e._v("arrow_backward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[0==e.currentM2MIndex?1:0].collection_one,callback:function(t){e.$set(e.relationInfoM2M[0==e.currentM2MIndex?1:0],"collection_one",t)},expression:"relationInfoM2M[currentM2MIndex == 0 ? 1 : 0].collection_one"}},[i("optgroup",{attrs:{label:e.$t("collections")}},e._l(e.collectionsGrouped.user,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0),i("optgroup",{attrs:{label:"Directus"}},e._l(e.collectionsGrouped.system,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field}},[e._v(e._s(e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field))])])],1):e._e()],2):e._e(),i("template",{slot:"options"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("almost_done_options")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("almost_done_copy")))])],e.selectedInterfaceInfo?i("form",{staticClass:"options",on:{submit:function(e){e.preventDefault()}}},[e._l(e.interfaceOptions.regular,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),i("p",{staticClass:"note",domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment||""))}}),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options,value:e.options[s],fields:e.selectedInterfaceInfo.options,values:e.options},on:{input:function(t){return e.$set(e.options,s,t)}}})],1)}),Object.keys(e.interfaceOptions.advanced).length>0?i("details",{staticClass:"advanced",attrs:{open:e.existing}},[i("summary",[e._v(e._s(e.$t("advanced_options")))]),e._l(e.interfaceOptions.advanced,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),i("p",{staticClass:"note",domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment||""))}}),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options,value:e.options[s]||t.default,fields:e.selectedInterfaceInfo.options,values:e.options},on:{input:function(t){return e.$set(e.options,s,t)}}})],1)})],2):e._e()],2):e._e()],2)],2)},Ou=[],qu={name:"v-field-setup",props:{collectionInfo:{type:Object,required:!0},fieldInfo:{type:Object,required:!0},saving:{type:Boolean,default:!1}},data(){return{activeTab:"interface",id:null,sort:null,field:null,datatype:null,type:null,interfaceName:null,options:{},translation:{},readonly:!1,required:!1,unique:!1,note:null,hidden_detail:!1,hidden_browse:!1,primary_key:!1,signed:!0,length:null,default_value:null,validation:null,relationInfo:{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null},relationInfoM2M:[{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null,junction_field:null},{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null,junction_field:null}],createM2Mjunction:!1,createM2MjunctionName:null}},computed:{collections(){return Ii()({},this.$store.state.collections)},collectionsGrouped(){const e=ye()(this.collections),t=e.filter(e=>e.startsWith("directus_")),i=e.filter(e=>!e.startsWith("directus_"));return{system:t,user:i}},interfaces(){return Ii()({},this.$store.state.extensions.interfaces)},interfacesGrouped(){const e=[{title:this.$t("popular"),interfaces:["text-input","textarea","wysiwyg","datetime","calendar","toggle","file","many-to-one","one-to-many","primary-key","status","sort"]},{title:this.$t("text"),interfaces:["code","hashed","markdown","password","primary-key","slug","tags","text-input","textarea","wysiwyg","wysiwyg-full"]},{title:this.$t("numeric"),interfaces:["numeric","primary-key","rating","slider","sort"]},{title:this.$t("date_and_time"),interfaces:["calendar","date","time","datetime","datetime-created","datetime-updated"]},{title:this.$t("relational"),interfaces:["one-to-many","many-to-one","many-to-many","file","translation"]}];return e.push({title:this.$t("other"),interfaces:ye()(this.interfaces).filter(t=>{let i=!1;return e.forEach(e=>{e.interfaces.includes(t)&&(i=!0)}),!1===i})}),e.map(e=>({...e,interfaces:e.interfaces.map(e=>this.interfaces[e])}))},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},primaryKeyDisabled(){return!!this.primaryKeyField},primaryKeyTooltip(){return this.primaryKeyField?this.field===this.primaryKeyField.field?this.$t("cant_disable_primary"):this.$t("max_one_primary_key"):null},selectedInterfaceInfo(){return this.interfaceName?Ii()({},this.interfaces[this.interfaceName]):null},interfaceOptions(){if(!this.selectedInterfaceInfo)return null;const e=Ii()({},this.selectedInterfaceInfo.options),t=this.$lodash.pickBy(e,e=>!e.advanced),i=this.$lodash.pickBy(e,e=>!0===e.advanced);return{regular:t,advanced:i}},existing(){return null!==this.id},schemaDisabled(){return!(this.interfaceName&&this.interfaceName.length>0)},optionsDisabled(){return!0===this.schemaDisabled||!this.field},displayName(){return this.field?this.$helpers.formatTitle(this.field):""},availableFieldTypes(){return this.interfaceName&&this.interfaces[this.interfaceName]&&this.interfaces[this.interfaceName].types||[]},availableDatatypes(){return this.type?0===this.availableFieldTypes.length?[]:Ze[this.type][this.databaseVendor].datatypes:[]},selectedDatatypeInfo(){return Ye[this.databaseVendor][this.datatype]},fieldTypeDescription(){return this.type?Ze[this.type]&&Ze[this.type].description:null},lengthDisabled(){return(!this.selectedDatatypeInfo||!0!==this.selectedDatatypeInfo.length)&&(!this.selectedDatatypeInfo||!0!==this.selectedDatatypeInfo.decimal)},relation(){return this.selectedInterfaceInfo&&this.selectedInterfaceInfo.relation?"string"===typeof this.selectedInterfaceInfo.relation?this.selectedInterfaceInfo.relation:this.selectedInterfaceInfo.relation.type:null},buttons(){let e=!1;"interface"!==this.activeTab||this.interfaceName||(e=!0),"schema"!==this.activeTab||this.field||(e=!0);let t=this.$t("next");return("options"===this.activeTab||"schema"===this.activeTab&&!1===this.hasOptions||this.existing)&&(t=this.$t("save")),{next:{disabled:e,text:t,loading:this.saving}}},tabs(){const e={interface:{text:this.$t("interface")},schema:{text:this.$t("schema"),disabled:!(this.interfaceName&&this.interfaceName.length>0)}};if(this.relation&&(e.relation={text:this.$t("relation"),disabled:!0===this.schemaDisabled||!this.field}),this.interfaceName&&ye()(this.selectedInterfaceInfo.options).length>0){let t=!0===this.schemaDisabled||!this.field;e.options={text:this.$t("options"),disabled:t}}return e},hasOptions(){return!!(this.interfaceName&&ye()(this.interfaces[this.interfaceName].options).length>0)},primaryKeyField(){return this.$lodash.find(this.collectionInfo.fields,{primary_key:!0})},currentM2MIndex(){const e=this.$lodash.findIndex(this.relationInfoM2M,e=>{return e.collection_one===this.collectionInfo.collection});return-1===e?0:e},isNumeric(){return"integer"===this.type}},created(){this.useFieldInfo(),this.initRelation(),this.activeTab=this.existing?"schema":"interface"},watch:{fieldInfo(){this.useFieldInfo()},interfaceName(e,t){if(e){if(e!==this.fieldInfo.interface){const e={...this.interfaceOptions.advanced,...this.interfaceOptions.regular};this.$lodash.forEach(e,(e,t)=>{this.$set(this.options,t,e.default)})}if((!this.existing||null!=t)&&(this.type=this.availableFieldTypes[0],this.datatype=this.type?Ze[this.type][this.databaseVendor].default:null,!this.existing)){if(this.selectedInterfaceInfo&&this.selectedInterfaceInfo.recommended){const{defaultValue:e,length:t,validation:i}=this.selectedInterfaceInfo.recommended;e&&(this.default_value=e),t&&(this.length=t),i&&(this.validation=i)}this.initRelation(),"status"===this.type&&(this.required=!0)}}},type(e){this.existing||e&&(this.datatype=Ze[e][this.databaseVendor].default,this.length>255&&"string"===this.type.toLowerCase()&&(this.datatype="TEXT"))},datatype(){this.existing&&null!==this.length||(this.selectedInterfaceInfo&&this.selectedInterfaceInfo.recommended&&this.selectedInterfaceInfo.recommended.length?this.length=this.selectedInterfaceInfo.recommended.length:(this.selectedDatatypeInfo.length&&(this.length=this.selectedDatatypeInfo.defaultLength,Ze[this.type][this.databaseVendor].length&&(this.length=Ze[this.type][this.databaseVendor].length)),this.selectedDatatypeInfo&&this.selectedDatatypeInfo.decimal&&(this.length=this.selectedDatatypeInfo.defaultDigits+","+this.selectedDatatypeInfo.defaultDecimals)))},lengthDisabled(e){e&&(this.length=null)},field(e){this.field=this.validateFieldName(e),this.relation&&("m2o"===this.relation&&(this.relationInfo.field_many=this.field),"o2m"===this.relation&&(this.relationInfo.field_one=this.field))},relationInfoM2M:{deep:!0,handler(){if(this.createM2Mjunction){var e=this.relationInfoM2M[0].field_many=this.validateFieldName(this.relationInfoM2M[0].field_many),t=this.relationInfoM2M[1].field_many=this.validateFieldName(this.relationInfoM2M[1].field_many);this.relationInfoM2M[0].junction_field=t,this.relationInfoM2M[1].junction_field=e}else this.relationInfoM2M[0].junction_field=this.relationInfoM2M[1].field_many,this.relationInfoM2M[1].junction_field=this.relationInfoM2M[0].field_many;this.relationInfoM2M[this.currentM2MIndex].field_one=this.field}},relationInfo:{deep:!0,handler(){"o2m"===this.relation&&this.getM2OID()}},createM2Mjunction(e){if(e){var t=this.currentM2MIndex,i=this.collectionInfo.collection;this.relationInfoM2M[t].field_one=i,this.relationInfoM2M[0===t?1:0].field_one=i,this.createM2MjunctionName=this.autoM2Msuggestion(i,this.relationInfoM2M[0==t?1:0].collection_one),this.relationInfoM2M[t].field_many=this.autoM2Msuggestion(i,"id"),this.relationInfoM2M[0===t?1:0].field_many=this.autoM2Msuggestion(this.relationInfoM2M[0==t?1:0].collection_one,"id")}else this.initRelation()},createM2MjunctionName(e){var t=this.validateFieldName(e);this.createM2MjunctionName=t,this.relationInfoM2M[0].collection_many=t,this.relationInfoM2M[1].collection_many=t}},methods:{nextTab(){if(this.existing)return this.saveField();switch(this.activeTab){case"interface":this.activeTab="schema";break;case"schema":if(this.relation)return this.activeTab="relation";if(!1===this.hasOptions)return this.saveField();this.activeTab="options";break;case"relation":if(!1===this.hasOptions)return this.saveField();this.activeTab="options";break;case"options":default:this.saveField();break}},setInterface(e){this.interfaceName=e,this.nextTab()},saveField(){const e={id:this.id,sort:this.sort,field:this.field,type:this.type,datatype:this.datatype,interface:this.interfaceName,default_value:this.default_value,options:this.options,readonly:this.readonly,required:this.required,unique:this.unique,note:this.note,hidden_detail:this.hidden_detail,hidden_browse:this.hidden_browse,primary_key:this.primary_key,validation:this.validation};!1===this.lengthDisabled&&(e.length=this.length),!0===this.isNumeric&&(e.signed=this.signed);const t={fieldInfo:e,relation:null};this.relation&&("m2o"===this.relation&&(t.relation={...this.relationInfo},delete t.relation.field_one),"o2m"===this.relation&&(t.relation={...this.relationInfo}),"m2m"===this.relation&&(t.relation=[...this.relationInfoM2M],!0===this.createM2Mjunction&&this.createM2MjunctionCollection())),this.$emit("save",t)},useFieldInfo(){if(!this.fieldInfo||0===ye()(this.fieldInfo).length)return;const e=this.fieldInfo.field,t=this.collectionInfo.collection,i=this.$lodash.clone(this.$store.state.collections[t].fields[e]);ye()(i).forEach(e=>{null!=i[e]&&(this[e]=i[e])}),this.interfaceName=i.interface,this.type=this.type&&this.type.toLowerCase(),this.datatype=this.datatype&&this.datatype.toUpperCase()},initRelation(){if(!this.relation)return;const e=this.collectionInfo.collection,t=this.field;if("m2o"===this.relation){const i=this.$store.getters.m2o(e,t);i?this.$lodash.forEach(i,(e,t)=>{return t&&e&&t.startsWith("collection")?this.$set(this.relationInfo,t,e.collection):t&&e&&t.startsWith("field")?this.$set(this.relationInfo,t,e.field):void(e&&this.$set(this.relationInfo,t,e))}):(this.relationInfo.collection_many=this.collectionInfo.collection,this.relationInfo.field_many=this.field,this.relationInfo.collection_one=It()(this.$store.state.collections)[0].collection,this.relationInfo.field_one=this.$lodash.find(It()(this.$store.state.collections)[0].fields,{primary_key:!0}).field)}else if("o2m"===this.relation){const i=this.$store.getters.o2m(e,t);i?this.$lodash.forEach(i,(e,t)=>{return t&&e&&t.startsWith("collection")?this.$set(this.relationInfo,t,e.collection):t&&e&&t.startsWith("field")?this.$set(this.relationInfo,t,e.field):void(e&&this.$set(this.relationInfo,t,e))}):(this.relationInfo.collection_one=this.collectionInfo.collection,this.relationInfo.field_one=this.field,this.relationInfo.collection_many=It()(this.$store.state.collections)[0].collection,this.relationInfo.field_many=this.$lodash.find(It()(this.$store.state.collections)[0].fields,{primary_key:!0}).field,this.getM2OID())}else if("m2m"===this.relation){const i=this.$store.getters.o2m(e,t);t&&i?(this.relationInfoM2M[0].id=i.id,this.relationInfoM2M[0].collection_many=i.collection_many.collection,this.relationInfoM2M[0].field_many=i.field_many.field,this.relationInfoM2M[0].collection_one=i.collection_one.collection,this.relationInfoM2M[0].field_one=i.field_one.field,this.relationInfoM2M[0].junction_field=i.junction.field_many.field,this.relationInfoM2M[1].id=i.junction.id,this.relationInfoM2M[1].collection_many=i.collection_many.collection,this.relationInfoM2M[1].field_many=i.junction.field_many.field,this.relationInfoM2M[1].collection_one=i.junction.collection_one.collection,this.relationInfoM2M[1].field_one=i.junction.field_one&&i.junction.field_one.field,this.relationInfoM2M[1].junction_field=i.field_many.field):(this.relationInfoM2M[0].collection_many=ye()(this.collections)[0],this.relationInfoM2M[0].field_many=It()(It()(this.collections)[0].fields)[0].field,this.relationInfoM2M[0].collection_one=this.collectionInfo.collection,this.relationInfoM2M[0].junction_field=It()(It()(this.collections)[0].fields)[0].field,this.relationInfoM2M[1].collection_many=ye()(this.collections)[0],this.relationInfoM2M[1].field_many=It()(It()(this.collections)[0].fields)[0].field,this.relationInfoM2M[1].collection_one=ye()(this.collections)[1],this.relationInfoM2M[1].junction_field=It()(It()(this.collections)[0].fields)[0].field,this.selectedInterfaceInfo.relation&&"object"===typeof this.selectedInterfaceInfo.relation&&this.selectedInterfaceInfo.relation.relatedCollection&&(this.relationInfoM2M[1].collection_one=this.selectedInterfaceInfo.relation.relatedCollection))}},getM2OID(){const e=this.relationInfo.collection_many,t=this.relationInfo.field_many,i=this.$store.getters.m2o(e,t);this.relationInfo.id=i?i.id:null},fields(e){return e?this.collections[e].fields:{}},primaryKeyFieldByCollection(e){const t=this.fields(e);return this.$lodash.find(t,{primary_key:!0})},validateFieldName(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_")},autoM2Msuggestion(e,t){return e+"_"+t},createM2MjunctionCollection(){var e={collection:this.createM2MjunctionName,hidden:!0,note:this.$t("junction_collection"),fields:[{field:"id",type:"integer",datatype:"int",interface:"primary-key",primary_key:!0,auto_increment:!0,signed:!1,length:10},{field:this.relationInfoM2M[0].field_many,type:"integer",length:10,datatype:"int",interface:null,readonly:!1,required:!0},{field:this.relationInfoM2M[1].field_many,type:"integer",length:10,datatype:"int",interface:null,readonly:!1,required:!0}]},t={id:{auto_increment:!0,collection:this.createM2MjunctionName,datatype:"int",default_value:null,field:"id",group:null,hidden_detail:!0,hidden_browse:!0,interface:"primary-key",length:"10",locked:0,note:null,options:null,primary_key:!0,readonly:0,required:!0,signed:!1,sort:1,translation:null,type:"integer",unique:!1,validation:null,width:4}};t[this.relationInfoM2M[0].field_many]={collection:this.createM2MjunctionName,field:this.relationInfoM2M[0].field_many,datatype:"int",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!0,type:"integer",sort:0,interface:null,hidden_detail:!0,hidden_browse:!0,required:!0,options:null,locked:!1,translation:null,readonly:!1,width:4,validation:null,group:null,length:10},t[this.relationInfoM2M[1].field_many]={collection:this.createM2MjunctionName,field:this.relationInfoM2M[1].field_many,datatype:"int",unique:!1,primary_key:!1,auto_increment:!1,default_value:null,note:null,signed:!0,type:"integer",sort:0,interface:null,hidden_detail:!0,hidden_browse:!0,required:!0,options:null,locked:!1,translation:null,readonly:!1,width:4,validation:null,group:null,length:10},this.$api.createCollection(e,{fields:"*.*"}).then(e=>e.data).then(e=>{this.$store.dispatch("addCollection",{...e,fields:t}),this.$store.dispatch("addPermission",{collection:this.createM2MjunctionName,permission:{$create:Ji,...Ji}})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}}},ju=qu,Au=(i("afa7"),Object(U["a"])(ju,Fu,Ou,!1,null,"c1287c80",null)),Du=Au.exports,Bu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{title:e.$t("duplicating_field")+": "+e.$helpers.formatTitle(e.fieldInfo.field),buttons:e.buttons},on:{save:function(t){return e.saveField()},close:function(t){return e.$emit("close")}}},[i("form",{staticClass:"options",on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"options"},[i("label",[e._v(e._s(e.$t("collection"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-simple-select",{attrs:{required:""},model:{value:e.selectedCollection,callback:function(t){e.selectedCollection=t},expression:"selectedCollection"}},e._l(Object.keys(this.collections),function(t){return i("option",{key:t,domProps:{value:t,selected:t===e.selectedCollection}},[e._v("\n            "+e._s(e.$helpers.formatTitle(t))+"\n          ")])}),0)],1)]),i("div",{staticClass:"options"},[i("label",[e._v(e._s(e.$t("field")+" "+e.$t("name"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-input",{attrs:{required:"",value:e.field,placeholder:e.fieldInfo.field,"icon-right":e.iconToShow.icon,"icon-right-color":e.iconToShow.color},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1),i("p",{staticClass:"small-text"},[e._v("\n        "+e._s(e.$t("display_name"))+":\n        "),i("b",[e._v(e._s(e.$helpers.formatTitle(e.field||"...")))])])])])])},Pu=[],Lu={name:"v-field-duplicate",props:{collectionInformation:{type:Object,required:!0},fieldInformation:{type:Object,required:!0}},data(){return{fieldInfo:Ii()({},this.fieldInformation),selectedCollection:this.collectionInformation.collection,field:null,saving:!1}},computed:{canDuplicate(){return!!(this.field&&this.isFieldValid&&this.selectedCollection)},iconToShow(){return this.field?this.isFieldValid?{icon:"done",color:"success"}:{icon:"error",color:"danger"}:{icon:null,color:null}},isFieldValid(){let e=!0;return ye()(this.collections[this.selectedCollection].fields).forEach(t=>{t===this.field&&(e=!1)}),!!e},collectionFieldCount(){return ye()(this.collections[this.selectedCollection].fields).length},collections(){const e=Ii()({},this.$store.state.collections);return ye()(e).filter(e=>!1===e.startsWith("directus_")).reduce((t,i)=>{return t[i]=e[i],t},{})},buttons(){return{save:{disabled:!this.canDuplicate,text:this.$t("create"),loading:this.saving}}}},watch:{field(e){this.field=e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_")}},methods:{saveField(){this.saving=!0;let e=this.fieldInfo;e.field=this.field,e.sort=this.collectionFieldCount+1,delete e.id,delete e.name;const t={fieldInfo:e,collection:this.selectedCollection};this.$emit("save",t)}}},Ru=Lu,Vu=(i("f5b1"),Object(U["a"])(Ru,Bu,Pu,!1,null,"7ad43cf2",null)),Uu=Vu.exports,Ku={name:"settings-fields",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("editing",{collection:this.$helpers.formatTitle(this.collection)})}`}},components:{NotFound:od,VFieldSetup:Du,VFieldDuplicate:Uu},props:{collection:{type:String,required:!0}},data(){return{duplicateInterfaceBlacklist:["primary-key","many-to-many","one-to-many","many-to-one","sort"],fieldSaving:!1,saving:!1,dragging:!1,fields:null,directusFields:null,notFound:!1,error:!1,confirmRemove:!1,confirmRemoveLoading:!1,confirmNavigation:!1,leavingTo:"",edits:{},fieldBeingEdited:null,fieldToBeRemoved:null,confirmFieldRemove:!1,fieldBeingDuplicated:null,duplicatingField:!1,editingField:!1}},computed:{breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("collections_and_fields"),path:"/settings/collections"},{name:this.$t(`collections-${this.collection}`),path:`/settings/collections/${this.collection}`}]},collectionInfo(){return this.$store.state.collections[this.collection]},fieldsWithSort(){return this.fields.map((e,t)=>({...e,sort:t+1}))},values(){return{...this.collectionInfo,...this.edits}}},methods:{remove(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteCollection(this.collection).then(()=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("removeCollection",this.collection),this.$notify({title:this.$t("collection_removed",{collection:this.$helpers.formatTitle(this.collection)}),color:"green",iconMain:"check"}),this.$router.push("/settings/collections")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},save(){this.saving=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.updateCollection(this.collection,this.edits).then(()=>{this.$notify({title:this.$t("collection_updated",{collection:this.$helpers.formatTitle(this.collection)}),color:"green",iconMain:"check"}),this.$store.dispatch("loadingFinished",e),this.saving=!1,this.$store.dispatch("updateCollection",{collection:this.collection,edits:this.edits}),this.$router.push("/settings/collections")}).catch(t=>{this.saving=!1,this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},stageValue({field:e,value:t}){t!==this.collectionInfo[e]?this.$set(this.edits,e,t):this.$delete(this.edits,e)},canDuplicate(e){return!1===this.duplicateInterfaceBlacklist.includes(e)},duplicateFieldSettings({fieldInfo:e,collection:t}){const i=[],s=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:s}),e.collection=t,i.push(this.$api.createField(t,e)),Ee.a.all(i).then(([e])=>({savedFieldInfo:e.data})).then(({savedFieldInfo:i})=>{this.$store.dispatch("loadingFinished",s),this.collection===t&&(this.fields=[...this.fields,i]),this.$store.dispatch("addField",{collection:t,field:i}),this.$notify({title:this.$t("field_created",{field:this.$helpers.formatTitle(e.field)}),color:"green",iconMain:"check"})}).then(()=>{this.duplicatingField=!1,this.fieldBeingDuplicated=null}).catch(e=>{this.$store.dispatch("loadingFinished",s),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},setFieldSettings({fieldInfo:e,relation:t}){this.fieldSaving=!0;const i=this.$store.state.collections[this.collection].fields.hasOwnProperty(e.field),s=[],n=this.$helpers.shortid.generate();if(this.$store.dispatch("loadingStart",{id:n}),i?s.push(this.$api.updateField(this.collection,e.field,e)):(delete e.id,e.collection=this.collection,s.push(this.$api.createField(this.collection,e))),t){const e=e=>{const t=e&&null!=e.id;t?s.push(this.$api.updateRelation(e.id,e)):(delete e.id,s.push(this.$api.createRelation(e)))};$e()(t)?t.forEach(e):e(t)}return Ee.a.all(s).then(([e,t])=>({savedFieldInfo:e.data,savedRelationInfo:t&&t.data})).then(({savedFieldInfo:s,savedRelationInfo:a})=>{if(this.$store.dispatch("loadingFinished",n),i?(this.fields=this.fields.map(e=>{return e.id===s.id?s:e}),this.$notify({title:this.$t("field_updated",{field:this.$helpers.formatTitle(e.field)}),color:"green",iconMain:"check"}),this.$store.dispatch("updateField",{collection:this.collection,field:s})):(this.fields=[...this.fields,s],this.$notify({title:this.$t("field_created",{field:this.$helpers.formatTitle(e.field)}),color:"green",iconMain:"check"}),this.$store.dispatch("addField",{collection:this.collection,field:s})),t){const e=e=>{const t=e&&null!=e.id;t?this.$store.dispatch("updateRelation",a):this.$store.dispatch("addRelation",a)};$e()(t)?t.forEach(e):e(t)}}).then(()=>{this.editingField=!1,this.fieldBeingEdited=null}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})}).finally(()=>{this.fieldSaving=!1})},duplicateField(e){this.fieldBeingDuplicated=e,this.duplicatingField=!0},startEditingField(e){this.fieldBeingEdited=e,this.editingField=!0},warnRemoveField(e){this.fieldToBeRemoved=e,this.confirmFieldRemove=!0},removeField(e){this.removingField=!0;const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$api.deleteField(this.collection,e).then(()=>{this.$store.dispatch("loadingFinished",t),this.fields=this.fields.filter(({field:t})=>t!==e),this.removingField=!1,this.fieldToBeRemoved=null,this.confirmFieldRemove=!1,this.$notify({title:this.$t("field_removed",{field:this.$helpers.formatTitle(e)}),color:"green",iconMain:"check"}),this.$store.dispatch("removeField",{collection:this.collection,field:e})}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},startSort(){this.dragging=!0},saveSort(){this.dragging=!1;const e=this.fieldsWithSort.map(e=>({field:e.field,sort:e.sort})),t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$api.patch(`/fields/${this.collection}`,e,{activity_skip:1}).then(e=>e.data).then(i=>{this.$store.dispatch("loadingFinished",t),this.$store.dispatch("updateFields",{collection:this.collection,updates:e}),this.fields=i}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},beforeRouteEnter(e,t,i){const{collection:s}=e.params,n=Ic.a.generate();return bc.dispatch("loadingStart",{id:n}),Ee.a.all([wc.getFields("directus_collections"),wc.getFields(s,{sort:"sort"})]).then(([e,t])=>({directusFields:e.data,fields:t.data})).then(({directusFields:e,fields:t})=>{bc.dispatch("loadingFinished",n),i(i=>{i.$data.directusFields=Object($["keyBy"])(e.map(e=>({...e,name:Cl()(e.field),note:i.$t("note_"+e.field)})),"field"),delete i.$data.directusFields.note.note,i.$data.directusFields.note.options={placeholder:i.$t("note_note")},i.$data.fields=t.map(e=>({...e,name:Cl()(e.field)})).sort((e,t)=>{return e.sort==t.sort?0:null===e.sort?1:null===t.sort?-1:e.sort>t.sort?1:-1})})}).catch(e=>{bc.dispatch("loadingFinished",n),i(t=>{t.$data.error=e})})}},zu=Ku,Wu=(i("5003"),Object(U["a"])(zu,Tu,Nu,!1,null,"73ca83b9",null)),Hu=Wu.exports,Gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings-roles"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.addNew=!0}}})],1)],2),i("v-table",{attrs:{items:e.items,columns:e.fields,"primary-key-field":"collection",link:"__link__"}}),e.addNew?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{"confirm-text":e.$t("create"),message:e.$t("create_role"),placeholder:e.$t("enter_role_name"),loading:e.adding},on:{cancel:function(t){e.addNew=!1},confirm:e.add},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1):e._e()],1)},Qu=[],Xu={name:"settings-roles",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("roles")}`}},data(){return{error:null,roles:[],adding:!1,addNew:!1,newName:""}},computed:{breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"}]},items(){return this.roles.map(e=>({...e,__link__:`/settings/roles/${e.id}`}))},fields(){return[{field:"name",name:this.$t("name")},{field:"description",name:this.$t("description")}]}},beforeRouteEnter(e,t,i){wc.getRoles().then(e=>e.data).then(e=>{i(t=>{t.$data.roles=e})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),i(t=>{t.$data.error=e})})},methods:{add(){this.adding=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.createRole({name:this.newName}).then(e=>e.data).then(t=>{this.$store.dispatch("loadingFinished",e),this.$router.push(`/settings/roles/${t.id}`)}).catch(t=>{this.adding=!1,this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})}}},Yu=Xu,Zu=Object(U["a"])(Yu,Gu,Qu,!1,null,null,null),Ju=Zu.exports,eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.error?i("div",[i("v-header"),e.error?i("v-error",{attrs:{icon:"error_outline",color:"warning",title:e.$t("server_trouble"),body:e.$t("server_trouble_copy")}}):e._e()],1):i("div",{staticClass:"settings-permissions"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[e.isNew||e.isSystem?e._e():i("v-header-button",{attrs:{loading:e.removing,label:e.$t("delete"),icon:"delete_outline",color:"danger"},on:{click:function(t){e.confirmRemove=!0}}}),i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:e.save}})],1)],2),i("label",[e._v(e._s(e.$t("permissions")))]),e.isAdmin?i("p",{staticClass:"admin-note"},[e._v(e._s(e.$t("permissions_admin")))]):i("v-permissions",{attrs:{loading:!(e.permissions&&e.statuses),permissions:e.permissions,statuses:e.statuses,fields:e.permissionFields},on:{input:e.setPermission}}),e.fields&&e.role?i("v-form",{attrs:{fields:e.fields,values:e.role,collection:"directus_roles"},on:{"stage-value":e.stageValue}}):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_role_are_you_sure",{name:e.role.name}),"confirm-text":e.$t("delete"),loading:e.removing},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e()],1)},th=[],ih=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loading?i("div",{staticClass:"v-permissions interface loading"},[i("v-spinner",{attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1):i("div",{staticClass:"interface"},[i("div",{staticClass:"v-permissions"},[i("v-permissions-header",{on:{"toggle-all":e.toggleAll}}),i("div",{staticClass:"body"},[0===Object.keys(e.rows).length?i("p",{staticClass:"no-collections-message"},[e._v("\n        "+e._s(e.$t("permissions_no_collections"))+"\n      ")]):e._e(),e._l(e.rows,function(t,s){return i("v-permissions-row",{key:s,attrs:{permission:t,"permission-name":s,statuses:(e.statuses[s]||{}).mapping,fields:e.fields[s]},on:{input:function(t){return e.$emit("input",t)}}})}),e.showDirectus?e._l(e.directusRows,function(t,s,n){return i("v-permissions-row",{key:s,class:{border:0===n},attrs:{permission:t,"permission-name":s,statuses:(e.statuses[s]||{}).mapping,fields:e.fields[s],system:""},on:{input:function(t){return e.$emit("input",t)}}})}):e._e()],2)],1),i("label",[i("v-toggle",{staticClass:"toggle",attrs:{id:"toggle-directus"},model:{value:e.showDirectus,callback:function(t){e.showDirectus=t},expression:"showDirectus"}}),e._v(e._s(e.$t("show_directus_collections")))],1)])},sh=[],nh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[e._v(e._s(e.$t("collection")))]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){return e.$emit("toggle-all","create")}}},[e._v("\n        "+e._s(e.$t("create"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){return e.$emit("toggle-all","read")}}},[e._v("\n        "+e._s(e.$t("read"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){return e.$emit("toggle-all","update")}}},[e._v("\n        "+e._s(e.$t("update"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){return e.$emit("toggle-all","delete")}}},[e._v("\n        "+e._s(e.$t("delete"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){return e.$emit("toggle-all","comment")}}},[e._v("\n        "+e._s(e.$t("comment"))+"\n      ")])]),i("div",{staticClass:"cell"},[e._v(e._s(e.$t("fields")))]),i("div",{staticClass:"cell"},[e._v(e._s(e.$t("statuses")))])])])},ah=[],oh=(i("3068"),{}),lh=Object(U["a"])(oh,nh,ah,!1,null,"f0b0b4a4",null),rh=lh.exports,ch=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-permissions-row",class:{"system-row":e.system}},[e.statuses?i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.permissionName,expression:"permissionName"}]},[e._v(e._s(e.$helpers.formatTitle(e.permissionName)))]),i("span",{staticClass:"set-all"},[i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setAll(!0)}}},[e._v("\n          "+e._s(e.$t("all"))+"\n        ")]),e._v("\n        /\n        "),i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setAll(!1)}}},[e._v("\n          "+e._s(e.$t("none"))+"\n        ")])])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("create"),options:["none","full"]},on:{input:function(t){return e.setAllStatuses("create",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("read"),options:e.permissionOptions},on:{input:function(t){return e.setAllStatuses("read",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("update"),options:e.permissionOptions},on:{input:function(t){return e.setAllStatuses("update",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("delete"),options:e.permissionOptions},on:{input:function(t){return e.setAllStatuses("delete",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("comment"),options:["none","read","create","update","full"]},on:{input:function(t){return e.setAllStatuses("comment",t)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{mixed:e.fieldState},on:{click:function(t){e.active=!e.active}}},[e._v("\n        "+e._s(e.fieldState?e.$t("mixed"):e.$t("all"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{staticClass:"mixed",on:{click:function(t){e.active=!e.active}}},[e._v("--")])])]):i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.permissionName,expression:"permissionName"}],class:{system:e.system}},[e._v(e._s(e.$helpers.formatTitle(e.system?e.permissionName.substring(9):e.permissionName))),e.system?i("i",{staticClass:"material-icons"},[e._v("star")]):e._e()]),i("span",{staticClass:"set-all"},[i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setAll(!0)}}},[e._v("\n          "+e._s(e.$t("all"))+"\n        ")]),e._v("\n        /\n        "),i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.setAll(!1)}}},[e._v("\n          "+e._s(e.$t("none"))+"\n        ")])])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.create,options:["none","full"]},on:{input:function(t){return e.emitValue("create",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.read,options:e.permissionOptions},on:{input:function(t){return e.emitValue("read",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.update,options:e.permissionOptions},on:{input:function(t){return e.emitValue("update",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.delete,options:e.permissionOptions},on:{input:function(t){return e.emitValue("delete",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.comment,options:["none","read","create","update","full"]},on:{input:function(t){return e.emitValue("comment",t)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.fieldState},on:{click:function(t){e.fieldsSelect={collection:e.permissionName}}}},[e._v("\n        "+e._s(e.fieldState?e.$t("limited"):e.$t("all"))+"\n      ")])]),e._m(0)]),e.active?[i("div",{staticClass:"sub row"},[i("div",{staticClass:"cell"},[i("span",{staticClass:"system"},[e._v(e._s(e.$t("permission_states.create"))),i("i",{staticClass:"material-icons"},[e._v("star")])])]),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.getFieldSettingsPerStatus("$create")},on:{click:function(t){e.fieldsSelect={collection:e.permissionName,status:"$create"}}}},[e._v("\n          "+e._s(e.getFieldSettingsPerStatus("$create")?e.$t("limited"):e.$t("all"))+"\n        ")])]),e.statuses?i("div",{staticClass:"cell"},[i("button",{class:{limited:0!==(e.permission.$create.status_blacklist||[]).length},on:{click:function(t){e.statusSelect={collection:e.permissionName,status:"$create"}}}},[e._v("\n          "+e._s(0===(e.permission.$create.status_blacklist||[]).length?e.$t("all"):e.$t("limited"))+"\n        ")])]):i("div",{staticClass:"cell"},[i("span",{staticClass:"mixed"},[e._v("n/a")])])])]:e._e(),e.statuses&&e.active?e._l(e.statuses,function(t,s){return i("div",{key:e.permissionName+"-"+s,staticClass:"sub row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s,expression:"status"}]},[e._v(e._s(t.name))])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].create,options:["none","full"]},on:{input:function(t){return e.emitValue("create",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].read,options:e.permissionOptions},on:{input:function(t){return e.emitValue("read",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].update,options:e.permissionOptions},on:{input:function(t){return e.emitValue("update",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].delete,options:e.permissionOptions},on:{input:function(t){return e.emitValue("delete",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].comment,options:["none","create","update","full"]},on:{input:function(t){return e.emitValue("comment",t,s)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.getFieldSettingsPerStatus(s)},on:{click:function(t){e.fieldsSelect={collection:e.permissionName,status:s}}}},[e._v("\n          "+e._s(e.getFieldSettingsPerStatus(s)?e.$t("limited"):e.$t("all"))+"\n        ")])]),i("div",{staticClass:"cell"},[i("button",{class:{limited:0!==(e.permission[s].status_blacklist||[]).length},on:{click:function(t){e.statusSelect={collection:e.permissionName,status:s}}}},[e._v("\n          "+e._s(0===(e.permission[s].status_blacklist||[]).length?e.$t("all"):e.$t("limited"))+"\n        ")])])])}):e._e(),i("button",{staticClass:"collapse",on:{click:function(t){e.active=!e.active}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.active?"unfold_less":"unfold_more"))])]),e.fieldsSelect?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("select_fields"),buttons:{confirm:{text:e.$t("confirm")}},"action-required":""},on:{confirm:function(t){e.fieldsSelect=null}}},[i("form",{staticClass:"modal-content",on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("readable_fields")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("readable_fields_copy")))]),e._l(e.fieldsWithoutPK,function(t,s){return i("v-checkbox",{key:e.permissionName+"-read-"+s,attrs:{id:e.permissionName+"-read-"+s,checked:!e.blacklist.read.includes(s),label:e.$helpers.formatTitle(s),value:s},on:{change:function(t){return e.toggleField(s)}}})})],2),i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("writable_fields")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("writable_fields_copy")))]),e._l(e.fields,function(t,s){return i("v-checkbox",{key:e.permissionName+"-write-"+s,attrs:{id:e.permissionName+"-write-"+s,checked:!e.blacklist.write.includes(s),label:e.$helpers.formatTitle(s),value:s},on:{change:function(t){return e.toggleField(s,!0)}}})})],2)])])],1):e._e(),e.statusSelect&&e.statuses?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("select_statuses"),buttons:{confirm:{text:e.$t("confirm")}},"action-required":""},on:{confirm:function(t){e.statusSelect=null}}},[i("form",{staticClass:"modal-content",on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("statuses")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("select_statuses_copy")))]),e._l(e.statuses,function(t,s){return i("v-checkbox",{key:"status-"+s,attrs:{id:"status-"+s,checked:!(e.permission[e.statusSelect.status].status_blacklist||[]).includes(s),label:t.name,value:s},on:{change:function(t){return e.toggleStatus(s)}}})})],2)])])],1):e._e()],2)},dh=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell"},[i("span",{staticClass:"mixed"},[e._v("n/a")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])}],uh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-popover",{attrs:{placement:"right-start",offset:"5"}},[i("button",{staticClass:"box",class:[{none:null===e.value},e.value]},["none"===e.value?i("i",{staticClass:"material-icons"},[e._v("close")]):"mine"===e.value?i("i",{staticClass:"material-icons"},[e._v("person")]):"role"===e.value?i("i",{staticClass:"material-icons"},[e._v("group")]):"full"===e.value?i("i",{staticClass:"material-icons"},[e._v("check")]):"read"===e.value?i("i",{staticClass:"material-icons"},[e._v("remove_red_eye")]):"create"===e.value?i("i",{staticClass:"material-icons"},[e._v("add")]):"update"===e.value?i("i",{staticClass:"material-icons"},[e._v("edit")]):"always"===e.value?i("i",{staticClass:"material-icons"},[e._v("announcement")]):"indeterminate"===e.value?i("i",{staticClass:"material-icons"},[e._v("remove")]):e._e()]),i("template",{slot:"popover"},[i("div",{staticClass:"popover-content"},e._l(e.options,function(t){return i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],key:t,on:{click:function(i){return e.$emit("input",t)}}},[i("div",{staticClass:"box",class:t},["none"===t?i("i",{staticClass:"material-icons"},[e._v("close")]):"mine"===t?i("i",{staticClass:"material-icons"},[e._v("person")]):"role"===t?i("i",{staticClass:"material-icons"},[e._v("group")]):"full"===t?i("i",{staticClass:"material-icons"},[e._v("check")]):"read"===t?i("i",{staticClass:"material-icons"},[e._v("remove_red_eye")]):"create"===t?i("i",{staticClass:"material-icons"},[e._v("add")]):"update"===t?i("i",{staticClass:"material-icons"},[e._v("edit")]):"always"===t?i("i",{staticClass:"material-icons"},[e._v("announcement")]):e._e()]),"none"===t?[e._v(e._s(e.$t("permission_states.none")))]:e._e(),"mine"===t?[e._v(e._s(e.$t("permission_states.mine")))]:e._e(),"role"===t?[e._v(e._s(e.$t("permission_states.role")))]:e._e(),"full"===t?[e._v(e._s(e.$t("permission_states.full")))]:e._e(),"read"===t?[e._v(e._s(e.$t("permission_states.read")))]:e._e(),"create"===t?[e._v(e._s(e.$t("permission_states.create")))]:e._e(),"update"===t?[e._v(e._s(e.$t("permission_states.update")))]:e._e(),"always"===t?[e._v(e._s(e.$t("permission_states.always")))]:e._e()],2)}),0)])],2)},hh=[],ph={name:"permission-toggle",props:{options:{type:Array,default:()=>[]},value:{type:String,default:"none"}}},mh=ph,fh=(i("e43d"),Object(U["a"])(mh,uh,hh,!1,null,"5aa518ac",null)),vh=fh.exports,_h={name:"v-permissions-row",components:{VPermissionsToggle:vh},props:{permission:{type:Object,required:!0},statuses:{type:Object,default:null},permissionName:{type:String,required:!0},fields:{type:Object,default:()=>({})},system:{type:Boolean,default:!1}},data(){return{active:!1,fieldsSelect:!1,statusSelect:!1}},computed:{primaryKeyFieldName(){return this.$lodash.find(this.fields,{primary_key:!0}).field},fieldsWithoutPK(){const e=Ii()({},this.fields);return delete e[this.primaryKeyFieldName],e},collapsable(){return null!=this.statuses},blacklist(){if(!this.fieldsSelect||!this.permission)return;const{status:e}=this.fieldsSelect,t=e?this.permission[e]:this.permission;return{read:t.read_field_blacklist||[],write:t.write_field_blacklist||[]}},fieldState(){if(!this.permission)return this.$t("all");if(this.statuses){let e=!0;return this.$lodash.forEach(this.permission,t=>{(t.read_field_blacklist.length>0||t.write_field_blacklist.length>0)&&(e=!1)}),!e}const e=this.permission.read_field_blacklist||[],t=this.permission.write_field_blacklist||[];return 0!==e.length||0!==t.length},userCreatedField(){return this.$lodash.find(this.fields,e=>e.type&&"user_created"===e.type.toLowerCase())},permissionOptions(){return this.userCreatedField?["none","mine","role","full"]:["none","full"]}},methods:{setAll(e=!0){const t=e?{create:"full",read:"full",update:"full",delete:"full",comment:"full",explain:"none",read_field_blacklist:[],write_field_blacklist:[],status_blacklist:[]}:{create:"none",read:"none",update:"none",delete:"none",comment:"none",explain:"none",read_field_blacklist:[],write_field_blacklist:[],status_blacklist:[]};if(this.statuses){const e=[];return ye()(this.statuses).forEach(i=>{ye()(t).forEach(s=>{e.push({collection:this.permissionName,permission:s,value:t[s],status:i})})}),this.$emit("input",e)}return this.$emit("input",ye()(t).map(e=>({collection:this.permissionName,permission:e,value:t[e]})))},emitValue(e,t,i=null){this.$emit("input",{collection:this.permissionName,permission:e,value:t,status:i})},getCombinedVal(e){if(!this.statuses)return null;let t=this.permission[ye()(this.statuses)[0]][e];return this.$lodash.forEach(this.permission,(i,s)=>{"$create"!==s&&i[e]!==t&&(t="indeterminate")}),t},getFieldSettingsPerStatus(e){const t=this.permission[e].read_field_blacklist,i=this.permission[e].write_field_blacklist;return 0!==t.length||0!==i.length},setAllStatuses(e,t){ye()(this.statuses).forEach(i=>{this.emitValue(e,t,i)})},toggleField(e,t=!1){const{status:i}=this.fieldsSelect,s=t?this.blacklist.write:this.blacklist.read,n=t?"write_field_blacklist":"read_field_blacklist";return s.includes(e)?this.emitValue(n,s.filter(t=>t!==e),i):this.emitValue(n,[...s,e],i)},toggleStatus(e){if(!this.statuses)return;const t=this.statusSelect.status,i=this.permission[t].status_blacklist;return i.includes(e)?this.emitValue("status_blacklist",i.filter(t=>t!==e),t):this.emitValue("status_blacklist",[...i,e],t)}}},gh=_h,yh=(i("b1a0"),Object(U["a"])(gh,ch,dh,!1,null,"61e5a83f",null)),bh=yh.exports,$h={name:"v-permissions",data(){return{showDirectus:!1}},components:{VPermissionsHeader:rh,VPermissionsRow:bh},props:{permissions:{type:Object,default:()=>({})},statuses:{type:Object,default:()=>({})},fields:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},computed:{directusRows(){const e=this.$lodash.pickBy(this.permissions,(e,t)=>t.startsWith("directus_"));return this.$lodash(e).toPairs().sortBy(0).fromPairs().value()},rows(){const e=this.$lodash.pickBy(this.permissions,(e,t)=>!1===t.startsWith("directus_"));return this.$lodash(e).toPairs().sortBy(0).fromPairs().value()}},methods:{toggleAll(e){const t=[];let i=!0;this.$lodash.forEach(this.permissions,(t,s)=>{s.startsWith("directus_")||(this.statuses[s]?this.$lodash.forEach(t,t=>{"full"===t[e]&&(i=!1)}):"full"===t[e]&&(i=!1))}),ye()(this.permissions).forEach(s=>{if(!s.startsWith("directus_"))return this.statuses[s]?ye()(this.statuses[s].mapping).forEach(n=>{t.push({collection:s,status:n,permission:e,value:i?"full":"none"})}):void t.push({collection:s,permission:e,value:i?"full":"none"})}),this.$emit("input",t)}}},kh=$h,wh=(i("8327"),Object(U["a"])(kh,ih,sh,!1,null,"82d46cf8",null)),Ch=wh.exports,xh={name:"settings-permissions",metaInfo(){if(this.role)return{title:`${this.$t("settings")} | ${this.$helpers.formatTitle(this.role.name)} ${this.$t("permissions")}`}},components:{VPermissions:Ch},data(){return{role:null,error:null,saving:!1,roleEdits:{},confirmRemove:!1,removing:!1,fields:{},permissionsLoading:!1,savedPermissions:{},permissionEdits:{},permissionFields:{},statuses:null}},computed:{isNew(){return"+"===this.$route.params.id},isSystem(){return!!this.role&&(1===this.role.id||2===this.role.id)},isAdmin(){return 1==this.$route.params.id},collections(){return this.$store.state.collections},breadcrumb(){return this.role?this.isNew?[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"},{name:this.$t("creating_role"),path:"/settings/roles/+"}]:[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"},{name:this.$helpers.formatTitle(this.role.name),path:`/settings/roles/${this.role.id}`}]:[]},editing(){return ye()(this.roleEdits).length>0||ye()(this.permissionEdits).length>0},permissions(){if(!this.statuses)return null;if(!this.collections)return null;const e={};return ye()(this.collections).forEach(t=>{const i=Ii()({},Zi);if(i.collection=t,null==this.statuses[t])return e[t]=i,e[t].$create=i,this.savedPermissions[t]&&(e[t]={...e[t],...this.savedPermissions[t]}),void(this.permissionEdits[t]&&(e[t]={...e[t],...this.permissionEdits[t]}));ye()(this.statuses[t].mapping).forEach(s=>{e[t]||(e[t]={}),e[t][s]={...i,status:s},this.savedPermissions[t]&&this.savedPermissions[t][s]&&(e[t][s]={...e[t][s],...this.savedPermissions[t][s]}),this.permissionEdits[t]&&this.permissionEdits[t][s]&&(e[t][s]={...e[t][s],...this.permissionEdits[t][s]})}),e[t].$create=i}),e}},beforeRouteEnter(e,t,i){const{id:s}=e.params,n="+"===s;return n?wc.getFields("directus_roles").then(e=>e.data).then(e=>{i(t=>{const i=Object($["keyBy"])(e.map(e=>({...e,name:Cl()(e.field)})),"field");t.$data.fields=i,t.$data.role=Object($["mapValues"])(i,e=>e.default_value)})}).catch(e=>{i(t=>{t.$data.error=e})}):Ee.a.all([wc.getRole(+s),wc.getFields("directus_roles")]).then(([e,t])=>({role:e.data,fields:Object($["keyBy"])(t.data.map(e=>({...e,name:Cl()(e.field)})),"field")})).then(({role:e,fields:t})=>{i(i=>{i.$data.role=e,i.$data.fields=t})}).catch(e=>{i(t=>{t.$data.error=e})})},created(){this.loadPermissions()},watch:{$route(){this.loadPermissions()}},methods:{stageValue({field:e,value:t}){this.roleEdits={...this.roleEdits,[e]:t}},save(){this.saving=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.saveRole().then(this.savePermissions).then(()=>{this.$store.dispatch("loadingFinished",e),this.saving=!1,this.$router.push("/settings/roles")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},saveRole(){return 0===ye()(this.roleEdits).length?Ee.a.resolve():this.isNew?this.$api.createRole(this.roleEdits):this.$api.updateRole(this.role.id,this.roleEdits)},savePermissions(){if(0===ye()(this.permissionEdits).length)return Ee.a.resolve();let e=[],t=[];return ye()(this.permissionEdits).forEach(i=>{if(this.statuses[i])ye()(this.permissionEdits[i]).forEach(s=>{const n=this.savedPermissions[i]&&this.savedPermissions[i][s]&&this.savedPermissions[i][s].id||null;n?t.push({id:n,...this.permissionEdits[i][s]}):e.push({collection:i,status:s,role:this.role.id,...this.permissionEdits[i][s]})});else{if(this.permissionEdits[i].$create){const s=this.savedPermissions[i]&&this.savedPermissions[i].$create&&this.savedPermissions[i].$create.id||null;if(s?t.push({id:s,...this.permissionEdits[i].$create}):e.push({collection:i,status:"$create",role:this.role.id,...this.permissionEdits[i].$create}),this.$delete(this.permissionEdits[i],"$create"),0===ye()(this.permissionEdits[i]))return}const s=this.savedPermissions[i]&&this.savedPermissions[i].id||null;s?t.push({id:s,...this.permissionEdits[i]}):e.push({collection:i,role:this.role.id,...this.permissionEdits[i]})}}),Ee.a.all([e.length>0?this.$api.createPermissions(e):Ee.a.resolve(),t.length>0?this.$api.updatePermissions(t):Ee.a.resolve()])},remove(){if(this.isSystem)return;this.removing=!0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteRole(this.role.id).then(()=>{this.$store.dispatch("loadingFinished",e),this.removing=!1,this.$router.push("/settings/roles")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},loadPermissions(){if(this.isNew)return;this.permissionsLoading=!0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),Ee.a.all([this.$api.getAllFields(),this.$api.getPermissions({"filter[role][eq]":this.$route.params.id,limit:-1})]).then(([e,t])=>({fields:e.data,permissions:t.data})).then(({fields:t,permissions:i})=>{this.$store.dispatch("loadingFinished",e);const s={};i.forEach(e=>{null==e.status?s[e.collection]={...e}:(s[e.collection]||(s[e.collection]={}),s[e.collection][e.status]={...e})}),this.permissionsLoading=!1,this.savedPermissions=s,this.statuses=this.$lodash.keyBy(t.filter(e=>e.type&&"status"===e.type.toLowerCase()).map(e=>({mapping:e.options.status_mapping,collection:e.collection})),"collection"),this.permissionFields=this.$lodash.mapValues(this.$lodash.groupBy(t,"collection"),e=>this.$lodash.keyBy(e,"field"))}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},setPermission(e){return $e()(e)?e.forEach(e=>this.stagePermission(e)):this.stagePermission(e)},stagePermission({collection:e,permission:t,value:i,status:s=null}){return null===s?this.$set(this.permissionEdits,e,{...this.permissionEdits[e]||{},[t]:i}):(null==this.permissionEdits[e]&&this.$set(this.permissionEdits,e,{}),this.$set(this.permissionEdits,e,{...this.permissionEdits[e]||{},[s]:{...this.permissionEdits[e][s]||{},[t]:i}}))}}},Ih=xh,Sh=(i("a6d2"),Object(U["a"])(Ih,eh,th,!1,null,"b6a314e8",null)),Mh=Sh.exports,Eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return!1===e.exists?i("v-not-found"):i("v-ext-page",{attrs:{id:e.id}})},Th=[],Nh={name:"page-extension",metaInfo(){const e=this.$store.state.extensions.pages[this.id];return e?{title:e.name}:null},components:{VNotFound:od},props:{id:{type:String,required:!0}},data(){return{exists:!1}},beforeRouteEnter(e,t,i){const s=bc.state.extensions.pages,n=e.params.id;let a=!1;return s.hasOwnProperty(n)&&(a=!0),i(e=>{e.exists=a})},beforeRouteUpdate(e,t,i){const s=this.$store.state.extensions.pages,n=this.id;return this.exists=!1,s.hasOwnProperty(n)&&(this.exists=!0),i()}},Fh=Nh,Oh=Object(U["a"])(Fh,Eh,Th,!1,null,null,null),qh=Oh.exports,jh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal-debug"},[i("v-header",{attrs:{title:"Debug yo modals"}}),i("label",[e._v("\n    Title\n    "),i("v-input",{model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),i("label",[e._v("\n    Confirm button text\n    "),i("v-input",{model:{value:e.confirmText,callback:function(t){e.confirmText=t},expression:"confirmText"}})],1),i("label",[e._v("\n    Cancel button text\n    "),i("v-input",{model:{value:e.cancelText,callback:function(t){e.cancelText=t},expression:"cancelText"}})],1),i("v-button",{staticClass:"button",on:{click:function(t){e.alert=!0}}},[e._v("ALERT")]),i("v-button",{staticClass:"button",on:{click:function(t){e.confirm=!0}}},[e._v("CONFIRM")]),i("v-button",{staticClass:"button",on:{click:function(t){e.prompt=!0}}},[e._v("PROMPT")]),i("p",[e._v("Prompt entered text: "+e._s(e.promptText))]),e.alert?i("v-alert",{attrs:{message:e.title,confirmText:e.confirmText},on:{confirm:function(t){e.alert=!1}}}):e._e(),e.confirm?i("v-confirm",{attrs:{message:e.title,cancelText:e.cancelText,confirmText:e.confirmText},on:{confirm:function(t){e.confirm=!1},cancel:function(t){e.confirm=!1}}}):e._e(),e.prompt?i("v-prompt",{attrs:{message:e.title,cancelText:e.cancelText,confirmText:e.confirmText,required:""},on:{confirm:function(t){e.prompt=!1},cancel:function(t){e.prompt=!1}},model:{value:e.promptText,callback:function(t){e.promptText=t},expression:"promptText"}}):e._e()],1)},Ah=[],Dh={metaInfo(){return{title:"Debug Modals"}},data(){return{alert:!1,confirm:!1,prompt:!1,title:"Are you sure you want to log out?",confirmText:"Yes",cancelText:"Cancel",promptText:"I love Directus!"}}},Bh=Dh,Ph=(i("3657"),Object(U["a"])(Bh,jh,Ah,!1,null,"4606400f",null)),Lh=Ph.exports;b["default"].use(bl["a"]);const Rh=window.__DirectusConfig__&&window.__DirectusConfig__.routerMode,Vh=window.__DirectusConfig__&&window.__DirectusConfig__.routerBaseUrl,Uh=new bl["a"]({mode:Rh||"hash",base:Vh||"/",routes:[{path:"/modals",component:Lh},{path:"/",redirect:"/collections"},{path:"/collections",component:Wc},{path:"/collections/:collection",props:!0,component:dd},{path:"/collections/:collection/:primaryKey",props:!0,component:jd},{path:"/ext/:id",props:!0,component:qh},{path:"/bookmarks/:collection/:bookmarkID",beforeEnter(e,t,i){const{collection:s,bookmarkID:n}=e.params,a=bc.state.bookmarks.filter(e=>e.id==n)[0],{search_query:o,filters:l,view_query:r,view_options:c,view_type:d}=a;wc.getItems("directus_collection_presets",{"filter[user][eq]":bc.state.currentUser.id,"filter[title][null]":1,"filter[collection][eq]":s,fields:"id"}).then(e=>e.data).then(e=>e&&e.length>=1?e[0]:null).then(e=>{if(e)return wc.updateItem("directus_collection_presets",e.id,{search_query:o,filters:l,view_query:r,view_options:c,view_type:d})}).then(()=>{return i({path:`/collections/${s}?b=${a.id}`})}).catch(e=>jc.emit("error",{notify:We.t("something_went_wrong_body"),error:e}))}},{path:"/collections/directus_files",redirect:"/files"},{path:"/files",component:vd},{path:"/collections/directus_files/:primaryKey",component:jd,alias:"/files/:primaryKey"},{path:"/collections/directus_users",component:dd,alias:"/users"},{path:"/collections/directus_users/:primaryKey",component:jd,alias:"/users/:primaryKey"},{path:"/collections/directus_activity",component:dd,alias:"/activity"},{path:"/collections/directus_activity/:primaryKey",component:jd,alias:"/activity/:primaryKey"},{path:"/debug",component:uu},{path:"/settings",component:_u},{path:"/settings/global",component:wu},{path:"/settings/collections",component:Eu},{path:"/settings/collections/:collection",component:Hu,props:!0},{path:"/settings/roles",component:Ju},{path:"/settings/roles/:id",component:Mh,props:!0},{path:"/settings/interfaces",component:Jd},{path:"/settings/interfaces/:id",component:au,props:!0},{path:"/login",component:Hd,meta:{publicRoute:!0},beforeEnter(e,t,i){return wc.loggedIn?i(!1):i()}},{path:"/logout",beforeEnter(e,t,i){bc.dispatch("logout"),i("/login")}},{path:"*",component:od}]});Uh.beforeEach((e,t,i)=>{const s=wc.loggedIn,n=e.matched.some(e=>e.meta.publicRoute);return bc.commit(wa,!1),bc.commit(Ca,!1),!1===s?n?i():"/"===t.fullPath?i({path:"/login"}):i({path:"/login",query:{redirect:e.fullPath}}):!1===bc.state.hydrated?Lc().then(()=>{if(bc.getters.editing){const{collection:e,primaryKey:t}=bc.state.edits;return i(`/collections/${e}/${t}`)}return i()}):i()}),Uh.afterEach((e,t)=>{!1===bc.state.hydrating&&"/logout"!==t.path&&bc.dispatch("track",{page:e.path})});var Kh=Uh,zh=i("2a0c"),Wh=i.n(zh),Hh=i("a75a"),Gh=i.n(Hh),Qh=i("8a60"),Xh=i.n(Qh),Yh=i("ecde"),Zh=i("340b"),Jh=i.n(Zh);function ep(e){const t=e.split(/[- :]/);return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]))}function tp(e){return e.toISOString().slice(0,19).replace("T"," ")}var ip={sqlToDate:ep,dateToSql:tp};const sp={formatTitle:Cl.a,date:ip,convertRange:Wh.a,micromustache:Gh.a,filesize:to.a,shortid:Ic.a,componentExists:Ne,formatFilters:Si,enableBodyScroll:xn["enableBodyScroll"],disableBodyScroll:xn["disableBodyScroll"],snarkdown:Yh["a"],mousetrap:Xh.a,dateFns:Jh.a},np={install(e){e.prototype.$helpers=sp}};b["default"].use(np);var ap=sp;const op={api:{},allowOtherAPI:!0,routerMode:"hash",routerBaseUrl:"/"};window.__DirectusConfig__=window.__DirectusConfig__||op,b["default"].config.productionTip=!1,y()(b["default"].prototype,{$lodash:{value:k.a},$api:{value:wc},$notify:{value:Ec},$axios:{value:T.a}}),b["default"].use(jc),b["default"].use(x["a"],{defaultDelay:500,defaultOffset:2}),b["default"].use(M.a),b["default"].use(I["a"],{name:"v-timeago",locale:"en-US",locales:{en:q.a,nl:A.a}}),b["default"].use(F.a),b["default"].component("draggable",C.a),new b["default"]({render:e=>e(yl),router:Kh,i18n:We,store:bc,api:wc,helpers:ap}).$mount("#app"),bc.watch(e=>e.currentUser.locale,e=>Qe(e))},5865:function(e,t,i){},"58de":function(e,t,i){"use strict";var s=i("8d23"),n=i.n(s);n.a},"5a2e":function(e,t,i){"use strict";var s=i("5f11"),n=i.n(s);n.a},"5b09":function(e,t){function i(e){e.key&&"tab"===e.key.toLowerCase()&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",i),window.addEventListener("mousedown",s))}function s(){document.body.classList.remove("user-is-tabbing"),window.removeEventListener("mousedown",s),window.addEventListener("keydown",i)}window.addEventListener("keydown",i)},"5d03":function(e,t,i){"use strict";var s=i("ed87"),n=i.n(s);n.a},"5d15":function(e,t,i){"use strict";var s=i("9dc8"),n=i.n(s);n.a},"5ed3":function(e,t,i){},"5f11":function(e,t,i){},"619b":function(e,t,i){"use strict";var s=i("9ce8"),n=i.n(s);n.a},6294:function(e,t,i){"use strict";var s=i("7fba"),n=i.n(s);n.a},6426:function(e,t,i){"use strict";var s=i("d9b4"),n=i.n(s);n.a},"66c3":function(e,t,i){"use strict";var s=i("28fe"),n=i.n(s);n.a},"6b04":function(e,t,i){},"6bff":function(e,t){let i,s=!1;function n(){s=!1,clearTimeout(i),i=setTimeout(()=>{!1===s&&document.body.classList.remove("dragging")},50)}document.body.addEventListener("dragenter",()=>{s=!0,document.body.classList.add("dragging")},!1),document.body.addEventListener("dragover",()=>{s=!0},!1),document.body.addEventListener("dragleave",n,!1),document.body.addEventListener("dragexit",n,!1),document.body.addEventListener("dragend",n,!1),document.body.addEventListener("drop",n,!1)},7086:function(e,t,i){},"735d":function(e,t,i){"use strict";var s=i("19c9"),n=i.n(s);n.a},"73d4":function(e,t,i){},7417:function(e,t,i){},7560:function(e,t,i){"use strict";var s=i("b8ca"),n=i.n(s);n.a},"799b":function(e,t,i){"use strict";var s=i("c0be"),n=i.n(s);n.a},"79d5":function(e,t,i){},"7d60":function(e,t,i){"use strict";var s=i("73d4"),n=i.n(s);n.a},"7fba":function(e,t,i){},"82e2":function(e,t,i){},8327:function(e,t,i){"use strict";var s=i("c958"),n=i.n(s);n.a},"83d4":function(e,t,i){"use strict";var s=i("e25a"),n=i.n(s);n.a},8456:function(e,t,i){},8701:function(e,t,i){var s={"./cs-CZ":["65f5","lang-cs-CZ"],"./cs-CZ.js":["65f5","lang-cs-CZ"],"./de-DE":["9e91","lang-de-DE"],"./de-DE.js":["9e91","lang-de-DE"],"./en-US":["1271"],"./en-US.js":["1271"],"./fr-FR":["f18a","lang-fr-FR"],"./fr-FR.js":["f18a","lang-fr-FR"],"./it-IT":["5c0a","lang-it-IT"],"./it-IT.js":["5c0a","lang-it-IT"],"./nl-NL":["c1fc","lang-nl-NL"],"./nl-NL.js":["c1fc","lang-nl-NL"],"./pt-BR":["9d0a","lang-pt-BR"],"./pt-BR.js":["9d0a","lang-pt-BR"],"./zh-CN":["a6b0","lang-zh-CN"],"./zh-CN.js":["a6b0","lang-zh-CN"]};function n(e){var t=s[e];return t?Promise.all(t.slice(1).map(i.e)).then(function(){var e=t[0];return i(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return Object.keys(s)},n.id="8701",e.exports=n},8758:function(e,t,i){"use strict";var s=i("eb4d"),n=i.n(s);n.a},8982:function(e,t,i){"use strict";var s=i("fc5b"),n=i.n(s);n.a},"8d23":function(e,t,i){},"8ff1":function(e,t,i){},9224:function(e){e.exports={a:"7.0.18"}},"92ea":function(e,t,i){},9317:function(e,t,i){},9360:function(e,t,i){"use strict";var s=i("0d0c"),n=i.n(s);n.a},"96fc":function(e,t,i){"use strict";var s=i("5ed3"),n=i.n(s);n.a},9814:function(e,t,i){},"998b":function(e,t,i){},"9a91":function(e,t,i){},"9ce8":function(e,t,i){},"9dc1":function(e,t,i){"use strict";var s=i("ce4b"),n=i.n(s);n.a},"9dc8":function(e,t,i){},a2d6:function(e,t,i){},a6d2:function(e,t,i){"use strict";var s=i("b9a3"),n=i.n(s);n.a},a725:function(e,t,i){},a970:function(e,t,i){"use strict";var s=i("82e2"),n=i.n(s);n.a},ac12:function(e,t,i){},ae68:function(e,t,i){"use strict";var s=i("1e77"),n=i.n(s);n.a},aef9:function(e,t,i){"use strict";var s=i("b307"),n=i.n(s);n.a},afa7:function(e,t,i){"use strict";var s=i("6b04"),n=i.n(s);n.a},b041:function(e,t,i){},b0a4:function(e,t,i){},b15a:function(e,t,i){},b1a0:function(e,t,i){"use strict";var s=i("c26d"),n=i.n(s);n.a},b307:function(e,t,i){},b339:function(e,t,i){},b567:function(e,t,i){},b8ca:function(e,t,i){},b8f0:function(e,t,i){},b9a3:function(e,t,i){},bb19:function(e,t,i){e.exports=i.p+"img/box.713f50cf.svg"},bb75:function(e,t,i){},bcf5:function(e,t,i){},bfcb:function(e,t,i){"use strict";var s=i("b339"),n=i.n(s);n.a},c020:function(e,t,i){"use strict";var s=i("b041"),n=i.n(s);n.a},c072:function(e,t,i){"use strict";var s=i("e716"),n=i.n(s);n.a},c0be:function(e,t,i){},c26d:function(e,t,i){},c575:function(e,t,i){"use strict";var s=i("b0a4"),n=i.n(s);n.a},c5d8:function(e,t,i){"use strict";var s=i("92ea"),n=i.n(s);n.a},c631:function(e,t,i){"use strict";var s=i("ec0f"),n=i.n(s);n.a},c702:function(e,t,i){"use strict";var s=i("3b60"),n=i.n(s);n.a},c761:function(e,t,i){"use strict";var s=i("d4fe"),n=i.n(s);n.a},c867:function(e,t,i){},c958:function(e,t,i){},c96c:function(e,t,i){"use strict";var s=i("7417"),n=i.n(s);n.a},cae2:function(e,t,i){"use strict";var s=i("998b"),n=i.n(s);n.a},cdfb:function(e,t,i){},ce4b:function(e,t,i){},d06d:function(e,t,i){},d185:function(e,t,i){},d353:function(e,t,i){"use strict";var s=i("8456"),n=i.n(s);n.a},d38e:function(e,t,i){},d485:function(e,t,i){},d4fe:function(e,t,i){},d5ae:function(e,t,i){"use strict";var s=i("4398"),n=i.n(s);n.a},d7e3:function(e,t,i){},d953:function(e,t,i){},d9b4:function(e,t,i){},dc98:function(e,t,i){},dead:function(e,t,i){},e008:function(e,t,i){},e25a:function(e,t,i){},e43d:function(e,t,i){"use strict";var s=i("d485"),n=i.n(s);n.a},e706:function(e,t,i){"use strict";var s=i("40eb"),n=i.n(s);n.a},e716:function(e,t,i){},eb4d:function(e,t,i){},ec05:function(e,t,i){"use strict";var s=i("b567"),n=i.n(s);n.a},ec0f:function(e,t,i){},ecee:function(e,t,i){"use strict";var s=i("dead"),n=i.n(s);n.a},ed57:function(e,t,i){"use strict";var s=i("8ff1"),n=i.n(s);n.a},ed87:function(e,t,i){},f01b:function(e,t,i){"use strict";var s=i("d7e3"),n=i.n(s);n.a},f2af:function(e,t,i){"use strict";var s=i("79d5"),n=i.n(s);n.a},f5b1:function(e,t,i){"use strict";var s=i("01be"),n=i.n(s);n.a},f82d:function(e,t,i){"use strict";var s=i("9814"),n=i.n(s);n.a},f90b:function(e,t,i){},fc5b:function(e,t,i){},fc6d:function(e,t,i){}});
//# sourceMappingURL=app.67bc4f4d.js.map